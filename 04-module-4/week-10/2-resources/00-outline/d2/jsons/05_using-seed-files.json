{
  "template": {
    "taskId": "738990e1-5583-463b-9168-e784f9a505a1",
    "name": "Using Seed Files",
    "repo": "Modular-Curriculum",
    "path": "content/relational-databases/topics/sql/readings/reading-10-seed-files-sql.md",
    "type": "Reading",
    "timeEstimate": 900,
    "urls": [
      "using-seed-files"
    ],
    "topic": "Homework for Tuesday",
    "subtopic": "Homework",
    "body": "# Writing And Running A Seed File In PSQL\n\nAfter a database is created, we need to populate it, or _seed_ it, with data.\nUntil now, we’ve used the command-line psql interface to create tables and\ninsert rows into those tables. While that’s fine for small datasets, it would\nbe cumbersome to add a large dataset using the command line.\n\nIn this reading, we’ll learn how to create and run a seed file, which makes the\nprocess of populating a database with test data much easier.\n\n## Creating a seed file\n\nYou can create a seed file by opening up VSCode or any text editor and saving a\nfile with the `.sql` extension.\n\nLet’s create a seed file called `seed-data.sql` that’s going to create a new\ntable called `pies` and insert 50 pie rows into the table. Use the code below\nto create the seed file, and make sure to save your seed file on your machine.\n\n_**seed-data.sql**_\n```sql\nCREATE TABLE pies (\n  flavor VARCHAR(255) PRIMARY KEY,\n  price FLOAT\n);\n\nINSERT INTO pies VALUES('Apple', 19.95);\nINSERT INTO pies VALUES('Caramel Apple Crumble', 20.53);\nINSERT INTO pies VALUES('Blueberry', 19.31);\nINSERT INTO pies VALUES('Blackberry', 22.86);\nINSERT INTO pies VALUES('Cherry', 22.32);\nINSERT INTO pies VALUES('Peach', 20.45);\nINSERT INTO pies VALUES('Raspberry', 20.99);\nINSERT INTO pies VALUES('Mixed Berry', 21.45);\nINSERT INTO pies VALUES('Strawberry Rhubarb', 24.81);\nINSERT INTO pies VALUES('Banana Cream', 18.66);\nINSERT INTO pies VALUES('Boston Toffee', 25.00);\nINSERT INTO pies VALUES('Banana Nutella', 22.12);\nINSERT INTO pies VALUES('Bananas Foster', 24.99);\nINSERT INTO pies VALUES('Boston Cream', 23.75);\nINSERT INTO pies VALUES('Cookies and Cream', 18.27);\nINSERT INTO pies VALUES('Coconut Cream', 22.89);\nINSERT INTO pies VALUES('Chess', 25.00);\nINSERT INTO pies VALUES('Lemon Chess', 25.00);\nINSERT INTO pies VALUES('Key Lime', 19.34);\nINSERT INTO pies VALUES('Lemon Meringue', 19.58);\nINSERT INTO pies VALUES('Guava', 18.92);\nINSERT INTO pies VALUES('Mango', 19.55);\nINSERT INTO pies VALUES('Plum', 20.21);\nINSERT INTO pies VALUES('Apricot', 20.55);\nINSERT INTO pies VALUES('Gooseberry', 23.54);\nINSERT INTO pies VALUES('Lingonberry', 24.35);\nINSERT INTO pies VALUES('Pear Vanilla Butterscotch', 25.13);\nINSERT INTO pies VALUES('Baked Alaska', 25.71);\nINSERT INTO pies VALUES('Chocolate', 19.00);\nINSERT INTO pies VALUES('Chocolate Mousse', 21.46);\nINSERT INTO pies VALUES('Mexican Chocolate', 28.33);\nINSERT INTO pies VALUES('Chocolate Caramel', 26.67);\nINSERT INTO pies VALUES('Chocolate Chip Cookie Dough', 18.65);\nINSERT INTO pies VALUES('Pecan', 26.33);\nINSERT INTO pies VALUES('Bourbon Caramel Pecan', 27.88);\nINSERT INTO pies VALUES('Chocolate Pecan', 27.63);\nINSERT INTO pies VALUES('Pumpkin', 20.91);\nINSERT INTO pies VALUES('Sweet Potato', 20.75);\nINSERT INTO pies VALUES('Purple Sweet Potato', 26.34);\nINSERT INTO pies VALUES('Cheesecake', 28.99);\nINSERT INTO pies VALUES('Butterscotch Praline', 29.78);\nINSERT INTO pies VALUES('Salted Caramel', 30.32);\nINSERT INTO pies VALUES('Salted Honey', 59.00);\nINSERT INTO pies VALUES('Sugar Cream', 33.89);\nINSERT INTO pies VALUES('Mississippi Mud', 28.67);\nINSERT INTO pies VALUES('Turtle Fudge', 30.58);\nINSERT INTO pies VALUES('Fruit Loops', 20.45);\nINSERT INTO pies VALUES('Black Forest', 34.99);\nINSERT INTO pies VALUES('Maple Cream', 35.88);\nINSERT INTO pies VALUES('Smores', 26.43);\nINSERT INTO pies VALUES('Milk Bar', 46.00);\n\nSELECT * FROM pies;\n```\n\n## Populating a database via < (“left caret”)\n\nNow that you have a seed file, you can insert it into a database with a\nsimple command.\n\nCreate a database named \"bakery\".\n\nThe syntax is `psql -d [database] < [path_to_file/file.sql]`. The left caret\n(`<`) takes the standard input from the file on the right (your seed file) and\ninputs it into the program on the left (`psql`).\n\nOpen up your terminal, and enter the following command. Make sure to replace\n`path_to_my_file` with the actual file path.\n\n```shell\npsql -d bakery < path_to_my_file/seed-data.sql\n```\n\nIn the terminal, you should see a bunch of `INSERT` statements and the entire\n“pies” table printed out (from the `SELECT *` query in the seed file).\n\nYou can log into psql and use `\\dt` to verify that your new table has been\nadded to the database:\n\n```shell\npostgres=# \\dt\nList of relations\n Schema |     Name     | Type  |  Owner\n public | breeds       | table | appacademy\n public | pies         | table | appacademy\n public | puppies      | table | appacademy\n```\n\n## Populating the database via | (“pipe”)\n\nYou could also use the “pipe” (`|`) to populate the database with your seed\nfile.\n\nThe syntax is `cat [path_to_file/file.sql] | psql -d [database]`. ‘cat’ is a\nstandard Unix utility that reads files sequentially, writing them to standard\noutput. The “pipe” (`|`) takes the standard output of the command on the left\nand pipes it as standard input to the command on the right.\n\nTry out this method in your terminal. If you have an existing “pies” table,\nyou’ll need to drop this table before you can add it again:\n\n```sql\nDROP TABLE pies;\n```\n\nThen, enter the following. Make sure to replace `path_to_my_file` with the\nactual file path.\n\n```shell\ncat path_to_my_file/seed-data.sql | psql -d postgres\n```\n\nAgain, you should see a bunch of `INSERT` statements and the entire “pies”\ntable printed out (from the `SELECT *` query in the seed file).\n\nYou can log into psql and use `\\dt` to verify that your new table has been\nadded to the database:\n\n```shell\npostgres=# \\dt\nList of relations\n Schema |     Name     | Type  |  Owner\n public | friends      | table | postgres\n public | pies         | table | postgres\n public | puppies      | table | postgres\n```\n\n## What we learned:\n\n* What a seed file is\n* How to create a seed file\n* How to populate a database with a seed file using <\n* How to populate a database with a seed file using |\n"
  },
  "success": true
}