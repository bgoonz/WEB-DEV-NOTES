/*! License: ULtAd5Haet.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"4CAG":function(e,t,n){"use strict";(function(t){function n(e){var t,n,i,s,o,c,a=Object.create(null);if(this[u]=a,e)if("string"==typeof e)for("?"===e.charAt(0)&&(e=e.slice(1)),o=0,c=(s=e.split("&")).length;o<c;o++)-1<(t=(i=s[o]).indexOf("="))?h(a,l(i.slice(0,t)),l(i.slice(t+1))):i.length&&h(a,l(i),"");else if(r(e))for(o=0,c=e.length;o<c;o++)h(a,(i=e[o])[0],i[1]);else for(n in e)h(a,n,e[n])}var r=Array.isArray,i=n.prototype,s=/[!'\(\)~]|%20|%00/g,o=/\+/g,c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},a=function(e){return c[e]},u="__URLSearchParams__:"+Math.random();function h(e,t,n){t in e?e[t].push(""+n):e[t]=r(n)?n:[""+n]}function l(e){return decodeURIComponent(e.replace(o," "))}function f(e){return encodeURIComponent(e).replace(s,a)}i.append=function(e,t){h(this[u],e,t)},i.delete=function(e){delete this[u][e]},i.get=function(e){var t=this[u];return e in t?t[e][0]:null},i.getAll=function(e){var t=this[u];return e in t?t[e].slice(0):[]},i.has=function(e){return e in this[u]},i.set=function(e,t){this[u][e]=[""+t]},i.forEach=function(e,t){var n=this[u];Object.getOwnPropertyNames(n).forEach((function(r){n[r].forEach((function(n){e.call(t,n,r,this)}),this)}),this)},i.toJSON=function(){return{}},i.toString=function(){var e,t,n,r,i=this[u],s=[];for(t in i)for(n=f(t),e=0,r=i[t];e<r.length;e++)s.push(n+"="+f(r[e]));return s.join("&")},function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}();"forEach"in e||(e.forEach=function(e,t){var n=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(r){r.length&&!(r in n)&&(n[r]=this.getAll(r)).forEach((function(n){e.call(t,n,r,this)}),this)}),this)}),"keys"in e||(e.keys=function(){var e=[];this.forEach((function(t,n){e.push(n)}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),"values"in e||(e.values=function(){var e=[];this.forEach((function(t){e.push(t)}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),"entries"in e||(e.entries=function(){var e=[];this.forEach((function(t,n){e.push([n,t])}));var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n}),t&&!(Symbol.iterator in e)&&(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var e,t,n,r=this.entries(),i=r.next(),s=i.done,o=[],c=Object.create(null);!s;)t=(n=i.value)[0],o.push(t),t in c||(c[t]=[]),c[t].push(n[1]),s=(i=r.next()).done;for(o.sort(),e=0;e<o.length;e++)this.delete(o[e]);for(e=0;e<o.length;e++)t=o[e],this.append(t,c[t].shift())})}((n=e.exports=t.URLSearchParams||n).prototype)}).call(this,n("fRV1"))},H29T:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="fabric-elements"},HkWh:function(e){e.exports=JSON.parse('{"a":"@atlaskit/mention","b":"19.1.0"}')},MjPE:function(e,t,n){"use strict";var r,i,s,o;function c(e){return!!e&&e!==i[i.CONTAINER]}function a(e){return!!e.userType&&e.userType===s[s.SPECIAL]}function u(e){return e.userType&&e.userType===s[s.APP]}function h(e){return e.userType&&e.userType===s[s.TEAM]}function l(e){return e&&("@all"===e||"@here"===e)}n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return a})),n.d(t,"e",(function(){return u})),n.d(t,"j",(function(){return h})),n.d(t,"i",(function(){return l})),n.d(t,"f",(function(){return f})),function(e){e[e.SELF=0]="SELF",e[e.RESTRICTED=1]="RESTRICTED",e[e.DEFAULT=2]="DEFAULT"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.SITE=1]="SITE",e[e.APPLICATION=2]="APPLICATION",e[e.CONTAINER=3]="CONTAINER"}(i||(i={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.SPECIAL=1]="SPECIAL",e[e.APP=2]="APP",e[e.TEAM=3]="TEAM",e[e.SYSTEM=4]="SYSTEM"}(s||(s={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SERVICE_ERROR=1]="SERVICE_ERROR",e[e.OK=2]="OK"}(o||(o={}));const f=e=>!(!e||!e.then)},eWMb:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"requestService",(function(){return y}));const i=e=>e&&e.omitCredentials?"omit":"include";var s=n("KEM+"),o=n.n(s);class c{constructor(){o()(this,"listeners",new Set)}subscribe(e){this.listeners.add(e),this.lastResult&&e.result(this.lastResult)}unsubscribe(e){this.listeners.delete(e)}notifyResult(e){this.listeners.forEach(t=>{t.result(e)})}notifyError(e){this.listeners.forEach(t=>{t.error&&t.error(e)})}notifyInfo(e){this.listeners.forEach(t=>{t.info&&t.info(e)})}notifyNotReady(){this.listeners.forEach(e=>{e.notReady&&e.notReady()})}}var a=n("Czhu"),u=n("EfWO"),h=n("4CAG"),l=n.n(h);const f=l.a.default||l.a,d={},E=(e,t)=>{if(t)for(const n in t)if({}.hasOwnProperty.call(t,n)){const r=t[n];if(Array.isArray(r))for(let t=0;t<r.length;t++)e[n]=r[t];else e[n]=r}},y=(e,t)=>{const{url:n,securityProvider:r,refreshedSecurityProvider:s}=e,{path:o,queryParams:c,requestInit:h}=t||d,l=r&&r(),p=((e,t="",n,r)=>{const i=new f(u.parse(e).search||void 0);if(e=e.split("?")[0],n)for(const c in n)({}).hasOwnProperty.call(n,c)&&i.append(c,n[c]);if(r&&r.params)for(const c in r.params)if({}.hasOwnProperty.call(r.params,c)){const e=r.params[c];if(Array.isArray(e))for(let t=0;t<e.length;t++)i.append(c,e[t]);else i.append(c,e)}let s="";t&&"/"!==e.substr(-1)&&(s="/");let o=i.toString();return o&&(o="?"+o),`${e}${s}${t}${o}`})(n,o,c,l),m=((e,t)=>{const n={};return E(n,t),e&&E(n,e.headers),n})(l,h&&h.headers),g=i(l),S=Object(a.a)(Object(a.a)({},h),{},{headers:m,credentials:g});return fetch(p,S).then(e=>204===e.status?Promise.resolve():e.ok?e.json():401===e.status&&s?s().then(e=>y({url:n,securityProvider:()=>e},t)):Promise.reject({code:e.status,reason:e.statusText}))};n.d(t,"utils",(function(){return p})),n.d(t,"buildCredentials",(function(){return i})),n.d(t,"AbstractResource",(function(){return c}));const p=r},pL3m:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return h})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),n.d(t,"f",(function(){return d})),n.d(t,"j",(function(){return E})),n.d(t,"e",(function(){return y})),n.d(t,"g",(function(){return p}));var r=n("hu6Q"),i=n("H29T"),s=n("HkWh"),o=n("MjPE");const c="sli";var a,u,h;!function(e){e.SEARCH="searchUser",e.SEARCH_TEAM="searchTeam",e.INITIAL_STATE="initialState",e.SELECT="select",e.SELECT_TEAM="selectTeam"}(a||(a={})),function(e){e.TYPEAHEAD="mentionTypeahead",e.MENTION="mention",e.TEAM_MENTION_HIGHLIGHT="teamMentionHighlight"}(u||(u={})),function(e){e.VIEWED="viewed",e.CLICKED="clicked",e.CLOSED="closed",e.SUCCEEDED="succeeded",e.FAILED="failed"}(h||(h={}));const l=e=>(t,n,o=[],c)=>{if(e.createAnalyticsEvent){const a={action:t,actionSubject:u.TYPEAHEAD,attributes:{packageName:s.a,packageVersion:s.b,componentName:u.MENTION,duration:Math.round(n),userIds:o,queryLength:c?c.length:0},eventType:r.b};e.createAnalyticsEvent(a).fire(i.a)}},f=e=>(t,n,o,c,a)=>{if(e){const h={action:n,actionSubject:t,actionSubjectId:c,eventType:r.e,attributes:{source:o,packageName:s.a,packageVersion:s.b,componentName:u.TEAM_MENTION_HIGHLIGHT,viewedCount:a}};e(h).fire(i.a)}},d=e=>(t,n,c,a,h)=>{const l={action:n,actionSubject:t,eventType:r.e,attributes:{packageName:s.a,packageVersion:s.b,componentName:u.MENTION,accessLevel:h,isSpecial:Object(o.i)(c),userId:a}},f=e(l);return f.fire(i.a),f},E=e=>(t,n)=>{if(e.createAnalyticsEvent){const r=y(t,n);e.createAnalyticsEvent(r).fire(i.a)}},y=(e,t)=>({action:t,actionSubject:e,eventType:r.b,attributes:{packageName:s.a,packageVersion:s.b,componentName:u.MENTION}}),p=e=>(t,n,o,c)=>{if(e.createAnalyticsEvent){const a={action:t,actionSubject:u.MENTION,actionSubjectId:"hydration",attributes:{packageName:s.a,packageVersion:s.b,componentName:u.MENTION,userId:n,fromCache:o,duration:Math.round(c)},eventType:r.b};e.createAnalyticsEvent(a).fire(i.a)}}},xV3C:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return h}));var r=n("Czhu"),i=n("eWMb"),s=n("MjPE"),o=n("zDE1"),c=n("pL3m");const a=()=>({params:{},headers:{}});class u{constructor(){this.changeListeners=new Map,this.allResultsListeners=new Map,this.errListeners=new Map,this.infoListeners=new Map,this.analyticsListeners=new Map}subscribe(e,t,n,r,i,s){t&&this.changeListeners.set(e,t),n&&this.errListeners.set(e,n),r&&this.infoListeners.set(e,r),i&&this.allResultsListeners.set(e,i),s&&this.analyticsListeners.set(e,s)}unsubscribe(e){this.changeListeners.delete(e),this.errListeners.delete(e),this.infoListeners.delete(e),this.allResultsListeners.delete(e),this.analyticsListeners.delete(e)}}class h extends u{shouldHighlightMention(e){return!1}filter(e){throw new Error("not yet implemented.\nParams: query="+e)}recordMentionSelection(e){}isFiltering(e){return!1}_notifyListeners(e,t){Object(o.a)("ak-mention-resource._notifyListeners",e&&e.mentions&&e.mentions.length,this.changeListeners),this.changeListeners.forEach((n,r)=>{try{n(e.mentions.slice(0,20),e.query,t)}catch(i){Object(o.a)(`error from listener '${r}', ignoring`,i)}})}_notifyAllResultsListeners(e){Object(o.a)("ak-mention-resource._notifyAllResultsListeners",e&&e.mentions&&e.mentions.length,this.changeListeners),this.allResultsListeners.forEach((t,n)=>{try{t(e.mentions.slice(0,20),e.query)}catch(r){Object(o.a)(`error from listener '${n}', ignoring`,r)}})}_notifyErrorListeners(e,t){this.errListeners.forEach((n,r)=>{try{n(e,t)}catch(i){Object(o.a)(`error from listener '${r}', ignoring`,i)}})}_notifyInfoListeners(e){this.infoListeners.forEach((t,n)=>{try{t(e)}catch(r){Object(o.a)(`error from listener '${n}', ignoring`,r)}})}_notifyAnalyticsListeners(e,t,n){this.analyticsListeners.forEach((r,i)=>{try{r(e,t,n)}catch(s){Object(o.a)(`error from listener '${i}', ignoring`,s)}})}}const l=e=>!!(e&&e.supportsMentionNameResolving&&e.supportsMentionNameResolving());t.c=class extends h{constructor(e){super(),this.verifyMentionConfig(e),this.config=e,this.lastReturnedSearch=0,this.activeSearches=new Set,this.shouldEnableInvite=!!e.shouldEnableInvite,this.onInviteItemClick=e.onInviteItemClick,this.userRole=e.userRole||"basic"}shouldHighlightMention(e){return!!this.config.shouldHighlightMention&&this.config.shouldHighlightMention(e)}notify(e,t,n){if(e>this.lastReturnedSearch)this.lastReturnedSearch=e,this._notifyListeners(t,{duration:Date.now()-e});else{const t=new Date(e).toISOString().substr(17,6);Object(o.a)("Stale search result, skipping",t,n)}this._notifyAllResultsListeners(t)}notifyError(e,t){this._notifyErrorListeners(e,t),t&&this.activeSearches.delete(t)}async filter(e,t){try{const n=Date.now();let r;if(e){this.activeSearches.add(e);const n=this.search(e,t);r=await n.mentions}else r=await this.initialState(t);this.notify(n,r,e)}catch(n){this.notifyError(n,e)}}recordMentionSelection(e,t){return this.recordSelection(e,t).then(()=>{},e=>Object(o.a)("error recording mention selection: "+e,e))}isFiltering(e){return this.activeSearches.has(e)}resolveMentionName(e){return this.config.mentionNameResolver?this.config.mentionNameResolver.lookupName(e):{id:e,name:"",status:s.a.UNKNOWN}}cacheMentionName(e,t){this.config.mentionNameResolver&&this.config.mentionNameResolver.cacheName(e,t)}supportsMentionNameResolving(){return!!this.config.mentionNameResolver}updateActiveSearches(e){this.activeSearches.add(e)}verifyMentionConfig(e){if(!e.url)throw new Error("config.url is a required parameter");e.securityProvider||(e.securityProvider=a)}initialState(e){return this.remoteInitialState(e)}clearContext(e={}){return Object.keys(e).filter(t=>e[t]).reduce((t,n)=>Object(r.a)({[n]:e[n]},t),{})}getQueryParams(e){const t={};return this.config.containerId&&(t.containerId=this.config.containerId),this.config.productId&&(t.productIdentifier=this.config.productId),Object(r.a)(Object(r.a)({},t),this.clearContext(e))}async remoteInitialState(e){const t={path:"bootstrap",queryParams:this.getQueryParams(e)};try{const e=await i.utils.requestService(this.config,t);return this._notifyAnalyticsListeners(c.c,c.d.INITIAL_STATE,c.a.SUCCEEDED),this.transformServiceResponse(e,"")}catch(n){throw this._notifyAnalyticsListeners(c.c,c.d.INITIAL_STATE,c.a.FAILED),n}}search(e,t){return{mentions:this.remoteSearch(e,t)}}async remoteSearch(e,t){const n={path:"search",queryParams:Object(r.a)({query:e,limit:100},this.getQueryParams(t))};try{const t=await i.utils.requestService(this.config,n);return this._notifyAnalyticsListeners(c.c,c.d.SEARCH,c.a.SUCCEEDED),this.transformServiceResponse(t,e)}catch(s){throw this._notifyAnalyticsListeners(c.c,c.d.SEARCH,c.a.FAILED),s}}transformServiceResponse(e,t){const n=e.mentions.map(e=>{let n;return(Object(s.e)(e)||Object(s.j)(e))&&(n=e.userType),Object(r.a)(Object(r.a)({},e),{},{lozenge:n,query:t})});return Object(r.a)(Object(r.a)({},e),{},{mentions:n,query:e.query||t})}async recordSelection(e,t){const n={path:"record",queryParams:Object(r.a)({selectedUserId:e.id},this.getQueryParams(t)),requestInit:{method:"POST"}},o=Object(s.j)(e)?c.d.SELECT_TEAM:c.d.SELECT;try{const e=await i.utils.requestService(this.config,n);return this._notifyAnalyticsListeners(c.c,o,c.a.SUCCEEDED),e}catch(a){throw this._notifyAnalyticsListeners(c.c,o,c.a.FAILED),a}}}},zDE1:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));let r=!1;function i(e,...t){r&&console.log(e,...t)}}}]);
//# sourceMappingURL=17.TVDbmNMTkE.js.map