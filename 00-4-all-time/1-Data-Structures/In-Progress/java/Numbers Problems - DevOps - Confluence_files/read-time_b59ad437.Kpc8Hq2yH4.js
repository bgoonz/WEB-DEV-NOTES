(window.webpackJsonp=window.webpackJsonp||[]).push([["read-time~b59ad437"],{AhzI:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("Czhu");function r(e,t){return function e(t,n,r,c,o){const i=r[t.type]||r.any;let u=Object(a.a)({},t);if(i){const e=i(Object(a.a)({},u),n,c,o);if(!1===e)return!1;u=e||t}u.content&&(u.content=u.content.reduce((t,a,c)=>{if(!a)return t;const i=e(a,{node:u,parent:n},r,c,o+1);return!1!==i&&t.push(i),t},[]));return u}(e,{node:void 0},t,0,0)}},YEVQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("AhzI");function r(e,t,n){let r=n;return Object(a.a)(e,{any:e=>{r=t(r,e)}}),r}},dr5A:function(e,t,n){"use strict";n.r(t);var a=n("ERkP"),r=n.n(a),c=n("1U1M"),o=n("+6Tk"),i=n("dIe6"),u=n("9m+Y"),d=n("z9P0"),l=n("Czhu"),s=n("YEVQ");const b=e=>{if(e){const t=e.match(/\S+/g);if(t)return t.length}return 0};var m=n("H5qd");const f=n.n(m).a`query ReadTimeQuery($contentId:ID){content(id:$contentId){nodes{id type body{dynamic{value representation}}}}}`;var p=n("L21V"),j=n("KsTJ"),O=n("a8dO");const g=Object(p.f)({readTime:{id:"read-time.by-line.estimated-read-time",defaultMessage:"{readTime} min read",description:"Estimated time to read this page"},tooltipDescription:{id:"read-time.tooltip-description",defaultMessage:"Estimated read time",description:"Tooltip message"}}),y=j.default.span`
  margin-right: 5px;
  padding-left: 3px;
  color: grey;

  &:before {
    content: "â€¢";
    display: inline-block;
    color: grey;
    padding-right: 8px;
    text-decoration: none;
  }
`;function h(e){const{createAnalyticsEvent:t}=Object(d.a)(),n=Object(a.useCallback)(()=>{t({type:"sendUIEvent",data:{source:"page",action:"displayed",actionSubject:"tooltip",actionSubjectId:"estimatedReadTime"}}).fire()},[t]);return Object(a.useEffect)(()=>{t({type:"sendTrackEvent",data:{source:"confluence-frontend",action:"displayed",actionSubject:"readTime",actionSubjectId:e.pageId,attributes:{readTime:e.readTime}}}).fire()},[e.pageId,e.readTime,t]),r.a.createElement(y,null,r.a.createElement(O.a,{tag:"span",content:r.a.createElement(p.b,Object(l.a)({},g.tooltipDescription)),onShow:n},r.a.createElement(p.b,Object(l.a)(Object(l.a)({},g.readTime),{},{values:{readTime:e.readTime}}))))}n.d(t,"FEATURE_EXTRACTION_FF",(function(){return E})),n.d(t,"calculateEstimatedReadTime",(function(){return C})),n.d(t,"ReadTime",(function(){return T}));const E="confluence.frontend.read-time.feature-extraction",C=e=>Math.ceil((e.wordCount/265*60+(e=>{let t=0;for(let n=0;n<e;n++)t+=Math.max(12-n,3);return t})(e.imageCount))/60),T=({contentId:e})=>{const[t,n]=Object(a.useState)(void 0),m=Object(o.a)(E),{createAnalyticsEvent:p}=Object(d.a)(),{data:j,loading:O,error:g}=Object(c.d)(f,{variables:{contentId:e},fetchPolicy:"cache-only"});Object(a.useEffect)(()=>{var t;const a=(e=>{var t;if("atlas_doc_format"===(null!=(t=e)&&null!=(t=t.content)&&null!=(t=t.nodes)&&null!=(t=t[0])&&null!=(t=t.body)&&null!=(t=t.dynamic)?t.representation:t)){var n;const t=null!=(n=e)&&null!=(n=n.content)&&null!=(n=n.nodes)&&null!=(n=n[0])&&null!=(n=n.body)&&null!=(n=n.dynamic)?n.value:n;if(t)try{return JSON.parse(t)}catch(a){return null}}return null})(j);if(!p||!a||O||g||!e)return;const r=null!=(t=j)&&null!=(t=t.content)&&null!=(t=t.nodes)&&null!=(t=t[0])?t.type:t,c=(e=>{const t={rawLength:JSON.stringify(e).length,textLength:0,wordCount:0,imageCount:0,inlineMacroCount:0,macroCount:0,tableCount:0};return Object(s.a)(e,(e,t)=>{switch(t.type){case"text":return Object(l.a)(Object(l.a)({},e),{},{textLength:e.textLength+(t.text?t.text.length:0),wordCount:e.wordCount+b(t.text)});case"media":return Object(l.a)(Object(l.a)({},e),{},{imageCount:e.imageCount+1});case"inlineExtension":return Object(l.a)(Object(l.a)({},e),{},{inlineMacroCount:e.macroCount+1});case"extension":return Object(l.a)(Object(l.a)({},e),{},{macroCount:e.macroCount+1});case"table":return Object(l.a)(Object(l.a)({},e),{},{tableCount:e.tableCount+1})}return e},t)})(a);n(C(c)),m&&p({type:"sendOperationalEvent",data:{source:"confluence-frontend",action:"extracted",actionSubject:"contentFeature",objectType:r,objectId:e,attributes:c}}).fire()},[e,O,j,g,m,p]);const y=Object(u.b)().locale,T=y&&"en"===y.substring(0,2).toLowerCase();return void 0!==t&&T?r.a.createElement(h,{readTime:t,pageId:e}):g?r.a.createElement(i.a,{error:g}):null}}}]);
//# sourceMappingURL=read-time~b59ad437.Kpc8Hq2yH4.js.map