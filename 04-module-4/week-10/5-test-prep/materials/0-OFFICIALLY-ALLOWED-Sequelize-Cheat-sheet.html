<h1 id="sequelize-cheatsheet">Sequelize Cheatsheet</h1>
<h2 id="command-line">Command Line</h2>
<p>Sequelize provides utilities for generating migrations, models, and seed files. They are exposed through the <code>sequelize-cli</code> command. ### Init Project</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1">$ <span class="ex">npx</span> sequelize-cli init</a></code></pre></div>
<p>You must create a database user, and update the <code>config/config.json</code> file to match your database settings to complete the initialization process. ### Create Database</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="ex">npx</span> sequelize-cli db:create</a></code></pre></div>
<h3 id="generate-a-model-and-its-migration">Generate a model and its migration</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">npx</span> sequelize-cli model:generate --name <span class="op">&lt;</span>ModelName<span class="op">&gt;</span> --attributes <span class="op">&lt;</span>column1<span class="op">&gt;</span>:<span class="op">&lt;</span>type<span class="op">&gt;</span>,<span class="op">&lt;</span>column2<span class="op">&gt;</span>:<span class="op">&lt;</span>type<span class="op">&gt;</span>,...</a></code></pre></div>
<h3 id="run-pending-migrations">Run pending migrations</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="ex">npx</span> sequelize-cli db:migrate</a></code></pre></div>
<h3 id="rollback-one-migration">Rollback one migration</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="ex">npx</span> sequelize-cli db:migrate:undo</a></code></pre></div>
<h3 id="rollback-all-migrations">Rollback all migrations</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="ex">npx</span> sequelize-cli db:migrate:undo:all</a></code></pre></div>
<h3 id="generate-a-new-seed-file">Generate a new seed file</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="ex">npx</span> sequelize-cli seed:generate --name <span class="op">&lt;</span>descriptiveName<span class="op">&gt;</span></a></code></pre></div>
<h3 id="run-all-pending-seeds">Run all pending seeds</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="ex">npx</span> sequelize-cli db:seed:all</a></code></pre></div>
<h3 id="rollback-one-seed">Rollback one seed</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1"><span class="ex">npx</span> sequelize-cli db:seed:undo</a></code></pre></div>
<h3 id="rollback-all-seeds">Rollback all seeds</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1"><span class="ex">npx</span> sequelize-cli db:seed:undo:all</a></code></pre></div>
<h2 id="migrations">Migrations</h2>
<h3 id="create-table-usually-used-in-the-up-method">Create Table (usually used in the up() method)</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="co">// This uses the short form for references</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="cf">return</span> <span class="va">queryInterface</span>.<span class="at">createTable</span>(<span class="op">&lt;</span>TableName<span class="op">&gt;,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="op">&lt;</span>columnName<span class="op">&gt;:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-4" title="4">        <span class="dt">type</span><span class="op">:</span> <span class="va">Sequelize</span>.<span class="op">&lt;</span>type<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb11-5" title="5">        <span class="dt">allowNull</span><span class="op">:</span> <span class="op">&lt;</span><span class="kw">true</span><span class="op">|</span><span class="kw">false</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb11-6" title="6">        <span class="dt">unique</span><span class="op">:</span> <span class="op">&lt;</span><span class="kw">true</span><span class="op">|</span><span class="kw">false</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb11-7" title="7">        <span class="dt">references</span><span class="op">:</span> <span class="op">{</span> <span class="dt">model</span><span class="op">:</span> <span class="op">&lt;</span>TableName<span class="op">&gt;</span> <span class="op">},</span> <span class="co">// This is the plural table name</span></a>
<a class="sourceLine" id="cb11-8" title="8">                                            <span class="co">// that the column references.</span></a>
<a class="sourceLine" id="cb11-9" title="9">    <span class="op">}</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co">// This the longer form for references that is less confusing</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="cf">return</span> <span class="va">queryInterface</span>.<span class="at">createTable</span>(<span class="op">&lt;</span>TableName<span class="op">&gt;,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-13" title="13">    <span class="op">&lt;</span>columnName<span class="op">&gt;:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-14" title="14">        <span class="dt">type</span><span class="op">:</span> <span class="va">Sequelize</span>.<span class="op">&lt;</span>type<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb11-15" title="15">        <span class="dt">allowNull</span><span class="op">:</span> <span class="op">&lt;</span><span class="kw">true</span><span class="op">|</span><span class="kw">false</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb11-16" title="16">        <span class="dt">unique</span><span class="op">:</span> <span class="op">&lt;</span><span class="kw">true</span><span class="op">|</span><span class="kw">false</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb11-17" title="17">        <span class="dt">references</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-18" title="18">            <span class="dt">model</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-19" title="19">                <span class="dt">tableName</span><span class="op">:</span> <span class="op">&lt;</span>TableName<span class="op">&gt;</span> <span class="co">// This is the plural table name</span></a>
<a class="sourceLine" id="cb11-20" title="20">            <span class="op">}</span></a>
<a class="sourceLine" id="cb11-21" title="21">        <span class="op">}</span></a>
<a class="sourceLine" id="cb11-22" title="22">    <span class="op">}</span></a>
<a class="sourceLine" id="cb11-23" title="23"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="delete-table-usually-used-in-the-down-function">Delete Table (usually used in the down() function)</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="cf">return</span> <span class="va">queryInterface</span>.<span class="at">dropTable</span>(<span class="op">&lt;</span>TableName<span class="op">&gt;</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="adding-a-column">Adding a column</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="cf">return</span> <span class="va">queryInteface</span>.<span class="at">addColumn</span>(<span class="op">&lt;</span>TableName<span class="op">&gt;,</span> <span class="op">&lt;</span>columnName<span class="op">&gt;:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">    <span class="dt">type</span><span class="op">:</span> <span class="va">Sequelize</span>.<span class="op">&lt;</span>type<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb13-3" title="3">    <span class="dt">allowNull</span><span class="op">:</span> <span class="op">&lt;</span><span class="kw">true</span><span class="op">|</span><span class="kw">false</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb13-4" title="4">    <span class="dt">unique</span><span class="op">:</span> <span class="op">&lt;</span><span class="kw">true</span><span class="op">|</span><span class="kw">false</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb13-5" title="5">    <span class="dt">references</span><span class="op">:</span> <span class="op">{</span> <span class="dt">model</span><span class="op">:</span> <span class="op">&lt;</span>TableName<span class="op">&gt;</span> <span class="op">},</span> <span class="co">// This is the plural table name</span></a>
<a class="sourceLine" id="cb13-6" title="6">                                        <span class="co">// that the column references.</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="removing-a-column">Removing a column</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="cf">return</span> <span class="va">queryInterface</span>.<span class="at">removeColumn</span>(<span class="op">&lt;</span>TableName<span class="op">&gt;,</span> <span class="op">&lt;</span>columnName<span class="op">&gt;</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="model-associations">Model Associations</h2>
<h3 id="one-to-one-between-student-and-scholarship">One to One between Student and Scholarship</h3>
<p><code>student.js</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1">    <span class="va">Student</span>.<span class="at">hasOne</span>(<span class="va">models</span>.<span class="at">Scholarship</span><span class="op">,</span> <span class="op">{</span> <span class="dt">foreignKey</span><span class="op">:</span> <span class="st">&#39;studentId&#39;</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p><code>scholarship.js</code></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1">    <span class="va">Scholarship</span>.<span class="at">belongsTo</span>(<span class="va">models</span>.<span class="at">Student</span><span class="op">,</span> <span class="op">{</span> <span class="dt">foreignKey</span><span class="op">:</span> <span class="st">&#39;studentId&#39;</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="one-to-many-between-student-and-class">One to Many between Student and Class</h3>
<p><code>student.js</code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1">    <span class="va">Student</span>.<span class="at">belongsTo</span>(<span class="va">models</span>.<span class="at">Class</span><span class="op">,</span> <span class="op">{</span> <span class="dt">foreignKey</span><span class="op">:</span> <span class="st">&#39;classId&#39;</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p><code>class.js</code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1">    <span class="va">Class</span>.<span class="at">hasMany</span>(<span class="va">models</span>.<span class="at">Student</span><span class="op">,</span> <span class="op">{</span> <span class="dt">foreignKey</span><span class="op">:</span> <span class="st">&#39;classId&#39;</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="many-to-many-between-student-and-lesson-through-studentlessons-table">Many to Many between Student and Lesson through StudentLessons table</h3>
<p><code>student.js</code></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">const</span> columnMapping <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-2" title="2">    <span class="dt">through</span><span class="op">:</span> <span class="st">&#39;StudentLesson&#39;</span><span class="op">,</span> <span class="co">// This is the model name referencing the join table.</span></a>
<a class="sourceLine" id="cb19-3" title="3">    <span class="dt">otherKey</span><span class="op">:</span> <span class="st">&#39;lessonId&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb19-4" title="4">    <span class="dt">foreignKey</span><span class="op">:</span> <span class="st">&#39;studentId&#39;</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="va">Student</span>.<span class="at">belongsToMany</span>(<span class="va">models</span>.<span class="at">Lesson</span><span class="op">,</span> columnMapping)<span class="op">;</span></a></code></pre></div>
<p><code>lesson.js</code></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">const</span> columnMapping <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb20-2" title="2">    <span class="dt">through</span><span class="op">:</span> <span class="st">&#39;StudentLesson&#39;</span><span class="op">,</span> <span class="co">// This is the model name referencing the join table.</span></a>
<a class="sourceLine" id="cb20-3" title="3">    <span class="dt">otherKey</span><span class="op">:</span> <span class="st">&#39;studentId&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb20-4" title="4">    <span class="dt">foreignKey</span><span class="op">:</span> <span class="st">&#39;lessonId&#39;</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="va">Lesson</span>.<span class="at">belongsToMany</span>(<span class="va">models</span>.<span class="at">Student</span><span class="op">,</span> columnMapping)<span class="op">;</span></a></code></pre></div>
<h2 id="inserting-a-new-item">Inserting a new item</h2>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="co">// Way 1 - With build and save</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="kw">const</span> pet <span class="op">=</span> <span class="va">Pet</span>.<span class="at">build</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb21-3" title="3">    <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;Fido&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-4" title="4">    <span class="dt">petTypeId</span><span class="op">:</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="cf">await</span> <span class="va">pet</span>.<span class="at">save</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="co">// Way 2 - With create</span></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">Pet</span>.<span class="at">create</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb21-9" title="9">    <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;Fido&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-10" title="10">    <span class="dt">petTypeId</span><span class="op">:</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb21-11" title="11"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="updating-an-item">Updating an item</h2>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="co">// Find the pet with id = 1</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">Pet</span>.<span class="at">findByPk</span>(<span class="dv">1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="co">// Way 1</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="va">pet</span>.<span class="at">name</span> <span class="op">=</span> <span class="st">&quot;Fido, Sr.&quot;</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="cf">await</span> <span class="va">pet</span>.<span class="at">save</span><span class="op">;</span></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="co">// Way 2</span></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="cf">await</span> <span class="va">pet</span>.<span class="at">update</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb22-8" title="8">    <span class="dt">name</span><span class="op">:</span> <span class="st">&quot;Fido, Sr.&quot;</span></a>
<a class="sourceLine" id="cb22-9" title="9"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="deleting-a-single-item">Deleting a single item</h2>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="co">// Find the pet with id = 1</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">Pet</span>.<span class="at">findByPk</span>(<span class="dv">1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="co">// Notice this is an instance method</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="va">pet</span>.<span class="at">destroy</span>()<span class="op">;</span></a></code></pre></div>
<h2 id="deleting-multiple-items">Deleting multiple items</h2>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="co">// Notice this is a static class method</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="cf">await</span> <span class="va">Pet</span>.<span class="at">destroy</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb24-3" title="3">    <span class="dt">where</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb24-4" title="4">        <span class="dt">petTypeId</span><span class="op">:</span> <span class="dv">1</span> <span class="co">// Destorys all the pets where the petType is 1</span></a>
<a class="sourceLine" id="cb24-5" title="5">    <span class="op">}</span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="query-format">Query Format</h2>
<h3 id="findone">findOne</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" title="1"><span class="cf">await</span> <span class="op">&lt;</span>Model<span class="op">&gt;</span>.<span class="at">findOne</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb25-2" title="2">    <span class="dt">where</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb25-3" title="3">        <span class="op">&lt;</span>column<span class="op">&gt;:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb25-4" title="4">            [<span class="va">Op</span>.<span class="op">&lt;</span>operator<span class="op">&gt;</span>]<span class="op">:</span> <span class="op">&lt;</span>value<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb25-5" title="5">        <span class="op">}</span></a>
<a class="sourceLine" id="cb25-6" title="6">    <span class="op">},</span></a>
<a class="sourceLine" id="cb25-7" title="7"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="findall">findAll</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="cf">await</span> <span class="op">&lt;</span>Model<span class="op">&gt;</span>.<span class="at">findAll</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb26-2" title="2">    <span class="dt">where</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb26-3" title="3">        <span class="op">&lt;</span>column<span class="op">&gt;:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb26-4" title="4">            [<span class="va">Op</span>.<span class="op">&lt;</span>operator<span class="op">&gt;</span>]<span class="op">:</span> <span class="op">&lt;</span>value<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb26-5" title="5">        <span class="op">}</span></a>
<a class="sourceLine" id="cb26-6" title="6">    <span class="op">},</span></a>
<a class="sourceLine" id="cb26-7" title="7">    <span class="dt">include</span><span class="op">:</span> <span class="op">&lt;</span>include_specifier<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb26-8" title="8">    <span class="dt">offset</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span></a>
<a class="sourceLine" id="cb26-9" title="9">    <span class="dt">limit</span><span class="op">:</span> <span class="dv">2</span></a>
<a class="sourceLine" id="cb26-10" title="10"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="findbypk">findByPk</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="cf">await</span> <span class="op">&lt;</span>Model<span class="op">&gt;</span>.<span class="at">findByPk</span>(<span class="op">&lt;</span>primary_key<span class="op">&gt;,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb27-2" title="2">    <span class="dt">include</span><span class="op">:</span> <span class="op">&lt;</span>include_specifier<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb27-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="eager-loading-associations-with-include">Eager loading associations with <code>include</code></h2>
<p>Simple include of one related model.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1">    <span class="cf">await</span> <span class="va">Pet</span>.<span class="at">findByPk</span>(<span class="dv">1</span><span class="op">,</span>  <span class="op">{</span></a>
<a class="sourceLine" id="cb28-2" title="2">        <span class="dt">include</span><span class="op">:</span> PetType</a>
<a class="sourceLine" id="cb28-3" title="3">    <span class="op">}</span>)</a></code></pre></div>
<p>Include can take an array of models if you need to include more than one.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1">    <span class="cf">await</span> <span class="va">Pet</span>.<span class="at">findByPk</span>(<span class="dv">1</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb29-2" title="2">        <span class="dt">include</span><span class="op">:</span> [Pet<span class="op">,</span> Owner]</a>
<a class="sourceLine" id="cb29-3" title="3">    <span class="op">}</span>)</a></code></pre></div>
<p>Include can also take an object with keys <code>model</code> and <code>include</code>. This is in case you have nested associations. In this case Owner doesn’t have an association with PetType, but Pet does, so we want to include PetType onto the Pet Model.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" title="1">    <span class="cf">await</span> <span class="va">Owner</span>.<span class="at">findByPk</span>(<span class="dv">1</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-2" title="2">        <span class="dt">include</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-3" title="3">            <span class="dt">model</span><span class="op">:</span> Pet</a>
<a class="sourceLine" id="cb30-4" title="4">            <span class="dt">include</span><span class="op">:</span> PetType</a>
<a class="sourceLine" id="cb30-5" title="5">        <span class="op">}</span></a>
<a class="sourceLine" id="cb30-6" title="6">    <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="tojson-method">toJSON method</h2>
<p>The confusingly named toJSON() method does <strong>not</strong> return a JSON string but instead returns a POJO for the instance.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" title="1"><span class="co">// pet is an instance of the Pet class</span></a>
<a class="sourceLine" id="cb31-2" title="2"><span class="kw">const</span> pet <span class="op">=</span> <span class="cf">await</span> <span class="va">Pet</span>.<span class="at">findByPk</span>(<span class="dv">1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="va">console</span>.<span class="at">log</span>(pet) <span class="co">// prints a giant object with</span></a>
<a class="sourceLine" id="cb31-4" title="4">                 <span class="co">// tons of properties and methods</span></a>
<a class="sourceLine" id="cb31-5" title="5"><span class="co">// petPOJO is now just a plain old Javascript Object</span></a>
<a class="sourceLine" id="cb31-6" title="6"><span class="kw">const</span> petPOJO <span class="op">=</span> <span class="va">pet</span>.<span class="at">toJSON</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb31-7" title="7"><span class="va">console</span>.<span class="at">log</span>(petPOJO)<span class="op">;</span> <span class="co">// { name: &quot;Fido&quot;, petTypeId: 1 }</span></a></code></pre></div>
<h3 id="common-where-operators">Common Where Operators</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">const</span> Op <span class="op">=</span> <span class="va">Sequelize</span>.<span class="at">Op</span></a>
<a class="sourceLine" id="cb32-2" title="2">[<span class="va">Op</span>.<span class="at">and</span>]<span class="op">:</span> [<span class="op">{</span><span class="dt">a</span><span class="op">:</span> <span class="dv">5</span><span class="op">},</span> <span class="op">{</span><span class="dt">b</span><span class="op">:</span> <span class="dv">6</span><span class="op">}</span>] <span class="co">// (a = 5) AND (b = 6)</span></a>
<a class="sourceLine" id="cb32-3" title="3">[<span class="va">Op</span>.<span class="at">or</span>]<span class="op">:</span> [<span class="op">{</span><span class="dt">a</span><span class="op">:</span> <span class="dv">5</span><span class="op">},</span> <span class="op">{</span><span class="dt">a</span><span class="op">:</span> <span class="dv">6</span><span class="op">}</span>]  <span class="co">// (a = 5 OR a = 6)</span></a>
<a class="sourceLine" id="cb32-4" title="4">[<span class="va">Op</span>.<span class="at">gt</span>]<span class="op">:</span> <span class="dv">6</span><span class="op">,</span>                <span class="co">// &gt; 6</span></a>
<a class="sourceLine" id="cb32-5" title="5">[<span class="va">Op</span>.<span class="at">gte</span>]<span class="op">:</span> <span class="dv">6</span><span class="op">,</span>               <span class="co">// &gt;= 6</span></a>
<a class="sourceLine" id="cb32-6" title="6">[<span class="va">Op</span>.<span class="at">lt</span>]<span class="op">:</span> <span class="dv">10</span><span class="op">,</span>               <span class="co">// &lt; 10</span></a>
<a class="sourceLine" id="cb32-7" title="7">[<span class="va">Op</span>.<span class="at">lte</span>]<span class="op">:</span> <span class="dv">10</span><span class="op">,</span>              <span class="co">// &lt;= 10</span></a>
<a class="sourceLine" id="cb32-8" title="8">[<span class="va">Op</span>.<span class="at">ne</span>]<span class="op">:</span> <span class="dv">20</span><span class="op">,</span>               <span class="co">// != 20</span></a>
<a class="sourceLine" id="cb32-9" title="9">[<span class="va">Op</span>.<span class="at">eq</span>]<span class="op">:</span> <span class="dv">3</span><span class="op">,</span>                <span class="co">// = 3</span></a>
<a class="sourceLine" id="cb32-10" title="10">[<span class="va">Op</span>.<span class="at">is</span>]<span class="op">:</span> <span class="kw">null</span>              <span class="co">// IS NULL</span></a>
<a class="sourceLine" id="cb32-11" title="11">[<span class="va">Op</span>.<span class="at">not</span>]<span class="op">:</span> <span class="kw">true</span><span class="op">,</span>            <span class="co">// IS NOT TRUE</span></a>
<a class="sourceLine" id="cb32-12" title="12">[<span class="va">Op</span>.<span class="at">between</span>]<span class="op">:</span> [<span class="dv">6</span><span class="op">,</span> <span class="dv">10</span>]<span class="op">,</span>     <span class="co">// BETWEEN 6 AND 10</span></a>
<a class="sourceLine" id="cb32-13" title="13">[<span class="va">Op</span>.<span class="at">notBetween</span>]<span class="op">:</span> [<span class="dv">11</span><span class="op">,</span> <span class="dv">15</span>]<span class="op">,</span> <span class="co">// NOT BETWEEN 11 AND 15</span></a>
<a class="sourceLine" id="cb32-14" title="14">[<span class="va">Op</span>.<span class="at">in</span>]<span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>]<span class="op">,</span>           <span class="co">// IN [1, 2]</span></a>
<a class="sourceLine" id="cb32-15" title="15">[<span class="va">Op</span>.<span class="at">notIn</span>]<span class="op">:</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span>]<span class="op">,</span>        <span class="co">// NOT IN [1, 2]</span></a>
<a class="sourceLine" id="cb32-16" title="16">[<span class="va">Op</span>.<span class="at">like</span>]<span class="op">:</span> <span class="st">&#39;%hat&#39;</span><span class="op">,</span>         <span class="co">// LIKE &#39;%hat&#39;</span></a>
<a class="sourceLine" id="cb32-17" title="17">[<span class="va">Op</span>.<span class="at">notLike</span>]<span class="op">:</span> <span class="st">&#39;%hat&#39;</span>       <span class="co">// NOT LIKE &#39;%hat&#39;</span></a>
<a class="sourceLine" id="cb32-18" title="18">[<span class="va">Op</span>.<span class="at">iLike</span>]<span class="op">:</span> <span class="st">&#39;%hat&#39;</span>         <span class="co">// ILIKE &#39;%hat&#39; (case insensitive) (PG only)</span></a>
<a class="sourceLine" id="cb32-19" title="19">[<span class="va">Op</span>.<span class="at">notILike</span>]<span class="op">:</span> <span class="st">&#39;%hat&#39;</span>      <span class="co">// NOT ILIKE &#39;%hat&#39;  (PG only)</span></a>
<a class="sourceLine" id="cb32-20" title="20">[<span class="va">Op</span>.<span class="at">startsWith</span>]<span class="op">:</span> <span class="st">&#39;hat&#39;</span>     <span class="co">// LIKE &#39;hat%&#39;</span></a>
<a class="sourceLine" id="cb32-21" title="21">[<span class="va">Op</span>.<span class="at">endsWith</span>]<span class="op">:</span> <span class="st">&#39;hat&#39;</span>       <span class="co">// LIKE &#39;%hat&#39;</span></a>
<a class="sourceLine" id="cb32-22" title="22">[<span class="va">Op</span>.<span class="at">substring</span>]<span class="op">:</span> <span class="st">&#39;hat&#39;</span>      <span class="co">// LIKE &#39;%hat%&#39;</span></a>
<a class="sourceLine" id="cb32-23" title="23">[<span class="va">Op</span>.<span class="at">regexp</span>]<span class="op">:</span> <span class="st">&#39;^[h|a|t]&#39;</span>    <span class="co">// REGEXP/~ &#39;^[h|a|t]&#39; (MySQL/PG only)</span></a>
<a class="sourceLine" id="cb32-24" title="24">[<span class="va">Op</span>.<span class="at">notRegexp</span>]<span class="op">:</span> <span class="st">&#39;^[h|a|t]&#39;</span> <span class="co">// NOT REGEXP/!~ &#39;^[h|a|t]&#39; (MySQL/PG only)</span></a>
<a class="sourceLine" id="cb32-25" title="25">[<span class="va">Op</span>.<span class="at">iRegexp</span>]<span class="op">:</span> <span class="st">&#39;^[h|a|t]&#39;</span>    <span class="co">// ~* &#39;^[h|a|t]&#39; (PG only)</span></a>
<a class="sourceLine" id="cb32-26" title="26">[<span class="va">Op</span>.<span class="at">notIRegexp</span>]<span class="op">:</span> <span class="st">&#39;^[h|a|t]&#39;</span> <span class="co">// !~* &#39;^[h|a|t]&#39; (PG only)</span></a>
<a class="sourceLine" id="cb32-27" title="27">[<span class="va">Op</span>.<span class="at">like</span>]<span class="op">:</span> <span class="op">{</span> [<span class="va">Op</span>.<span class="at">any</span>]<span class="op">:</span> [<span class="st">&#39;cat&#39;</span><span class="op">,</span> <span class="st">&#39;hat&#39;</span>]<span class="op">}</span></a></code></pre></div>
