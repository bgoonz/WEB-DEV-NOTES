(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"+fki":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("ERkP"),r=n.n(a);function i(){return r.a.createElement("div",{"data-testid":"restrictions-button-placeholder",style:{width:32,height:32}})}},"2+Cz":function(e,t,n){"use strict";var a=n("ERkP"),r=n.n(a),i=n("lZoD"),s=n("kbI0"),o=n("RfuI");const c=Object(o.a)({id:"tNMe8",loader:()=>Promise.all([n.e("atlaskit~66e23772"),n.e("afp~af75c846"),n.e("vendors~4134d62c"),n.e(0),n.e(2),n.e(4),n.e(3),n.e(5),n.e(6),n.e(22),n.e(23),n.e(27),n.e(26),n.e(34),n.e(37),n.e(61),n.e("restrictions.dialog~b59ad437")]).then(n.bind(null,"uqKO")).then(({RestrictionsDialog:e})=>e),name:"RestrictionsDialogLoader"}),l=Object(o.a)({id:"6p3hN",name:"RestrictionsUpsellDialogLoader",loader:async()=>(await Promise.all([n.e("atlaskit~66e23772"),n.e("afp~af75c846"),n.e("vendors~4134d62c"),n.e(0),n.e(2),n.e(4),n.e(3),n.e(5),n.e(6),n.e(22),n.e(23),n.e(27),n.e(26),n.e(34),n.e(37),n.e(61),n.e("restrictions.dialog~b59ad437")]).then(n.bind(null,"YnqX"))).RestrictionsUpsellDialog});var d=n("gQ5V"),u=n("rc7/"),p=n("dIe6"),g=n("F4Ur"),m=n("TYX8"),E=n("AXlJ"),I=n("H5qd");const h=n.n(I).a`query IsUpsellQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id hasInheritedRestrictions hasRestrictions type}}tenant{editions{edition}}}`;function b(e){const t=Object(E.a)(e.contentId);return t?r.a.createElement(d.b,{query:h,variables:{contentId:t,status:m.a}},({data:t,error:n,loading:a})=>{var i,s,o;if(a)return null;if(n)return Object(u.b)(n)?(Object(g.a)(n),null):r.a.createElement(p.a,{error:n});const c=null!=(o=t)&&null!=(o=o.tenant)&&null!=(o=o.editions)?o.edition:o,l=Boolean(null!=(s=t)&&null!=(s=s.content)&&null!=(s=s.nodes)&&null!=(s=s[0])?s.hasRestrictions:s),d=Boolean(null!=(i=t)&&null!=(i=i.content)&&null!=(i=i.nodes)&&null!=(i=i[0])?i.hasInheritedRestrictions:i),m=l||d;return e.children({isUpsell:"FREE"===c&&!m})}):e.children({isUpsell:!1})}var f=n("CMz1");function y({contentId:e}){return r.a.createElement(i.c,{to:[f.a]},t=>r.a.createElement(b,{contentId:e},({isUpsell:n})=>{let a;if(t.getIsOpen()){const i=e=>{t.setIsOpen(!1,null,e)};a=n?r.a.createElement(l,{onClose:i}):r.a.createElement(c,{contentId:e,triggeredFrom:t.getTriggeredFrom(),onClose:i})}return r.a.createElement(s.b,null,a)}))}n.d(t,"a",(function(){return y}))},"6HGh":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n("ERkP"),r=n.n(a),i=n("KsTJ"),s=n("93GD"),o=n.n(s),c=n("5kGD"),l=n("3IV/"),d=n("bg0W"),u=n("WEdt"),p=n("+352"),g=n("mvtW");const m=i.default.div`
  width: ${({width:e})=>e}px;
  flex: 0 0 auto;
`,E=i.default.div`
  display: flex;
  flex-direction: column;
`,I=i.default.div`
  ${Object(u.h400)()};
  margin-top: 0;
`,h=i.default.div`
  margin-top: 8px;
`,b=i.default.div`
  margin-top: 16px;
`,f=i.default.div`
  background-color: ${l.N0};

  border-radius: 3px;
  display: flex;

  margin: 0 auto;

  ${({appearanceType:e})=>{switch(e){case p.l.DEFAULT:return i.css`
          padding: 16px 25px;
          ${d.e100};
          max-width: 710px;
        `;case p.l.FLAT:return i.css`
          padding: 16px 25px;
          max-width: 710px;
        `;case p.l.INLINE:return i.css`
          width: 352px;
          font-size: 14px;
        `;case p.l.INLINE_MODAL:return i.css`
          max-width: 400px;
          ${I} {
            ${Object(u.h600)()};
            margin-top: 0;
          }

          ${h} {
            margin-top: 16px;
          }

          ${b} {
            margin-top: 96px;
            display: flex;
          }
        `}}}
`;function y({actions:e,appearanceType:t=p.l.DEFAULT,body:n,edition:a,title:i}){return r.a.createElement(c.a,{mode:"light"},r.a.createElement(f,{appearanceType:t},a===g.a.PREMIUM&&r.a.createElement(m,{width:"40"},r.a.createElement(o.a,{label:"",primaryColor:l.B400})),r.a.createElement(E,null,r.a.createElement(I,null,i),"string"==typeof n?r.a.createElement(h,{dangerouslySetInnerHTML:{__html:n}}):r.a.createElement(h,null,n),e&&r.a.createElement(b,{className:"actionButtons"},e))))}},ANgl:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("ERkP"),r=n.n(a),i=n("1U1M"),s=n("rc7/"),o=n("F4Ur"),c=n("t0Ff"),l=n("6n9r");function d({children:e}){const{data:t,loading:n,error:d}=Object(i.d)(c.a);let u;return d&&(Object(s.b)(d)?Object(o.a)(d):u=d),r.a.createElement(a.Fragment,null,e({edition:Object(l.a)(t),error:u,loading:n}))}},AXlJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("ERkP"),r=n("+mzV"),i=n("Ua4J"),s=n("DlIL");function o(e){const{contentId:t}=Object(a.useContext)(r.a),{getQueryParams:n}=Object(a.useContext)(i.a);return e||(t||Object(s.a)(n(),"draftId"))}},CMz1:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("zjfJ"),r=n("lZoD");class i extends r.a{constructor(...e){super(...e),Object(a.a)(this,"state",{isOpen:!1,triggeredFrom:null})}getIsOpen(){return this.state.isOpen}getTriggeredFrom(){return this.state.triggeredFrom}setIsOpen(e,t=null,n){this.setState({isOpen:e,triggeredFrom:t},()=>{n&&setTimeout(n,0)})}}},CZ5Z:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("ERkP"),r=n.n(a),i=n("L21V"),s=n("mvtW"),o=n("mTU2"),c=n("46jh"),l=n("ZUFC");const d=Object(i.g)(Object(c.a)(({isSiteAdmin:e=!1,intl:t,appearanceType:n,parentData:a,isChildPage:i=!1,onUpFlowOpen:c})=>{const{title:d,body:u}=function(e,t,n,a){if(t&&a){const{title:e,links:{webui:t}}=a,r=`<a href="${t}" target="_blank">${e}</a>`;return{title:n.formatMessage(o.a.grandfatheredChildContentRestrictionsTitle),body:""+n.formatMessage(o.a.grandfatheredChildContentRestrictionsBody,{parent:r})}}return{title:n.formatMessage(e?o.a.siteAdminContentRestrictionsTitle:o.a.nonSiteAdminContentRestrictionsTitle),body:n.formatMessage(e?o.a.siteAdminPageRestrictionsBody:o.a.nonSiteAdminPageRestrictionsBody)}}(e,i,t,a);return r.a.createElement(l.a,{appearanceType:n,title:d,body:u,source:"pageRestrictionsInline",canShowUpgradeButton:!i,onUpFlowOpen:c,targetEdition:s.a.STANDARD})}))},Efxu:function(e,t,n){"use strict";let a,r,i,s,o;n.d(t,"a",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return o})),function(e){e.NO_RESTRICTIONS="NO_RESTRICTIONS",e.RESTRICT_EDIT="RESTRICT_EDIT",e.RESTRICT_VIEW="RESTRICT_VIEW"}(a||(a={})),function(e){e.DIRECT="DIRECT",e.MULTIPLE="MULTIPLE",e.NONE="NONE",e.PAGE_INHERITED="PAGE_INHERITED",e.SPACE="SPACE"}(r||(r={})),function(e){e.GROUP="GROUP",e.USER="USER"}(i||(i={})),function(e){e.EDIT="EDIT",e.VIEW="VIEW"}(s||(s={})),function(e){e.NO_ANCESTOR_VIEW="NO_ANCESTOR_VIEW",e.NO_SPACE_VIEW="NO_SPACE_VIEW",e.NO_SPACE_EDIT="NO_SPACE_EDIT"}(o||(o={}))},EhnY:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhMiAyIDAgMTAtNCAwdjNIMlY4YTQgNCAwIDExOCAwdjJoNmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem00IDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjNDI1MjZFIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},EufE:function(e,t,n){"use strict";var a=n("Czhu"),r=n("zjfJ"),i=n("Iy7w"),s=n("ERkP"),o=n.n(s),c=n("gQ5V"),l=n("lZoD"),d=n("z9P0"),u=(n("aWzz"),n("KsTJ")),p=n("nnm9"),g=n.n(p),m=n("RKN0"),E=n("+352"),I=n("CZ5Z");const h=u.default.div`
  min-height: 136px;
  min-width: 352px;

  & div {
    white-space: initial;
    line-height: 20px;
  }
`;h.displayName="DialogContainer";const b=u.default.div`
  display: inline-block;
  position: relative;
`;b.displayName="DialogAnchor";class f extends s.Component{getContent(){const{parentData:e,isChildPage:t,onClose:n}=this.props;return o.a.createElement(h,null,o.a.createElement(I.a,{appearanceType:E.l.INLINE,parentData:e,isChildPage:t,onUpFlowOpen:n}))}render(){const{isOpen:e,children:t,onClose:n,placement:a}=this.props;return o.a.createElement(m.a,{isOpen:e,content:this.getContent(),onClose:n,placement:a||"bottom-start"},o.a.createElement(b,null,t))}}Object(r.a)(f,"defaultProps",{isOpen:!1,onClose:g.a,parentData:{},isChildPage:!1});var y=n("mvtW"),A=n("ANgl"),O=n("dIe6"),T=n("hpu0"),C=n("3VMZ"),v=n("U+B7"),R=n("A79P"),j=n("DlIL"),w=n("Ua4J"),D=n("TYX8"),S=n("L21V"),M=n("zJ/j"),k=n("frZf"),N=n("qhEF"),P=n("WA38"),L=n("bR0+"),F=n("M/rd"),x=n("+fki"),G=n("H5qd"),U=n.n(G);const _=U.a`query ContentType($contentId:ID!){content(id:$contentId){nodes{id type}}}`,B=U.a`mutation experimentalGrantAccessMutation($contentId:String!$accessType:String!$accountId:String!)@experimental{experimentalGrantAccess(contentId:$contentId accessType:$accessType accountId:$accountId){responseStatus}}`;var z,W;const $=Object(i.a)("div",{target:"e1uakxk0"})({name:"1itck5o",styles:"width:350px;> h2{font-size:24px;}"}),Z=Object(i.a)("p",{target:"e1uakxk1"})({name:"1hzggev",styles:"font-size:14px;margin-top:10px;margin-bottom:15px;"});Z.displayName="MessageContainer";const Y=Object(i.a)("div",{target:"e1uakxk2"})({name:"1kuy7z7",styles:"font-size:14px;"}),q=Object(i.a)("div",{target:"e1uakxk3"})({name:"b3pn3b",styles:"display:inline-block;position:relative;"}),H=Object(S.f)({successTitle:{id:"restrictions.grant-access.success.title",defaultMessage:"Access request granted",description:"For content permissions"},errorTitle:{id:"restrictions.grant-access.error.title",defaultMessage:"Access request error",description:"For content permissions"},noMailServer:{id:"restrictions.grant-access.error.no-mail-server",defaultMessage:"Access was granted, but there is not a mail server configured so the notification could not be sent.",description:"For content permissions"},sendEmailError:{id:"restrictions.grant-access.error.send-email",defaultMessage:"Access was granted, but an unexpected error happened while sending the notification.",description:"For content permissions"},genericError:{id:"restrictions.grant-access.error.generic",defaultMessage:"Sorry, there was an unexpected error while granting access.",description:"For content permissions"},alreadyGranted:{id:"restrictions.grant-access.success.already-granted",defaultMessage:"Access was already granted to the user.",description:"For content permissions"},genericSuccess:{id:"restrictions.grant-access.success.generic",defaultMessage:"Access was granted, a notification to the user will be sent.",description:"For content permissions"}});const V=Object(S.g)((W=z=class extends s.PureComponent{constructor(...e){super(...e),Object(r.a)(this,"generateGrantClickHandler",(e,t)=>{const{accessType:n,accountId:a,legacyInfo:r={username:void 0},onActionClick:i}=this.props;return()=>{e({variables:{contentId:t,accessType:n,accountId:a||r.username}}),i&&i()}}),Object(r.a)(this,"handleDenyClick",()=>{const{onActionClick:e}=this.props;e&&e()})}handleGrantAccessError(e){const{formatMessage:t}=this.props.intl,n=t(H.errorTitle);return a=>{var r,i;const s=null==a||null===(r=a.graphQLErrors)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.message;let o;o=t("412"===s?H.noMailServer:"502"===s?H.sendEmailError:H.genericError),e.showErrorFlag({title:n,description:o})}}handleGrantAccessSuccess(e){const{formatMessage:t}=this.props.intl,n=t(H.successTitle);return a=>{var r;const i=null==a||null===(r=a.experimentalGrantAccess)||void 0===r?void 0:r.responseStatus;if(!i)return void e.showErrorFlag({title:n,description:t(H.genericError)});let s;s=t("202"===i?H.alreadyGranted:H.genericSuccess),e.showSuccessFlag({title:n,description:s})}}getContent(e,t,n){const{displayName:a,accessType:r,accountId:i,legacyInfo:s={username:void 0,userFullName:void 0}}=this.props;let l;var d;return l=i?o.a.createElement(P.a,{target:"_blank",href:Object(L.a)(i)},a):o.a.createElement(F.a,{target:"_blank",href:(d=s.username,d?`${k.a}/display/~${d}`:"")},s.userFullName," (",s.username,")"),o.a.createElement($,null,o.a.createElement(S.b,{id:"restrictions.grant-access.dialog.title",defaultMessage:"Access request",description:"title for dialog to grant access to content when requested",tagName:"h2"}),o.a.createElement(Z,null,o.a.createElement(S.b,{id:"restrictions.grant-access.dialog.message",description:"Person trying to request type of access to page or blog post",defaultMessage:"{person} wants to {accessType} this {contentType, select, page {page} blogpost {blog post}}",values:{person:l,accessType:r,contentType:t}})),o.a.createElement(Y,null,o.a.createElement(c.a,{mutation:B,onError:this.handleGrantAccessError(n),onCompleted:this.handleGrantAccessSuccess(n)},t=>o.a.createElement(M.a,{onClick:this.generateGrantClickHandler(t,e),"data-test-id":"grant-button"},o.a.createElement(S.b,{id:"restrictions.grant-access.dialog.action.grant",defaultMessage:"Grant access",description:"Button label to grant access request to content"}))),o.a.createElement(M.a,{appearance:"link",onClick:this.handleDenyClick},o.a.createElement(S.b,{id:"restrictions.grant-access.dialog.action.deny",defaultMessage:"Deny",description:"Button label to deny access request to content"}))))}render(){const{children:e,isOpen:t,contentId:n}=this.props;return n?o.a.createElement(c.b,{query:_,variables:{contentId:n}},({data:a,loading:r})=>{var i,s,c;if(!a&&r)return o.a.createElement(x.a,null);const d=(null==a||null===(i=a.content)||void 0===i||null===(s=i.nodes)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.type)||"page";return o.a.createElement(l.c,{to:[N.a]},a=>o.a.createElement(m.a,{isOpen:t,content:this.getContent(n,d,a)},o.a.createElement(q,{"data-test-id":"inline-dialog-anchor"},e)))}):null}},Object(r.a)(z,"defaultProps",{accessType:"view",isOpen:!1,onActionClick:()=>{},legacyInfo:{username:"",userFullName:""}}),W));var J=n("MV18"),Q=n("cEjM"),X=n("amtX"),K=n("a8dO"),ee=n("I4DW"),te=n.n(ee),ne=n("EhnY"),ae=n.n(ne),re=n("GFFF"),ie=n.n(re),se=n("AXlJ");const oe=U.a`query RestrictionsButtonQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id hasInheritedRestrictions hasRestrictions hasViewRestrictions}}}`,ce=Object(i.a)("span",{target:"eltl3nx0"})({name:"wvzyhw",styles:"button{font-size:14px;}"}),le=Object(S.f)({noRestrictions:{id:"restrictions.button.no-restrictions.tooltip",defaultMessage:"No restrictions",description:"Tooltip explaining that the shown icon indicates absence of restrictions"},restrictionsApply:{id:"restrictions.button.restrictions-apply.tooltip",defaultMessage:"Restrictions apply",description:"Tooltip explaining that the shown icon indicates presence of restrictions"}});function de(e){const{className:t,onClick:n,markItemAsLoaded:r}=e,i=Object(se.a)(e.contentId),l=Object(s.useCallback)((e,i)=>{const{content:c,icon:l}=function(e,t){if(e)return{content:o.a.createElement(S.b,Object(a.a)({},le.restrictionsApply)),icon:o.a.createElement("img",{src:te.a,"data-test-id":"locked-icon"})};if(t)return{content:o.a.createElement(S.b,Object(a.a)({},le.restrictionsApply)),icon:o.a.createElement("img",{src:ie.a,"data-test-id":"unlocked-restricted-icon"})};return{content:o.a.createElement(S.b,Object(a.a)({},le.noRestrictions)),icon:o.a.createElement("img",{src:ae.a,"data-test-id":"unlocked-icon"})}}(e,i);return r&&r(Q.a.PAGE_RESTRICTIONS),o.a.createElement(s.Fragment,null,o.a.createElement(ce,{className:t||"","data-testid":"restriction-button"},o.a.createElement(K.a,{content:c},o.a.createElement(X.a,{appearance:"subtle","data-test-id":"restrictions.dialog.button",onClick:n,iconBefore:l}))),o.a.createElement(J.a,{name:C.a.VIEW_PAGE_RESTRICTIONS_BUTTON}))},[t,r,n]);return i?o.a.createElement(c.b,{query:oe,variables:{contentId:i,status:D.a},fetchPolicy:"cache-and-network"},({data:e,loading:t})=>{var n,a,r,i,s,c;if(!e&&t)return o.a.createElement(x.a,null);const d=Boolean(null==e||null===(n=e.content)||void 0===n||null===(a=n.nodes)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.hasViewRestrictions),u=Boolean(null==e||null===(i=e.content)||void 0===i||null===(s=i.nodes)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.hasInheritedRestrictions);return l(d,u)}):null}const ue=U.a`query HasRestrictionsQuery($contentId:ID!$status:[String]){content(id:$contentId status:$status){nodes{id type hasInheritedRestrictions hasRestrictions ancestors{id title hasRestrictions links{webui}}}}}`;var pe=n("CMz1");n.d(t,"a",(function(){return Ee})),n.d(t,"b",(function(){return Ie}));const ge=Object(i.a)("div",{target:"eywtb1e0"})({name:"1hp6i1l",styles:"display:inline-block;vertical-align:top;"});class me extends s.PureComponent{constructor(...e){super(...e),Object(r.a)(this,"state",{grantAccessClicked:!1,showFreeRestrictionDialog:!1,hasAutoOpenedRestrictionDialog:!1}),Object(r.a)(this,"makeHandleOpen",(e,t)=>()=>Ie(Object(a.a)(Object(a.a)({},this.props),{},{actionSubjectId:"restrictionsDialogButton",dialogStateContainer:e,edition:t}))),Object(r.a)(this,"handleGrantAccessActionClicked",()=>{this.setState({grantAccessClicked:!0})}),Object(r.a)(this,"handleFreeEditionPadlockClicked",()=>{this.setState({showFreeRestrictionDialog:!0})}),Object(r.a)(this,"onFreeDialogClosed",()=>{this.setState({showFreeRestrictionDialog:!1})})}hasRestrictions(e){var t,n,a,r,i,s;return Boolean((null==e||null===(t=e.content)||void 0===t||null===(n=t.nodes)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.hasRestrictions)||(null==e||null===(r=e.content)||void 0===r||null===(i=r.nodes)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.hasInheritedRestrictions))}hasInheritedRestrictionsOnly(e){var t,n,a,r,i,s;return Boolean((null==e||null===(t=e.content)||void 0===t||null===(n=t.nodes)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.hasInheritedRestrictions)&&!(null==e||null===(r=e.content)||void 0===r||null===(i=r.nodes)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.hasRestrictions))}getParentData(e){var t,n,a;const r=null==e||null===(t=e.content)||void 0===t||null===(n=t.nodes)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.ancestors;for(let i=r.length-1;i>=0;i--)if(r[i].hasRestrictions)return r[i]}shouldShowGrantAccessDialog({grantAccess:e,displayName:t,accountId:n,username:a}){return Boolean(e&&t&&n||a)}renderFreeEditionDialog(e,t){const{contentId:n}=this.props;return o.a.createElement(c.b,{query:ue,variables:{contentId:n,status:D.a}},({data:a,loading:r,error:i})=>{var s,c,l,d;if(!a&&r||i)return o.a.createElement(x.a,null);const u=this.hasRestrictions(a),p=this.hasInheritedRestrictionsOnly(a),g=((null==a||null===(s=a.content)||void 0===s||null===(c=s.nodes)||void 0===c||null===(l=c[0])||void 0===l||null===(d=l.ancestors)||void 0===d?void 0:d.length)||0)-1>0;if(u){if(g&&p){const e=this.getParentData(a);return o.a.createElement(f,{isOpen:this.state.showFreeRestrictionDialog,onClose:this.onFreeDialogClosed,parentData:e,isChildPage:g,placement:"bottom-end"},o.a.createElement(de,{contentId:n,onClick:this.handleFreeEditionPadlockClicked}))}return t&&!this.state.hasAutoOpenedRestrictionDialog&&(this.makeHandleOpen(e,y.a.FREE)(),this.setState({hasAutoOpenedRestrictionDialog:!0})),o.a.createElement(de,{contentId:n,onClick:this.makeHandleOpen(e,y.a.FREE)})}return o.a.createElement(f,{isOpen:this.state.showFreeRestrictionDialog,onClose:this.onFreeDialogClosed,placement:"bottom-end"},o.a.createElement(de,{contentId:n,onClick:this.handleFreeEditionPadlockClicked}))})}renderGrantAccessDialogAndButton(e,t,n,a){const{contentId:r,markItemAsLoaded:i,headerItemsLoaded:s}=this.props,c=e(),l=o.a.createElement(de,{contentId:r,onClick:this.makeHandleOpen(t,a),markItemAsLoaded:i});return n&&s&&!this.state.grantAccessClicked?o.a.createElement(V,{isOpen:!0,contentId:r,onActionClick:this.handleGrantAccessActionClicked,accessType:"edit"===Object(j.a)(c,"accessType")?"edit":"view",accountId:Object(j.a)(c,"accountId"),displayName:Object(j.a)(c,"displayName"),legacyInfo:{username:Object(j.a)(c,"username")||"",userFullName:Object(j.a)(c,"userFullName")}},l):l}render(){return o.a.createElement(l.c,{to:[pe.a]},e=>o.a.createElement(ge,null,o.a.createElement(A.a,null,({loading:t,error:n,edition:a})=>n?o.a.createElement(O.a,{error:n}):!a||t?o.a.createElement(x.a,null):o.a.createElement(w.a.Consumer,null,({getQueryParams:t})=>{const{displayName:n,accountId:r,grantAccess:i,username:s}=t(),o=this.shouldShowGrantAccessDialog({grantAccess:i,displayName:n,accountId:r,username:s});return"FREE"===a?this.renderFreeEditionDialog(e,o):this.renderGrantAccessDialogAndButton(t,e,o,a)}))))}}function Ee(e){const t=Object(d.a)(),n=Object(se.a)(e.contentId);return o.a.createElement(me,Object(a.a)(Object(a.a)(Object(a.a)({},e),t),{},{contentId:n}))}function Ie({actionSubjectId:e,createAnalyticsEvent:t,dialogStateContainer:n,edition:a,triggeredFrom:r}){const i=Object(T.b)();i.start({name:C.a.RESTRICTIONS_DIALOG,collect(e,t){t.stopOn(e.find(({action:e,name:t})=>"taskFail"===e&&t===C.a.RESTRICTIONS_DIALOG_LOAD)),t.stopOn(e.find(e=>Object(v.b)(e)&&e.name===C.a.RESTRICTIONS_DIALOG_APPLY))}}),i.start({name:C.a.RESTRICTIONS_DIALOG_LOAD,timeout:R.a.DEFAULT}),n.setIsOpen(!0,r),t({type:"sendUIEvent",data:{source:"viewPageScreen",action:"clicked",actionSubject:"button",actionSubjectId:e,attributes:{source:"v2",triggeredFrom:r,edition:a}}}).fire()}},GFFF:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhMiAyIDAgMTAtNCAwdjNIMlY4YTQgNCAwIDExOCAwdjJoNmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem00IDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjREUzNTBCIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},I4DW:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBvcGFjaXR5PSIuNSIgZD0iTTAgMGgyNHYyNEgweiIvPjxwYXRoIGQ9Ik04IDEwVjhhNCA0IDAgMTE4IDB2MmEyIDIgMCAwMTIgMnY2YTIgMiAwIDAxLTIgMkg4YTIgMiAwIDAxLTItMnYtNmMwLTEuMS45LTIgMi0yem0yIDBoNFY4YTIgMiAwIDEwLTQgMHYyem0yIDdhMiAyIDAgMTAwLTQgMiAyIDAgMDAwIDR6IiBmaWxsPSIjREUzNTBCIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L2c+PC9zdmc+"},"M/rd":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("Czhu"),r=n("ERkP"),i=n.n(r),s=n("xBue"),o=n("Ua4J");const c=Object(r.forwardRef)(({children:e,className:t,target:n,testId:c,name:l,href:d=null,to:u=null,params:p={},onClick:g=(()=>{})},m)=>{const{matchSupportedRoute:E,onPageReload:I,preloadRoute:h,toUrl:b}=Object(r.useContext)(o.a),f=e=>{I(e.target.getAttribute("href"),!1),g(e)},y=a=>i.a.createElement("a",{href:a,className:t,onClick:f,target:n,rel:"_blank"===n?"noreferrer":void 0,"data-testid":c,ref:m},e),A=d||u;if(!A&&!l)return y("");const O=A&&{href:A},T=b(l,Object(a.a)(Object(a.a)({},p),O)),C=E(T);if(C){const n=async()=>h(C);return i.a.createElement(s.a,{to:`${C.pathname}${C.search}${C.hash}`,className:t,onClick:g,onMouseDownCapture:n,innerRef:m},e)}return y(T)})},TYX8:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return p}));var a=n("ERkP"),r=n.n(a),i=n("L21V"),s=n("Efxu");const o=[{label:r.a.createElement(i.b,{id:"restrictions.dialog.permission-select.view",defaultMessage:"Can view",description:"User or group will be allowed to view content"}),value:s.d.VIEW},{label:r.a.createElement(i.b,{id:"restrictions.dialog.permission-select.edit",defaultMessage:"Can edit",description:"User or group will be allowed to edit content"}),value:s.d.EDIT}],c=r.a.createElement(i.b,{id:"restrictions.dialog.word.you",defaultMessage:"You",description:"current user label"}),l=["current","draft","archived"],d="confluence.frontend.restrictions-send-group-id",u="confluence.frontend.alphabetized.content.restrictions",p="confluence.frontend.restrictions-dialog-smart-picker"},WA38:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("Czhu"),r=n("HbGN"),i=n("ERkP"),s=n.n(i),o=(n("aWzz"),n("KIs4")),c=n("M/rd"),l=n("frZf");const d=e=>{const{href:t,to:n}=e,i=Object(r.a)(e,["href","to"]),d=n||t;return s.a.createElement(o.a,null,({featureFlags:t})=>{const n=d&&0!==d.indexOf("/")?"/"+d:d,r=t["confluence.frontend.people.directory"]&&!n.startsWith(l.a)?`${l.a}${n}`:n;return s.a.createElement(c.a,Object(a.a)(Object(a.a)({},e),{},{href:r},i))})}},YIqz:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("ERkP"),r=n("z9P0"),i=n("NnKS");const s=(e,t,n)=>{const{createAnalyticsEvent:s}=Object(r.a)(),o=Object(i.a)(e),c=Object(i.a)(t);return Object(a.useCallback)((...e)=>{const t="function"==typeof c.current?c.current(...e):c.current;s(t).fire(n),o.current(...e)},[s,o,c,n])}},ZUFC:function(e,t,n){"use strict";var a=n("Czhu"),r=n("zjfJ"),i=n("ERkP"),s=n.n(i),o=n("L21V"),c=n("lbXe"),l=n("zJ/j"),d=(n("aWzz"),n("wn7R"));const u=e=>{const t=s.a.Children.toArray(e.children);return s.a.createElement(d.a,null,t)};var p=n("+352"),g=n("46jh"),m=n("9ZX9"),E=n("2q8g"),I=n.n(E),h=n("psri"),b=n.n(h),f=n("1U1M"),y=n("z9P0"),A=n("T+Mg"),O=n("oayO"),T=n("SRtI"),C=n("a0gl"),v=n("dIe6"),R=n("t0Ff"),j=n("6n9r"),w=n("mvtW"),D=n("mTU2"),S=n("FdbS");const M=Object(A.a)(({analyticsProps:e,autoFocus:t,onUpFlowOpen:n,targetEdition:r=w.a.STANDARD,flags:c})=>{const[d,u]=Object(i.useState)(!1),{data:g,loading:m,error:E}=Object(f.d)(R.a),h=Object(j.a)(g),{cloudId:A}=Object(C.a)(),{createAnalyticsEvent:M}=Object(y.a)();return m?null:s.a.createElement(s.a.Fragment,null,E?s.a.createElement(v.a,{error:E}):null,s.a.createElement(l.a,{appearance:"primary",autoFocus:t,onClick:async()=>{const t=await(async()=>{const e=await O.a.getItem(T.b.GROWTH_EXPERIMENT_REQUEST_UPGRADE_SENT);if("true"===e){const e=b()(r.toString().toLowerCase());c.showWarningFlag({title:s.a.createElement(o.b,Object(a.a)({},D.a.requestUpgradeAlreadySentWarningTitle)),description:s.a.createElement(o.b,Object(a.a)(Object(a.a)({},D.a.requestUpgradeAlreadySentWarningDescription),{},{values:{edition:e}}))})}else u(!0);return e})(),{actionSubjectId:n,attributes:i,source:l}=e;i&&(i.currentEdition=h,i.targetEdition=r,i.requestUpgradeNotificationSent=t),M({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:n,source:l,attributes:i}}).fire()}},s.a.createElement(o.b,Object(a.a)({},D.a.requestUpgradeButton))),d?s.a.createElement(S.UpFlowComponent,{canChangeEdition:!1,cloudId:A,currentEdition:h,flow:"request-upgrade",product:"confluence",targetEdition:r,touchpointId:e.source,onClose:()=>{I()(n)||u(!1)},onOpen:n,epMessageId:p.o}):null)});var k=n("r89S"),N=n("6HGh"),P=n("TSpG"),L=n("HKB3"),F=n("Uo/y"),x=n("LEcB");const G=Object(o.g)((function({canShowUpgradeButton:e,children:t,intl:n,isSiteAdmin:a,secondaryLink:r}){const{IN_CONTEXT_MODAL:s,END_USER_REQUEST:o}=P.a,{cohort:c}=Object(x.a)(s,L.b,L.a.NOT_ENROLLED),{cohort:l,fireExposureEvent:d}=Object(x.a)(o,L.b,L.a.NOT_ENROLLED),u=Object(F.a)(n&&n.locale),p=c===L.a.EXPERIMENT,g=l===L.a.EXPERIMENT;Object(i.useEffect)(()=>{!a&&p&&u&&d()},[a,p,u,d]);let m=!1,E=!1,I=!0,h=!0;return e&&(a?m=!0:p&&u&&(E=g),(m||E)&&(I=!r,h=!1)),t({showUpgradeTryNowButton:m,showUpgradeRequestButton:E,showLearnMore:I,learnMoreIsPrimaryCTA:h})}));n.d(t,"a",(function(){return _}));class U extends i.Component{constructor(...e){super(...e),Object(r.a)(this,"generateCTAAnalyticsProps",e=>{const{grandfathered:t,isSiteAdmin:n,source:a}=this.props;return{actionSubjectId:e,source:a,attributes:{isGrandfathered:Boolean(t),isSiteAdmin:n}}}),Object(r.a)(this,"triggerLinkClickAnalytics",(e,t)=>{const{createAnalyticsEvent:n}=this.props;if(n){const{actionSubjectId:r,attributes:i,source:s}=this.generateCTAAnalyticsProps(e);n({type:"sendUIEvent",data:{action:"clicked",actionSubject:"link",actionSubjectId:r,source:s,attributes:Object(a.a)(Object(a.a)({},i),{},{linkMessage:t})}}).fire()}}),Object(r.a)(this,"handleSecondaryLinkClick",()=>{const e=this.props.secondaryLink;e&&(this.triggerLinkClickAnalytics(e.actionSubjectId,e.messageDescriptor.defaultMessage),"function"==typeof e.onClick&&e.onClick())})}componentDidMount(){const{createAnalyticsEvent:e}=this.props;if(e){const{attributes:t,source:n}=this.generateCTAAnalyticsProps("");e({type:"sendScreenEvent",data:{name:"changeEditionGatewayScreen",attributes:Object(a.a)(Object(a.a)({},t),{},{source:n})}}).fire()}}renderButtons(){const{autoFocus:e,isSiteAdmin:t,canShowUpgradeButton:n,learnMoreLinkActionSubjectId:r,upgradeEditionActionSubjectId:c,upgradeRequestEditionActionSubjectId:d,secondaryLink:u,onUpFlowOpen:p,targetEdition:g}=this.props;return s.a.createElement(G,{isSiteAdmin:t,canShowUpgradeButton:n,secondaryLink:u},({showUpgradeTryNowButton:t,showUpgradeRequestButton:n,showLearnMore:E,learnMoreIsPrimaryCTA:I})=>s.a.createElement(i.Fragment,null,t?s.a.createElement(m.a,{autoFocus:e,analyticsProps:this.generateCTAAnalyticsProps(c),onUpFlowOpen:p,targetEdition:g}):n&&s.a.createElement(M,{autoFocus:e,analyticsProps:this.generateCTAAnalyticsProps(d),onUpFlowOpen:p,targetEdition:g}),E&&s.a.createElement(k.a,{analyticsProps:this.generateCTAAnalyticsProps(r),appearance:I?"primary":"link",onUpFlowOpen:p,targetEdition:g}),u&&s.a.createElement(l.a,{appearance:"link",href:u.href?u.href:void 0,id:"secondaryLink",spacing:"default",target:"_blank",onClick:this.handleSecondaryLinkClick},s.a.createElement(o.b,Object(a.a)({},u.messageDescriptor)))))}render(){const{appearanceType:e=p.l.DEFAULT,body:t,targetEdition:n,title:a}=this.props;return s.a.createElement(N.a,{appearanceType:e,edition:n,title:a,body:t,actions:s.a.createElement(u,null,this.renderButtons())})}}Object(r.a)(U,"defaultProps",{autoFocus:!0,canShowUpgradeButton:!0,learnMoreLinkActionSubjectId:"freeLearnMore",upgradeEditionActionSubjectId:"freeTryNow",upgradeRequestEditionActionSubjectId:"requestTrial"});const _=Object(g.a)(Object(c.a)()(U))},cEjM:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={SHARE_PAGE:"share-page",PAGE_RESTRICTIONS:"page-restrictions",CONTENT_TOOLS:"content-tools",PAGE_FAVOURITE:"page-favourite",WATCH_PAGE:"watch-page",EDIT_PAGE:"edit-page",PAGE_COMMENTS:"page-comments"}},jLkM:function(e,t,n){var a=n("s+R0");e.exports=function(e){return e&&e.length?a(e):[]}}}]);
//# sourceMappingURL=44.XjvXB12wxq.js.map