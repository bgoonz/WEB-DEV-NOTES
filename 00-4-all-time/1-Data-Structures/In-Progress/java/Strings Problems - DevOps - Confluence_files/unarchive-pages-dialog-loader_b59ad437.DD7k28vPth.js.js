(window.webpackJsonp=window.webpackJsonp||[]).push([["unarchive-pages-dialog-loader~b59ad437"],{JOcB:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("Czhu"),i=a("HbGN"),r=a("zjfJ"),s=a("ERkP"),o=a.n(s),l=a("gQ5V");a("aWzz");class c extends s.Component{constructor(...e){super(...e),Object(r.a)(this,"_queryResults",[]),Object(r.a)(this,"_queryProperties",[]),Object(r.a)(this,"_anyLoading",()=>this._queryResults.some(e=>!0===e.loading)),Object(r.a)(this,"_renderQueryComponent",(e,t,a)=>e.length?o.a.createElement(l.b,Object(n.a)({errorPolicy:"all"},e[a]),n=>{let{data:r,loading:s,error:o}=n,l=Object(i.a)(n,["data","loading","error"]);this._queryResults[a]={data:r,loading:s,error:o},this._queryProperties[a]=l;const c=a+1;return e.length>c?this._renderQueryComponent(e,t,c):t({results:this._queryResults,loading:this._anyLoading(),properties:this._queryProperties})}):t({results:[],loading:!1}))}render(){const{queryProps:e,children:t}=this.props;return this._renderQueryComponent(e,t,0)}}},MAnY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("ERkP")),i=r(a("ZUNO"));function r(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var o=function(e){return n.default.createElement(i.default,s({dangerouslySetGlyph:'<svg width="16" height="16" viewBox="0 0 16 16" focusable="false" role="presentation"><path fill="#2684FF" fill-rule="evenodd" d="M2 0h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm2 3a1 1 0 1 0 0 2h8a1 1 0 0 0 0-2H4zm0 4a1 1 0 1 0 0 2h8a1 1 0 0 0 0-2H4zm0 4a1 1 0 0 0 0 2h4a1 1 0 0 0 0-2H4z"/></svg>'},e,{size:"small"}))};o.displayName="Page16Icon";var l=o;t.default=l},MwrP:function(e,t,a){var n=a("4uJK"),i=a("kkM+"),r=a("bvyN"),s=a("wxYD"),o=a("9y2L"),l=a("3ajY"),c=a("CbIe"),d=a("Qd2C"),p=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||d(e)||r(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var a in e)if(p.call(e,a))return!1;return!0}},Pf68:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=(e,t=0)=>{let a=null,n=[];return(...i)=>(clearTimeout(a),a=setTimeout(()=>{const t=e(...i);n.forEach(e=>e(t)),n=[]},t),new Promise(e=>n.push(e)))}},ZUNO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("D57K"),i=n.__importStar(a("ERkP")),r=n.__importDefault(a("KsTJ")),s=a("3IV/"),o={small:{height:"16px",width:"16px"},medium:{height:"24px",width:"24px"}},l=function(e){return e.size?"height: "+o[e.size].height+"; width: "+o[e.size].width+";":null};t.IconWrapper=r.default.span(c||(c=n.__makeTemplateObject(["\n  "," color: ",";\n  display: inline-block;\n  fill: ",";\n  flex-shrink: 0;\n  line-height: 1;\n\n  > svg {\n    "," max-height: 100%;\n    max-width: 100%;\n    overflow: hidden;\n    pointer-events: none;\n    vertical-align: bottom;\n  }\n  /* Stop-color doesn't properly apply in chrome when the inherited/current color changes.\n   * We have to initially set stop-color to inherit (either via DOM attribute or an initial CSS\n   * rule) and then override it with currentColor for the color changes to be picked up.\n   */\n  stop {\n    stop-color: currentColor;\n  }\n"],["\n  "," color: ",";\n  display: inline-block;\n  fill: ",";\n  flex-shrink: 0;\n  line-height: 1;\n\n  > svg {\n    "," max-height: 100%;\n    max-width: 100%;\n    overflow: hidden;\n    pointer-events: none;\n    vertical-align: bottom;\n  }\n  /* Stop-color doesn't properly apply in chrome when the inherited/current color changes.\n   * We have to initially set stop-color to inherit (either via DOM attribute or an initial CSS\n   * rule) and then override it with currentColor for the color changes to be picked up.\n   */\n  stop {\n    stop-color: currentColor;\n  }\n"])),l,(function(e){return e.primaryColor||"currentColor"}),(function(e){return e.secondaryColor||s.background}),l);var c,d=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(a,e),a.prototype.render=function(){var e=this.props,a=e.dangerouslySetGlyph,n=e.label,r=e.size;return i.default.createElement(t.IconWrapper,{size:r,"aria-label":n||void 0,role:n?"img":"presentation",dangerouslySetInnerHTML:a?{__html:a}:void 0})},a}(i.Component);t.default=d,t.size=Object.keys(o).reduce((function(e,t){var a;return Object.assign(e,((a={})[t]=t,a))}),{})},"ghb/":function(e,t,a){"use strict";a.d(t,"a",(function(){return P})),a.d(t,"c",(function(){return y})),a.d(t,"b",(function(){return w})),a.d(t,"e",(function(){return k})),a.d(t,"d",(function(){return I}));var n=a("Czhu"),i=a("zjfJ"),r=a("MwrP"),s=a.n(r),o=a("nnRT"),l=a.n(o),c=a("ERkP"),d=a.n(c),p=a("L21V"),u=a("KsTJ"),g=a("kYi3"),h=a("MAnY"),b=a.n(h),f=a("liuE"),v=a("3IV/"),m=a("lRcl");const P="no-page-selection",O=Object(p.f)({loadingMessage:{id:"page-selector.pages.loading",defaultMessage:"Loading pages",description:"The text inside the page selector drop down telling user it is searching for pages"},parentPage:{id:"page-selector.parent.page",defaultMessage:"Parent page",description:"The text header of page selector"},selectParentPage:{id:"page-selector.select.parent.page",defaultMessage:"Select a parent page",description:"Place holder message for page selector when there is empty parent page"},searchError:{id:"page-selector.search.error",defaultMessage:"Sorry, we're having trouble loading search results right now.",description:"An error message inside the page selector component when a user searches for a page and we are unable to perform the search"},noPagesFound:{id:"page-selector.no.page.found",defaultMessage:"No pages found",description:"The text inside the page selector telling user that no page is found with the user query input"}}),y=u.default.div`
  display: inline-block;
  flex: 1 0 auto;
  width: 75%;
  padding-bottom: 2px;
  > div {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
`,j=u.default.span`
  display: inline-block;
  vertical-align: middle;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: calc(100% - ${140}px);
  padding-right: 5px;
`,C=u.default.div`
  color: ${v.N200};
  min-width: 0;
  font-size: 12px;
  line-height: 1;
  font-weight: 600;
  margin-bottom: 10px;
  display: inline-block;
`,w=u.default.div`
  align-items: center;
  justify-content: center;
  display: flex;
  flex-direction: row;
  line-height: 1.2;
  padding-top: 2px;
  padding-bottom: 2px;
  padding-left: 6px;
  width: 100%;
`,E=u.default.div`
  display: flex;
  flex: 0 1 auto;
  margin-right: 10px;
`,x=u.default.div`
  position: relative;
`,S=u.default.div`
  display: flex;
`,k=e=>d.a.createElement(E,{"data-test-id":"page-icon"},d.a.createElement(b.a,{label:e}));class I extends c.PureComponent{constructor(...e){super(...e),Object(i.a)(this,"state",{currentPage:s()(this.props.defaultPage)?null:this.props.defaultPage}),Object(i.a)(this,"onSelect",e=>{this.setState({currentPage:e}),this.props.fireAnalyticsEvent({type:"sendUIEvent",data:{source:"pageSelector",actionSubjectId:"pageSelectorDropdown",actionSubject:"pageSelectorDropdownMenuItem",action:"clicked",attributes:{contentId:e?e.id:null,title:e?e.title:""}}}),this.props.onChange(e)}),Object(i.a)(this,"getOption",({children:e,id:t,title:a,context:n})=>d.a.createElement(w,{"data-test-id":"page-selector-option"},t!==P&&"value"!==n?k(a):null,e)),Object(i.a)(this,"getOptionLabel",e=>e.title),Object(i.a)(this,"getOptionValue",e=>e.id),Object(i.a)(this,"optionLabel",({title:e,id:t,descriptor:a},n)=>{const i=this.getOption;return d.a.createElement(i,{id:t,title:e,context:n},d.a.createElement(y,null,"value"===n&&a?d.a.createElement(j,null,e):e,a?d.a.createElement(f.a,{maxWidth:"140px",appearance:"inprogress"},a):null),"value"===n?d.a.createElement(S,null,this.props.isLoading?d.a.createElement(m.a,{size:12,testId:"pageselector-loading"}):null):null)}),Object(i.a)(this,"formatOptionLabel",(e,{context:t})=>this.optionLabel(e,t)),Object(i.a)(this,"noOptionsMessage",()=>this.props.intl.formatMessage(this.props.error?O.searchError:O.noPagesFound)),Object(i.a)(this,"loadingMessage",()=>this.props.intl.formatMessage(O.loadingMessage)),Object(i.a)(this,"getHeader",()=>this.props.intl.formatMessage(O.parentPage)),Object(i.a)(this,"getPlaceHolder",()=>this.props.intl.formatMessage(O.selectParentPage)),Object(i.a)(this,"getStyles",()=>({container:e=>Object(n.a)(Object(n.a)({},e),{},{width:"100%"}),dropdownIndicator:e=>Object(n.a)(Object(n.a)({},e),{},{paddingLeft:0}),menu:e=>Object(n.a)(Object(n.a)({},e),{},{width:"100%"}),input:e=>Object(n.a)(Object(n.a)({},e),{},{width:"100%",marginLeft:0,paddingLeft:"5px"}),option:(e,{isFocused:t})=>{const a=t?v.N900:null;let i;return t&&(i=v.N30),Object(n.a)(Object(n.a)({},e),{},{width:"100%",backgroundColor:i,color:a})},valueContainer:e=>Object(n.a)(Object(n.a)({},e),{},{width:"100%",display:"flex",padding:"2px 8px 2px 0px"}),singleValue:e=>Object(n.a)(Object(n.a)({},e),{},{width:"100%",display:"flex",padding:"2px 8px 2px 0px"})}))}static getDerivedStateFromProps(e,t){return e.isLoading||t.currentPage.id===P&&l()(t.currentPage,e.defaultPage)?Object(n.a)({},t):Object(n.a)(Object(n.a)({},t),{},{currentPage:e.defaultPage})}componentDidUpdate(){const{currentPage:e}=this.state;!e||this.props.isLoading||e.id===P&&l()(e,this.props.defaultPage)||this.onSelect(e)}render(){const{currentPage:e}=this.state;return d.a.createElement(c.Fragment,null,d.a.createElement(x,null,d.a.createElement(C,null,this.getHeader())),d.a.createElement(g.a,{isDisabled:this.props.isDisabled||this.props.isLoading,placeholder:this.getPlaceHolder(),onChange:this.onSelect,onInputChange:this.props.onInputChange,value:e,noOptionsMessage:this.noOptionsMessage,loadingMessage:this.loadingMessage,formatOptionLabel:this.formatOptionLabel,getOptionLabel:this.getOptionLabel,getOptionValue:this.getOptionValue,loadOptions:this.props.loadOptions,defaultOptions:this.props.defaultOptions,filterOption:this.props.filterOption,styles:this.getStyles(),isMulti:!1,classNamePrefix:"page-selector",id:"page-selector"}))}}Object(i.a)(I,"defaultProps",{defaultPage:{},onChange:()=>{}})},hY5g:function(e,t,a){"use strict";var n=a("Czhu"),i=a("zjfJ"),r=a("ERkP"),s=a.n(r),o=a("RNvQ"),l=a.n(o),c=a("L21V"),d=a("lbXe"),p=a("JOcB"),u=a("Pf68"),g=a("dIe6"),h=a("ghb/"),b=a("H5qd"),f=a.n(b);const v=f.a`query PageSelectorQuery($cql:String!$first:Int=15){search(cql:$cql first:$first){count nodes{content{id title operations{operation targetType}container{id key operations{operation targetType}icon{path width height isDefault}}}}}}`,m=f.a`query PageSelectorDefaultPageQuery($defaultPageId:ID!){defaultPage:content(id:$defaultPageId){nodes{id title operations{operation targetType}container{id key operations{operation targetType}icon{path width height isDefault}}}}}`,P=f.a`query PageSelectorAllPagesInSpaceQuery($spaceKey:String!$first:Int=15){allPages:content(spaceKey:$spaceKey orderby:"history.by.when desc" first:$first status:["current"]){nodes{id title operations{operation targetType}container{id key operations{operation targetType}icon{path width height isDefault}}}}}`;var O,y;a.d(t,"a",(function(){return C})),a.d(t,"b",(function(){return w}));const j=Object(c.f)({recentPages:{id:"page-selector.recent.pages",defaultMessage:"Recent Pages",description:"The title header inside Page Selector indicating the pages below are recent page modified by user"},allPagesInSpace:{id:"page-selector.all.pages.in.space",defaultMessage:"All pages in this space",description:"The title header inside Page Selector when user search for pages inside spaces"},noParentPage:{id:"page-selector.no-parent-page-selection",defaultMessage:"No parent",description:"The option to select no parent page"}}),C={fetchPolicy:"no-cache",errorPolicy:"all",context:{single:!0}},w=Object(c.g)(Object(d.a)()((y=O=class extends r.PureComponent{constructor(...e){super(...e),Object(i.a)(this,"state",{pageQuery:"",selectedPage:null,error:void 0}),Object(i.a)(this,"_handleFilterChange",e=>{const{spaceKey:t}=this.props;this.fireAnalyticsEvent({type:"sendUIEvent",data:{source:"pageSelector",actionSubjectId:"pageSelectorDropdown",actionSubject:"pageSelectorDropdownSearch",action:"search",attributes:{query:e,spaceKey:t}}}),this.setState({pageQuery:e,error:void 0})}),Object(i.a)(this,"handleFilterChange",l()(this._handleFilterChange,250)),Object(i.a)(this,"getPageSearchCql",e=>{const{keyword:t,spaceKey:a}=e;let n="type = 'page'";return t&&(n+=` AND title ~ '${t.replace(/\'/g,"%27")}*'`),n+=` AND space.key = '${a}'\n                 order by lastModified desc`,n}),Object(i.a)(this,"fireAnalyticsEvent",e=>{this.props.createAnalyticsEvent(e).fire()}),Object(i.a)(this,"processSearchData",(e={})=>{var t;return this.processContent(((null!=(t=e)&&null!=(t=t.search)?t.nodes:t)||[]).map(e=>{var t;return(null!=(t=e)?t.content:t)||{}}))}),Object(i.a)(this,"processPageData",(e={})=>{var t;return this.processContent((null!=(t=e)?t.nodes:t)||[])}),Object(i.a)(this,"processContent",(e={})=>e.map(e=>{var t,a,n,i;return{id:e.id,title:e.title,spaceKey:null!=(i=e)&&null!=(i=i.container)?i.key:i,spaceIcon:null!=(n=e)&&null!=(n=n.container)&&null!=(n=n.icon)?n.path:n,spaceOperations:null!=(a=e)&&null!=(a=a.container)?a.operations:a,pageOperations:null!=(t=e)?t.operations:t,descriptor:this.props.defaultPageOptionDescriptor&&e.id===this.props.defaultPageId?this.props.intl.formatMessage(this.props.defaultPageOptionDescriptor):void 0}})),Object(i.a)(this,"loadOptions",(e,t,a,n)=>e({cql:this.getPageSearchCql({keyword:n,spaceKey:a})}).then(e=>{const{data:a,error:i}=e;if(i)return[{label:this.props.intl.formatMessage(j.recentPages),options:[]}];const r=this.processSearchData(a);return[{label:this.props.intl.formatMessage(j.allPagesInSpace),options:n&&n.length>0?r:t}]}).catch(e=>{this.setState({error:e})})),Object(i.a)(this,"getQueryProps",(e,t)=>{const a=[Object(n.a)(Object(n.a)({},C),{},{query:v,variables:{cql:this.getPageSearchCql({keyword:this.state.pageQuery,spaceKey:e,first:15})}}),{query:P,variables:{spaceKey:e,limit:15},errorPolicy:"all",fetchPolicy:"cache-first",context:{single:!0}}];return t&&a.push({query:m,variables:{defaultPageId:t},errorPolicy:"all",fetchPolicy:"cache-first",context:{single:!0}}),a}),Object(i.a)(this,"onChange",e=>{this.setState({selectedPage:e}),this.props.onChange(e)}),Object(i.a)(this,"noPageSelectionOption",{title:this.props.intl.formatMessage(j.noParentPage),id:h.a,spaceIcon:"/images/logo/default-space-logo-256.png"})}render(){const{pageQuery:e}=this.state,{spaceKey:t,defaultPageId:a}=this.props;return s.a.createElement(p.a,{queryProps:this.getQueryProps(t,a)},({results:a,properties:n})=>{var i,r,o;const[l,c,d]=a,[p]=n,b=this.processSearchData(null!=(o=l)?o.data:o),f=this.processPageData(null!=(r=c)&&null!=(r=r.data)?r.allPages:r),v=this.processPageData(null!=(i=d)&&null!=(i=i.data)?i.defaultPage:i);let m=this.noPageSelectionOption;this.state.selectedPage?m=this.state.selectedPage:v.length&&(m=v[0]);const P=[{label:"",options:[this.noPageSelectionOption],dataTestID:"no-page-selection"},{label:this.props.intl.formatMessage(j.recentPages),options:e&&e.length>0?b:f,dataTestID:"recent-pages"}],{refetch:O}=p,{loading:y}=c;return s.a.createElement(s.a.Fragment,null,this.state.error?s.a.createElement(g.a,{error:this.state.error}):null,s.a.createElement(h.d,{intl:this.props.intl,fireAnalyticsEvent:this.fireAnalyticsEvent,onInputChange:this.handleFilterChange,isLoading:y||this.props.showLoading,isDisabled:this.props.isDisabled,onChange:this.onChange,defaultOptions:P,defaultPage:m,loadOptions:Object(u.a)(e=>this.loadOptions(O,f,t,e),500),filterOption:this.props.filterOption,error:this.state.error}))})}},Object(i.a)(O,"defaultProps",{onChange:()=>{}}),y)))},liuE:function(e,t,a){"use strict";var n=a("ERkP"),i=a.n(n),r=a("Czhu"),s=a("3IV/"),o=a("8pvK");const l={default:{light:s.N40,dark:s.N40},inprogress:{light:s.B50,dark:s.B50},moved:{light:s.Y75,dark:s.Y75},new:{light:s.P50,dark:s.P50},removed:{light:s.R50,dark:s.R50},success:{light:s.G50,dark:s.G50}},c={default:{light:s.N500,dark:s.N500},inprogress:{light:s.B500,dark:s.B500},moved:{light:s.N800,dark:s.N800},new:{light:s.P500,dark:s.P500},removed:{light:s.R500,dark:s.R500},success:{light:s.G500,dark:s.G500}},d={default:{light:s.N500,dark:s.N500},inprogress:{light:s.B400,dark:s.B400},moved:{light:s.Y500,dark:s.Y500},new:{light:s.P400,dark:s.P400},removed:{light:s.R400,dark:s.R400},success:{light:s.G400,dark:s.G400}},p={default:{light:s.N0,dark:s.N0},inprogress:{light:s.N0,dark:s.N0},moved:{light:s.N800,dark:s.N800},new:{light:s.N0,dark:s.N0},removed:{light:s.N0,dark:s.N0},success:{light:s.N0,dark:s.N0}},u=Object(o.a)(({appearance:e,isBold:t,maxWidth:a})=>Object(r.a)(Object(r.a)({},"object"==typeof e?Object(r.a)({backgroundColor:(t?d:l).default.light,textColor:(t?p:c).default.light},e):{backgroundColor:(t?d[e]:l[e]).light,textColor:(t?p[e]:c[e]).light}),{},{maxWidth:a}));var g=a("l1C2"),h=a("BMbf");const b=Object(h.c)()+"px";var f=({backgroundColor:e,textColor:t,children:a,testId:n})=>Object(g.f)("span",{css:{backgroundColor:e,borderRadius:b,boxSizing:"border-box",color:t,display:"inline-block",fontSize:"11px",fontWeight:700,lineHeight:1,maxWidth:"100%",padding:"2px 0 3px 0",textTransform:"uppercase",verticalAlign:"baseline"},"data-testid":n},a);const v=Object(h.h)()/2+"px";var m=({maxWidth:e,children:t})=>Object(g.f)("span",{css:{display:"inline-block",verticalAlign:"top",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",boxSizing:"border-box",padding:"0 "+v,maxWidth:"number"==typeof e?e+"px":e,width:"100%"}},t);a.d(t,"a",(function(){return P}));class P extends n.PureComponent{render(){const{theme:e,children:t,testId:a}=this.props;return i.a.createElement(u.Provider,{value:e},i.a.createElement(u.Consumer,Object.assign({},this.props),e=>i.a.createElement(f,Object.assign({testId:a},e),i.a.createElement(m,Object.assign({},e),t))))}}P.defaultProps={isBold:!1,appearance:"default",maxWidth:200}},mvtW:function(e,t,a){"use strict";let n;a.d(t,"a",(function(){return n})),function(e){e.FREE="FREE",e.PREMIUM="PREMIUM",e.STANDARD="STANDARD"}(n||(n={}))},rHua:function(e,t,a){"use strict";a.r(t);var n=a("Czhu"),i=a("1U1M"),r=a("ERkP"),s=a.n(r),o=a("L21V"),l=a("KsTJ"),c=a("z9P0"),d=a("wn7R"),p=a("zJ/j"),u=a("MAnY"),g=a.n(u),h=a("cJDk"),b=a("MqVv"),f=a("W71K"),v=a("mvtW"),m=a("dIe6"),P=a("6z9Z"),O=a("3VMZ"),y=a("6esG"),j=a("ewfN"),C=a("hY5g"),w=a("ghb/"),E=a("+6Tk"),x=a("UsKe"),S=a("GwSB"),k=a("5w42"),I=a("W90J"),D=a("H5qd"),M=a.n(D);const N=M.a`fragment ContentSpaceFragment on Content{space{key homepage{id}id}}`,T=M.a`query UnarchivePageSelectorQuery($contentId:ID!){singleContent(id:$contentId){id archivedContentMetadata{restoreParent{id status title}}ancestors{id status title}...ContentSpaceFragment}}${N}`,R=M.a`query UnarchivePagesDialogQuery($contentId:ID!){singleContent(id:$contentId){id ...ContentSpaceFragment hasVisibleChildPages visibleDescendantsCount}}${N}`,A=M.a`mutation UnarchivePagesMutation($pageIDs:[Long!]!$includeChildren:[Boolean!]!$parentPageId:Long){bulkUnarchivePages(pageIDs:$pageIDs includeChildren:$includeChildren parentPageId:$parentPageId){taskId status}}`,_=M.a`query UnarchiveSinglePageWithChildrenSequentialDialogsQuery($contentId:ID!$allowNestedPages:Boolean!){singleContent(id:$contentId)@include(if:$allowNestedPages){id archivableDescendantsCount visibleDescendantsCount}}`;var q=a("MQCK"),L=a("Zr8h"),$=a("3wug");a.d(t,"i18n",(function(){return W})),a.d(t,"UnarchivePagesLoader",(function(){return U}));const z=l.default.div`
  position: relative;
  z-index: 999;
`,W=Object(o.f)({unarchivePageWithChildrenDialogCancelButtonText:{id:"archive-pages.page-nested.unarchive.dialog.button.cancel",defaultMessage:"Cancel",description:"Button allowing users to cancel attempted archive action after warning them that the current page has child (nested) pages"},unarchivePageWithChildrenDialogConfirmButtonText:{id:"archive-pages.page-nested.unarchive.dialog.button.continue",defaultMessage:"Continue",description:"Primary CTA in the modal dialog warning users that the current page has nested children, and confirming that they want to continue with the archive action"},unarchivePageWithChildrenDialogTitle:{id:"archive-pages.page-nested.unarchive.dialog.title",defaultMessage:"This page has nested pages",description:"The title of the modal dialog that opens when user attempts to unarchive a page that has child (nested) pages"},unarchiveNestedPagesDialogTitle:{id:"archive-pages.page-nested.allow.unarchive.dialog.title",defaultMessage:"{count, plural, one {Nested page} other {Nested pages}}",description:"The title of the modal dialog that opens when user attempts to unarchive a page that has child (nested) pages and allowed to unarchive nested pages"},unarchiveNestedPagesNoPermissionDialogTitle:{id:"archive-pages.page-nested.no-permission.unarchive.dialog.title",defaultMessage:"{count, plural, one {Restore without nested page} other {Restore without nested pages}}",description:"The title of the modal dialog that opens when user attempts to unarchive a page that has child (nested) pages but doesn't have permission"},unarchiveLastParentPageOptionDescriptor:{id:"archive-pages.single-page.unarchive.last-parent-page",defaultMessage:"most recent parent",description:"Explanatory text following a single option in the parent page selector, indicating that this option is the previous parent of the page that is about to be unarchived"},unarchiveNestedPagesParentSelectorDialogDescription:{id:"archive-pages.page-nested.parent-selector.archive.dialog.description",defaultMessage:'{count, plural, =0 {"{title}"} one {"{title}" (including one nested page)} other {"{title}" (including # nested pages)}}',description:"The body of the Archive Nested Page parent selector modal dialog. User will choose a parent page to unarchive pages."}}),F=({handleSelect:e,contentId:t})=>{var a,n,r,o;const{data:l,loading:c,error:d}=Object(i.d)(T,{variables:{contentId:t}});if(d)return s.a.createElement(m.a,{error:d});const p=null!=(o=l)&&null!=(o=o.singleContent)&&null!=(o=o.space)&&null!=(o=o.homepage)?o.id:o;let u=null!=(r=l)&&null!=(r=r.singleContent)&&null!=(r=r.archivedContentMetadata)?r.restoreParent:r;const g=null!=(n=l)&&null!=(n=n.singleContent)?n.ancestors:n;u=u||(g&&g.length?g[g.length-1]:null);const h=u&&"current"===u.status&&u.id!==p?u.id:"",b=null!=(a=l)&&null!=(a=a.singleContent)&&null!=(a=a.space)?a.key:a;return s.a.createElement(z,null,s.a.createElement(C.b,{showLoading:c,onChange:({id:t})=>e(t),defaultPageId:h,defaultPageOptionDescriptor:W.unarchiveLastParentPageOptionDescriptor,spaceKey:b,filterOption:({value:e})=>e!==t&&e!==p}))},K=l.default.div`
  display: flex;
  align-items: center;
  margin-bottom: 20px;
`;function B(e){const{spaceKey:t,contentId:a,includeChildren:i=!1,hasArchivableChildPages:o=!1,allowNestedPages:l=!1}=e,[d,p]=Object(r.useState)(null),{createAnalyticsEvent:u}=Object(c.a)(),h=Object(r.useRef)(""),b=Object(r.useCallback)(()=>({parentPageId:d,includeChildren:i}),[d,i]),v=Object(r.useCallback)(e=>{if(h.current!==e){const t=e===w.a?null:e;Object(x.c)({createAnalyticsEvent:u,actionSubject:"restorePageDestinationDropdown",actionSubjectId:t,source:"restorePagesDestinationDialog"}),h.current=e,p(t)}},[u]),m=l&&o&&i;return s.a.createElement(S.a,Object(n.a)(Object(n.a)({},e),{},{isArchive:!1,successLinkHref:j.VIEW_PAGE.toUrl({spaceKey:t,contentId:a}),getAdditionalMutationVariables:b,allowNestedPages:m,includeNestedPages:i}),s.a.createElement(f.a,{name:"restorePagesDestinationDialog",id:""}),s.a.createElement(K,null,m?null:s.a.createElement(s.a.Fragment,null,s.a.createElement(g.a,{label:""})," "),s.a.createElement($.a,{contentId:a,allowNestedPages:m,i18nMessage:m?W.unarchiveNestedPagesParentSelectorDialogDescription:null,shouldTruncate:!0,useArchivableCount:!0})),s.a.createElement(F,{handleSelect:v,contentId:a}))}const Q=e=>{var t;const{contentId:a,isArchive:l,allowNestedPages:u=!1,analyticsSource:g}=e,{loading:f,error:v,data:y}=Object(i.d)(_,{variables:{contentId:a,allowNestedPages:u}}),j=parseInt(Object(E.c)(I.d)),C=0!==j,w=(null==y||null===(t=y.singleContent)||void 0===t?void 0:t.visibleDescendantsCount)||0,k=C&&w+1>j,[D,M]=Object(r.useState)(!0),[N,T]=Object(r.useState)(!1),[R,A]=Object(r.useState)(null),{createAnalyticsEvent:L}=Object(c.a)(),$=Object(r.useContext)(P.a),z=Object(r.useCallback)((e,t,a)=>{Object(x.c)(Object(n.a)({createAnalyticsEvent:L,actionSubject:"button",actionSubjectId:`${Object(x.d)(t)}NestedPage${e}Button`,source:"restoreNestedPagesConfirmationDialog"},a&&{attributes:a}))},[L]),F=Object(r.useCallback)(()=>{z("Cancel",l),M(!1),$.abort({name:O.a.RESTORE_PAGES,reason:"page selector dialog closed"})},[z,l,$]),K=Object(r.useCallback)(()=>{z("Continue",l,{includeNestedPages:Boolean(R)}),T(!0)},[z,R,l]),Q=Object(r.useMemo)(()=>{var e,t;if(!u)return W.unarchivePageWithChildrenDialogTitle;const a=null!=(t=y)&&null!=(t=t.singleContent)?t.archivableDescendantsCount:t,i=null!=(e=y)&&null!=(e=e.singleContent)?e.visibleDescendantsCount:e;return 0===a?Object(n.a)(Object(n.a)({},W.unarchiveNestedPagesNoPermissionDialogTitle),{},{values:{count:i}}):Object(n.a)(Object(n.a)({},W.unarchiveNestedPagesDialogTitle),{},{values:{count:a}})},[y,u]),U=Object(r.useCallback)(e=>()=>s.a.createElement(h.d,null,s.a.createElement(S.b,null,s.a.createElement(d.a,null,s.a.createElement(p.a,{testId:"button-cancel",onClick:F,appearance:"subtle"},s.a.createElement(o.b,Object(n.a)({},W.unarchivePageWithChildrenDialogCancelButtonText))),s.a.createElement(p.a,{testId:"button-archive-primary",onClick:K,appearance:k||!e?"warning":"primary"},s.a.createElement(o.b,Object(n.a)({},W.unarchivePageWithChildrenDialogConfirmButtonText)))))),[F,K,k]);return N?s.a.createElement(B,Object(n.a)(Object(n.a)({},e),{},{includeChildren:Boolean(R)})):D?s.a.createElement(s.a.Fragment,null,s.a.createElement(b.a,{shouldCloseOnEscapePress:!0,shouldCloseOnOverlayClick:!0,onClose:F,heading:f&&u?"":s.a.createElement(o.b,Object(n.a)({},Q)),components:{Footer:U(u)},autoFocus:!1,width:k?"600px":"520px",height:k?"280px":void 0,appearance:u?void 0:"warning"},s.a.createElement(q.a,{allowNestedPages:u,analyticsSource:g,includeNestedPages:R,setIncludeNestedPages:A,isArchive:l,contentId:a})),v?s.a.createElement(m.a,{error:v}):null):null},U=({contentId:e,onPageRestore:t,source:a})=>{var o,l;const{data:c,error:d}=Object(i.d)(R,{variables:{contentId:e},fetchPolicy:"network-only"}),[p,u]=Object(r.useState)(void 0);Object(r.useEffect)(()=>{var e;c&&void 0===p&&u((null!=(e=c)&&null!=(e=e.singleContent)?e.hasVisibleChildPages:e)||!1)},[c,p]);const g=((null==c||null===(l=c.singleContent)||void 0===l?void 0:l.visibleDescendantsCount)||0)+1,h=Object(r.useCallback)(t=>s.a.createElement(L.a,{targetEditions:[v.a.PREMIUM],featureFlag:I.b},({isFeatureEnabled:i})=>p?s.a.createElement(Q,Object(n.a)(Object(n.a)({},t),{},{source:a,hasArchivableChildPages:p,allowNestedPages:i,contentId:e})):s.a.createElement(B,Object(n.a)(Object(n.a)({},t),{},{source:a,allowNestedPages:!1,contentId:e}))),[a,p,e]);return d?s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{name:O.a.RESTORE_PAGES,error:d}),s.a.createElement(m.a,{error:d})):c?s.a.createElement(k.a,{contentId:e,analyticsSource:"restoreNestedPagesConfirmationDialog",isArchive:!1,mutation:A,onSuccess:t,source:a,spaceKey:null!=(o=c)&&null!=(o=o.singleContent)&&null!=(o=o.space)?o.key:o,TriggerComponent:h,pageCount:g}):null}}}]);
//# sourceMappingURL=unarchive-pages-dialog-loader~b59ad437.DD7k28vPth.js.map