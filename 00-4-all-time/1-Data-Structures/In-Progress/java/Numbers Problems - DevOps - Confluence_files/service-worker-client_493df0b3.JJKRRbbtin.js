(window.webpackJsonp=window.webpackJsonp||[]).push([["service-worker-client~493df0b3"],{QPsM:function(e,t,r){"use strict";r.r(t);var i=r("KIs4"),a=r("daKX");r("kC4U"),r("94Z3");var n=r("au0e");var o=r("lPPs"),s=r.n(o),c=r("frZf"),d=r("Czhu");const g=e=>{const{workerFlags:t={},monitoringClient:r}=e;if(!window.navigator||!window.navigator.serviceWorker)return;const i=Object(a.a)(e.name);!function({logger:e,monitoringClient:t}){navigator.serviceWorker.addEventListener("message",r=>{r.data&&"submitError"===r.data.type&&(e.log`submitError received`,t.submitError(r.data.error,{attribution:"service-worker"}))})}({logger:i,monitoringClient:r}),function(e){let t=!1;navigator.serviceWorker.addEventListener("message",r=>{r.data&&"reloadWindow"===r.data.type&&!t&&(t=!0,e.log`Page refresh scheduled`,window.location.reload())})}(i),function(e){navigator.serviceWorker.addEventListener("message",t=>{t.data&&"apdex-attributes"===t.data.type&&(e.log`Additional APDEX attributes received: ${t.data.attributes}`,window.APDEX_ATTRIBUTES_FROM_SW=Object(d.a)(Object(d.a)({},window.APDEX_ATTRIBUTES_FROM_SW||{}),t.data.attributes))})}(i),function(e=(()=>!0)){navigator.serviceWorker.getRegistrations().then(t=>{for(const r of t)e(r.scope)&&r.unregister()}).catch(e=>{i.log`Unable to unregister service worker`,Object(n.c)({type:"submitError",error:e})})}(e=>!e.endsWith(c.a)),s.a.register({scope:c.a}).then(e=>{i.log`Registered`,e.addEventListener("updatefound",()=>{(function(e){return new Promise(t=>{const r=a=>{a<=0?i.log`Activation timed out. Give up.`:setTimeout(()=>{if(i.log`Waiting for activation`,e.active)return t();r(--a)},50)};r(20)})})(e).then(()=>{Object(n.f)(t)})}),Object(n.f)(t),Object(n.c)({type:"clientReady"})}).catch(e=>{i.log`Registration failed: ${e}`})};r("zjfJ");var u=r("BX6b");r.d(t,"register",(function(){return l}));const l=()=>{Object(i.b)().catch(()=>({featureFlags:{}})).then(({featureFlags:e})=>{g({name:"SW Client(classic)",monitoringClient:Object(u.c)(),workerFlags:{disableViewPage:e["confluence.frontend.sw.disable.view-page"]}})})}},lPPs:function(e,t){var r="/wiki/frontend-service-worker-cache.js";Object.defineProperty(t,"__esModule",{value:!0}),t.default={register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!!navigator.serviceWorker&&navigator.serviceWorker.register(r,e)}},e.exports=t.default}}]);
//# sourceMappingURL=service-worker-client~493df0b3.JJKRRbbtin.js.map