<form action="https://codepen.io/pen/define" method="POST">
  <input type="hidden" name="data" />
</form>

<script>
  const pen = window.location.search.replace("?pen=", "");

  if (pen) {
    const metadataUrl = decodeURIComponent(pen);

    const xhr = new XMLHttpRequest();
    xhr.open("GET", metadataUrl);

    xhr.onload = () => {
      if (xhr.status == 200) {
        const response = xhr.response.replace(/"/g, "&quot;");

        document
          .querySelector("input[type='hidden']")
          .setAttribute("value", response);

        document.querySelector("form").submit();
      }
    };

    xhr.send();
  }
</script>
