(window.webpackJsonp=window.webpackJsonp||[]).push([["confluence-connect-support~dc51bad7"],{"/ZST":function(t,e,n){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},"/bap":function(t,e){t.exports=function(t,e,n,r,o){var i={};return Object.keys(r).forEach((function(t){i[t]=r[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null),i}},"01Zg":function(t,e,n){"use strict";(function(e){var r=n("/ZST"),o=n("YCV4"),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,u=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function s(t){return(t||"").toString().replace(u,"")}var c=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function p(t){var n,r=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},o={},a=typeof(t=t||r);if("blob:"===t.protocol)o=new h(unescape(t.pathname),{});else if("string"===a)for(n in o=new h(t,{}),l)delete o[n];else if("object"===a){for(n in t)n in l||(o[n]=t[n]);void 0===o.slashes&&(o.slashes=i.test(t.href))}return o}function f(t){t=s(t);var e=a.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function h(t,e,n){if(t=s(t),!(this instanceof h))return new h(t,e,n);var i,a,u,l,y,d,v=c.slice(),m=typeof e,g=this,b=0;for("object"!==m&&"string"!==m&&(n=e,e=null),n&&"function"!=typeof n&&(n=o.parse),e=p(e),i=!(a=f(t||"")).protocol&&!a.slashes,g.slashes=a.slashes||i&&e.slashes,g.protocol=a.protocol||e.protocol||"",t=a.rest,a.slashes||(v[3]=[/(.*)/,"pathname"]);b<v.length;b++)"function"!=typeof(l=v[b])?(u=l[0],d=l[1],u!=u?g[d]=t:"string"==typeof u?~(y=t.indexOf(u))&&("number"==typeof l[2]?(g[d]=t.slice(0,y),t=t.slice(y+l[2])):(g[d]=t.slice(y),t=t.slice(0,y))):(y=u.exec(t))&&(g[d]=y[1],t=t.slice(0,y.index)),g[d]=g[d]||i&&l[3]&&e[d]||"",l[4]&&(g[d]=g[d].toLowerCase())):t=l(t);n&&(g.query=n(g.query)),i&&e.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==e.pathname)&&(g.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=n.length,o=n[r-1],i=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(i=!0),n.splice(r,1),a--);return i&&n.unshift(""),"."!==o&&".."!==o||n.push(""),n.join("/")}(g.pathname,e.pathname)),r(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(l=g.auth.split(":"),g.username=l[0]||"",g.password=l[1]||""),g.origin=g.protocol&&g.host&&"file:"!==g.protocol?g.protocol+"//"+g.host:"null",g.href=g.toString()}h.prototype={set:function(t,e,n){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||o.parse)(e)),i[t]=e;break;case"port":i[t]=e,r(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,/:\d+$/.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(e){var a="pathname"===t?"/":"#";i[t]=e.charAt(0)!==a?a+e:e}else i[t]=e;break;default:i[t]=e}for(var u=0;u<c.length;u++){var s=c[u];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=o.stringify);var e,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var i=r+(n.slashes?"//":"");return n.username&&(i+=n.username,n.password&&(i+=":"+n.password),i+="@"),i+=n.host+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(i+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(i+=n.hash),i}},h.extractProtocol=f,h.location=p,h.trimLeft=s,h.qs=o,t.exports=h}).call(this,n("fRV1"))},LdEA:function(t,e){t.exports=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}},Ua7V:function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}},Ugv5:function(t,e,n){"use strict";n.r(e);var r=n("ERkP"),o=n.n(r),i=n("uDfI"),a=n("bQlP"),u=n("kR5U"),s=n("zjfJ"),c=(n("aWzz"),n("lZoD")),l=n("Jygk"),p=n.n(l),f=n("rTQP"),h=n("r9hL"),y=n("Sl8s"),d=n("qhEF"),v=n("KIs4"),m=n("fuv9"),g=n("kC4U");class b extends r.Component{componentDidMount(){const t={fetchStargate:(t,e)=>{const n=`/gateway/api/ex/confluence/${this.props.cloudId}/analytics${t}`;return Object(g.a)(n,e).then(t=>t.json().then(e=>({json:e,status:t.status,statusText:t.statusText,ok:t.ok})))},getIconData:t=>Object(g.a)(t,{credentials:"same-origin"}).then(t=>t.blob().then(t=>new Promise((e,n)=>{const r=new p.a.FileReader;r.onload=()=>e(r.result),r.onerror=n,r.readAsDataURL(t)})))};t.fetchStargate.returnsPromise=!0,t.getIconData.returnsPromise=!0,t.addonKey="com.addonengine.analytics",this.props.connectHost.defineModule("analytics",t)}render(){return null}}Object(s.a)(b,"displayName","CcAnalyticsModule");var w=n("VtSi"),k=n.n(w),O=n("cbiG"),_=n.n(O),P=n("VrFO"),j=n.n(P),E=n("Y9Ll"),x=n.n(E),A=n("KEM+"),I=n.n(A),S=n("/bap"),U=n.n(S),R={context:!1,accessToken:!1,enabled:!1},D=n("m3Bd"),C=n.n(D);n("wVWY");function F(t){return!(!t||"function"!=typeof t.equals||"function"!=typeof t.hashCode)}function T(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){var n=t.valueOf(),r=e.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}return!(!F(t)||!t.equals(e))}function M(t){if("number"==typeof t)return t&t;if("function"==typeof t.valueOf){var e=t.valueOf();if(e!==t)return M(e)}return F(t)?t.hashCode():function(t){var e=0;if(null==t||0===t.length)return e;for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);e=(e<<5)-e+r,e&=e}return e}(String(t))}var L=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},B=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),q=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},N=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},H=(function(t){function e(t){L(this,e);var n="",r=!0,o=!1,i=void 0;try{for(var a,u=t.slice(0,2)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;n+=", "+(s instanceof Error?s.name+"("+s.message+")":""+s)}}catch(p){o=!0,i=p}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}n=n.slice(2),t.length>2&&(n+=", ...");var c=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));c.name="CompositeError",c.errorsRef=t;var l=c;return l.constructor=e,l.__proto__=e.prototype,c}q(e,t),B(e,[{key:"errors",value:function(){return this.errorsRef.slice()}}])}(Error),function(t){function e(t){L(this,e);var n=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.name="DummyError";var r=n;return r.constructor=e,r.__proto__=e.prototype,n}q(e,t)}(Error),function(t){function e(t){L(this,e);var n=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.name="NoSuchElementError";var r=n;return r.constructor=e,r.__proto__=e.prototype,n}return q(e,t),e}(Error));(function(t){function e(t){L(this,e);var n=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.name="IllegalInheritanceError";var r=n;return r.constructor=e,r.__proto__=e.prototype,n}q(e,t)})(Error),function(t){function e(t){L(this,e);var n=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.name="IllegalStateError";var r=n;return r.constructor=e,r.__proto__=e.prototype,n}q(e,t)}(Error),function(t){function e(t){L(this,e);var n=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.name="IllegalArgumentError";var r=n;return r.constructor=e,r.__proto__=e.prototype,n}q(e,t)}(Error),function(t){function e(t){L(this,e);var n=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.name="NotImplementedError";var r=n;return r.constructor=e,r.__proto__=e.prototype,n}q(e,t)}(Error),function(t){function e(t){L(this,e);var n=N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.name="TimeoutError";var r=n;return r.constructor=e,r.__proto__=e.prototype,n}q(e,t)}(Error);function V(t){return function(){var e=Array.prototype.slice.call(arguments);return e.push(this),t.apply(void 0,e)}}function z(t,e,n){var r=t,o=r.prototype,i="fantasy-land/",a=i+"map",u=i+"ap",s=i+"of";o.equals?o["fantasy-land/equals"]=o.equals:n&&(o["fantasy-land/equals"]=V(n.equals)),o.map?o[a]=o.map:e&&(o[a]=V(e.map)),o.ap?o[u]=o.ap:e&&(o[u]=V(e.ap)),r.pure?r[s]=r.pure:e&&(r[s]=e.of),o.chain?o["fantasy-land/chain"]=o.chain:e&&(o["fantasy-land/chain"]=V(e.chain)),r.chainRec?r["fantasy-land/chainRec"]=r.chainRec:e&&(r["fantasy-land/chainRec"]=e.chainRec)}Object.freeze({convertToMethod:V,fantasyLandRegister:z});var J=function(){function t(e,n){L(this,t),this._isRight="right"===n,this.value=e}return B(t,[{key:"isLeft",value:function(){return!this._isRight}},{key:"isRight",value:function(){return this._isRight}},{key:"contains",value:function(t){return this._isRight&&T(this.value,t)}},{key:"exists",value:function(t){return this._isRight&&t(this.value)}},{key:"filterOrElse",value:function(t,e){return this._isRight?t(this.value)?this:$(e()):this}},{key:"flatMap",value:function(t){return this._isRight?t(this.value):this}},{key:"chain",value:function(t){return this.flatMap(t)}},{key:"ap",value:function(t){var e=this;return t.flatMap((function(t){return e.map(t)}))}},{key:"fold",value:function(t,e){return this._isRight?e(this.value):t(this.value)}},{key:"forAll",value:function(t){return!this._isRight||t(this.value)}},{key:"get",value:function(){if(this._isRight)return this.value;throw new H("left.get()")}},{key:"getOrElse",value:function(t){return this._isRight?this.value:t}},{key:"getOrElseL",value:function(t){return this._isRight?this.value:t()}},{key:"map",value:function(t){return this._isRight?Z(t(this.value)):this}},{key:"forEach",value:function(t){this._isRight&&t(this.value)}},{key:"swap",value:function(){return this._isRight?$(this.value):Z(this.value)}},{key:"toOption",value:function(){return this._isRight?X(this.value):tt}},{key:"equals",value:function(t){return null!=t&&(this._isRight===t._isRight&&T(this.value,t.value))}},{key:"hashCode",value:function(){return this._isRight?M(this.value)<<2:M(this.value)<<3}}],[{key:"pure",value:function(t){return new G(t)}},{key:"left",value:function(t){return $(t)}},{key:"right",value:function(t){return Z(t)}},{key:"map2",value:function(t,e,n){return t.isLeft()?t:e.isLeft()?e:Z(n(t.value,e.value))}},{key:"map3",value:function(t,e,n,r){return t.isLeft()?t:e.isLeft()?e:n.isLeft()?n:Z(r(t.value,e.value,n.value))}},{key:"map4",value:function(t,e,n,r,o){return t.isLeft()?t:e.isLeft()?e:n.isLeft()?n:r.isLeft()?r:Z(o(t.value,e.value,n.value,r.value))}},{key:"map5",value:function(t,e,n,r,o,i){return t.isLeft()?t:e.isLeft()?e:n.isLeft()?n:r.isLeft()?r:o.isLeft()?o:Z(i(t.value,e.value,n.value,r.value,o.value))}},{key:"map6",value:function(t,e,n,r,o,i,a){return t.isLeft()?t:e.isLeft()?e:n.isLeft()?n:r.isLeft()?r:o.isLeft()?o:i.isLeft()?i:Z(a(t.value,e.value,n.value,r.value,o.value,i.value))}},{key:"tailRecM",value:function(t,e){for(var n=t;;){var r=e(n);if(!r.isRight())return r;var o=r.value;if(o.isRight())return Z(o.value);n=o.value}}}]),t}(),K=function(t){function e(t){return L(this,e),N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"left"))}return q(e,t),e}(J);function $(t){return new K(t)}var G=function(t){function e(t){return L(this,e),N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"right"))}return q(e,t),e}(J);function Z(t){return new G(t)}var Y={equals:function(t,e){return t?t.equals(e):!e},map:function(t,e){return e.map(t)},ap:function(t,e){return e.ap(t)},of:J.pure,chain:function(t,e){return e.flatMap(t)},chainRec:function(t,e){return J.tailRecM(e,(function(e){return t(J.left,J.right,e)}))}};z(J,Y,Y);var Q=function(){function t(e,n){L(this,t),this._isEmpty=null!=n?n:null==e,this.value=e}return B(t,[{key:"get",value:function(){if(!this._isEmpty)return this.value;throw new H("Option.get")}},{key:"getOrElse",value:function(t){return this._isEmpty?t:this.value}},{key:"orNull",value:function(){return this._isEmpty?null:this.value}},{key:"orUndefined",value:function(){return this._isEmpty?void 0:this.value}},{key:"getOrElseL",value:function(t){return this._isEmpty?t():this.value}},{key:"orElse",value:function(t){return this._isEmpty?t:this}},{key:"orElseL",value:function(t){return this._isEmpty?t():this}},{key:"isEmpty",value:function(){return this._isEmpty}},{key:"nonEmpty",value:function(){return!this._isEmpty}},{key:"map",value:function(t){return this._isEmpty?tt:X(t(this.value))}},{key:"flatMap",value:function(t){return this._isEmpty?tt:t(this.value)}},{key:"chain",value:function(t){return this.flatMap(t)}},{key:"ap",value:function(t){var e=this;return t.flatMap((function(t){return e.map(t)}))}},{key:"filter",value:function(t){return this._isEmpty||!t(this.value)?tt:this}},{key:"fold",value:function(t,e){return this._isEmpty?t():e(this.value)}},{key:"contains",value:function(t){return!this._isEmpty&&T(this.value,t)}},{key:"exists",value:function(t){return!this._isEmpty&&t(this.value)}},{key:"forAll",value:function(t){return this._isEmpty||t(this.value)}},{key:"forEach",value:function(t){this._isEmpty||t(this.value)}},{key:"equals",value:function(t){return null!=t&&(this.nonEmpty()&&t.nonEmpty()?T(this.value,t.value):this.isEmpty()&&t.isEmpty())}},{key:"hashCode",value:function(){return this._isEmpty?2433880:null==this.value?9735524:M(this.value)<<2}}],[{key:"of",value:function(t){return null!=t?X(t):tt}},{key:"some",value:function(e){return new t(e,!1)}},{key:"none",value:function(){return tt}},{key:"empty",value:function(){return tt}},{key:"pure",value:function(t){return X(t)}},{key:"map2",value:function(t,e,n){return t.nonEmpty()&&e.nonEmpty()?X(n(t.value,e.value)):tt}},{key:"map3",value:function(t,e,n,r){return t.nonEmpty()&&e.nonEmpty()&&n.nonEmpty()?X(r(t.value,e.value,n.value)):tt}},{key:"map4",value:function(t,e,n,r,o){return t.nonEmpty()&&e.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?X(o(t.value,e.value,n.value,r.value)):tt}},{key:"map5",value:function(t,e,n,r,o,i){return t.nonEmpty()&&e.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&o.nonEmpty()?X(i(t.value,e.value,n.value,r.value,o.value)):tt}},{key:"map6",value:function(t,e,n,r,o,i,a){return t.nonEmpty()&&e.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&o.nonEmpty()&&i.nonEmpty()?X(a(t.value,e.value,n.value,r.value,o.value,i.value)):tt}},{key:"tailRecM",value:function(t,e){for(var n=t;;){var r=e(n);if(!r.nonEmpty())return tt;var o=r.value;if(o.isRight())return X(o.value);n=o.value}}}]),t}(),W=function(t){function e(t){return L(this,e),N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,!1))}return q(e,t),e}(Q);function X(t){return new W(t)}var tt=new(function(t){function e(){return L(this,e),N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,void 0,!0))}return q(e,t),e}(Q)),et={equals:function(t,e){return t?t.equals(e):!e},map:function(t,e){return e.map(t)},ap:function(t,e){return e.ap(t)},of:Q.pure,chain:function(t,e){return e.flatMap(t)},chainRec:function(t,e){return Q.tailRecM(e,(function(e){return t(J.left,J.right,e)}))}};z(Q,et,et);var nt=function(){function t(e,n){L(this,t),this._isSuccess="success"===n,this.value=e}return B(t,[{key:"isSuccess",value:function(){return this._isSuccess}},{key:"isFailure",value:function(){return!this._isSuccess}},{key:"get",value:function(){if(!this._isSuccess)throw this.value;return this.value}},{key:"getOrElse",value:function(t){return this._isSuccess?this.value:t}},{key:"getOrElseL",value:function(t){return this._isSuccess?this.value:t()}},{key:"orNull",value:function(){return this._isSuccess?this.value:null}},{key:"orUndefined",value:function(){return this._isSuccess?this.value:void 0}},{key:"orElse",value:function(t){return this._isSuccess?this:t}},{key:"orElseL",value:function(t){return this._isSuccess?this:t()}},{key:"failed",value:function(){return this._isSuccess?at(new H("try.failed()")):ot(this.value)}},{key:"fold",value:function(t,e){return this._isSuccess?e(this.value):t(this.value)}},{key:"filter",value:function(t){if(!this._isSuccess)return this;try{return t(this.value)?this:at(new H("Predicate does not hold for "+this.value))}catch(e){return at(e)}}},{key:"flatMap",value:function(t){if(!this._isSuccess)return this;try{return t(this.value)}catch(e){return at(e)}}},{key:"chain",value:function(t){return this.flatMap(t)}},{key:"ap",value:function(t){var e=this;return t.flatMap((function(t){return e.map(t)}))}},{key:"map",value:function(e){var n=this;return this._isSuccess?t.of((function(){return e(n.value)})):this}},{key:"forEach",value:function(t){this._isSuccess&&t(this.value)}},{key:"recover",value:function(e){var n=this;return this._isSuccess?this:t.of((function(){return e(n.value)}))}},{key:"recoverWith",value:function(t){try{return this._isSuccess?this:t(this.value)}catch(e){return at(e)}}},{key:"toOption",value:function(){return this._isSuccess?X(this.value):tt}},{key:"toEither",value:function(){return this._isSuccess?Z(this.value):$(this.value)}},{key:"equals",value:function(t){return null!=t&&(this._isSuccess?t._isSuccess&&T(this.value,t.value):!t._isSuccess&&T(this.value,t.value))}},{key:"hashCode",value:function(){return this._isSuccess,M(this.value)}}],[{key:"of",value:function(t){try{return ot(t())}catch(e){return at(e)}}},{key:"pure",value:function(e){return t.success(e)}},{key:"unit",value:function(){return st}},{key:"success",value:function(t){return ot(t)}},{key:"failure",value:function(t){return at(t)}},{key:"raise",value:function(t){return at(t)}},{key:"map2",value:function(t,e,n){if(t.isFailure())return t;if(e.isFailure())return e;try{return ot(n(t.value,e.value))}catch(r){return at(r)}}},{key:"map3",value:function(t,e,n,r){if(t.isFailure())return t;if(e.isFailure())return e;if(n.isFailure())return n;try{return ot(r(t.value,e.value,n.value))}catch(o){return at(o)}}},{key:"map4",value:function(t,e,n,r,o){if(t.isFailure())return t;if(e.isFailure())return e;if(n.isFailure())return n;if(r.isFailure())return r;try{return ot(o(t.value,e.value,n.value,r.value))}catch(i){return at(i)}}},{key:"map5",value:function(t,e,n,r,o,i){if(t.isFailure())return t;if(e.isFailure())return e;if(n.isFailure())return n;if(r.isFailure())return r;if(o.isFailure())return o;try{return ot(i(t.value,e.value,n.value,r.value,o.value))}catch(a){return at(a)}}},{key:"map6",value:function(t,e,n,r,o,i,a){if(t.isFailure())return t;if(e.isFailure())return e;if(n.isFailure())return n;if(r.isFailure())return r;if(o.isFailure())return o;if(i.isFailure())return i;try{return ot(a(t.value,e.value,n.value,r.value,o.value,i.value))}catch(u){return at(u)}}},{key:"tailRecM",value:function(t,e){for(var n=t;;)try{var r=e(n);if(r.isFailure())return r;var o=r.get();if(o.isRight())return ot(o.value);n=o.value}catch(i){return at(i)}}}]),t}(),rt=function(t){function e(t){return L(this,e),N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"success"))}return q(e,t),e}(nt);function ot(t){return new rt(t)}var it=function(t){function e(t){return L(this,e),N(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"failure"))}return q(e,t),e}(nt);function at(t){return new it(t)}var ut={equals:function(t,e){return t?t.equals(e):!e},map:function(t,e){return e.map(t)},ap:function(t,e){return e.ap(t)},of:nt.pure,chain:function(t,e){return e.flatMap(t)},chainRec:function(t,e){return nt.tailRecM(e,(function(e){return t(J.left,J.right,e)}))}};z(nt,ut,ut);var st=ot(void 0);function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){I()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.retries,r=e.accept,o=e.retryDelay,i=C()(e,["retries","accept","retryDelay"]),a=Q.of(n).getOrElse(0),u=Q.of(r).getOrElse((function(t){return Promise.resolve()})),s=Q.of(o).getOrElse(0);return new Promise((function(e,n){!function r(o){fetch(t,i).then((function(t){return u(t.clone()).then((function(n){return e(t)}))})).catch((function(e){o>0?setTimeout((function(){r(--o)}),s):n({url:t,error:e,status:e.status||"unknown"})}))}(a)}))}var ft=function(t){return!0===t.ok?Promise.resolve():Promise.reject(t)};function ht(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pt(t,lt(lt({},e),{},{accept:function(t){return ft(t).then((function(n){return Q.of(e.accept).getOrElse((function(t){return Promise.resolve()}))(t)}))}})).catch((function(t){return Promise.reject(t)}))}var yt={unexpectedCase:function(t){return new Error("Unexpected case ".concat(t))}};function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){I()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mt(t,e,n){return n.value.returnsPromise=!0,n.enumerable=!0,n}function gt(t,e,n){var r=n.value.name;return n.value=function(){return Promise.reject("Marketplace SPI function [".concat(r,"] not implemented"))},n}function bt(t,e,n){var r=n.value;return n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[e.length-1]._context.extension.addon_key.match(/com\.atlassian\.(jira|confluence)\.emcee($|\.local|\.staging|\.development\..*)/g)?r.apply(this,e):Promise.reject("Emcee Internal API")},n}function wt(t){var e={},n=Object.getPrototypeOf(t);return Object.keys(n).forEach((function(r){e[r]=n[r].bind(t),e[r].returnsPromise=n[r].returnsPromise})),e}function kt(t){return Ot.apply(this,arguments)}function Ot(){return(Ot=_()(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht("".concat(e,"/rest/plugins/1.0/upm-token"),{method:"HEAD",credentials:Lt(e)});case 2:return n=t.sent,t.abrupt("return",n.headers.get("upm-token"));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _t(t,e,n){return Pt.apply(this,arguments)}function Pt(){return(Pt=_()(k.a.mark((function t(e,n,r){var o;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={method:"POST",credentials:Lt(e),headers:new window.Headers({"content-type":"application/vnd.atl.plugins.remote.install+json"})},t.next=3,ht("".concat(e,"/rest/plugins/1.0/apps/install-subscribe?addonKey=").concat(r,"&token=").concat(n),o);case 3:return t.next=5,t.sent.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var jt=function(t){return function(e,n){if(t.key)return e(t);if(t.url)return n(t);throw"Invalid identifier"}},Et=function(t,e){return 60*t*1e3/e};function xt(t,e,n){return At.apply(this,arguments)}function At(){return(At=_()(k.a.mark((function t(e,n,r){var o,i,a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={retries:Et(4,r),retryDelay:r,credentials:Lt(e),accept:function(t){return t.json().then((function(t){var e;return(null===(e=t.status)||void 0===e?void 0:e.done)?Promise.resolve():Promise.reject(new Error("Request pending"))}))}},t.next=3,ht(n,o);case 3:return i=t.sent,t.next=6,i.json();case 6:if(a=t.sent,!(-1!==i.headers.get("content-type").indexOf("application/vnd.atl.plugins.install.complete+json"))){t.next=12;break}return t.abrupt("return",a);case 12:throw a.status;case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var It=function(t){var e,n,r,o,i,a,u,s=null===(e=t._embedded)||void 0===e?void 0:e.version,c=null===(n=t._embedded)||void 0===n?void 0:n.vendor;return vt(vt(vt(vt(vt(vt(vt({key:t.key,name:t.name,origin:"marketplace",description:t.tagLine||""},Dt("version",null==s?void 0:s.name)),Dt("vendor",null==c?void 0:c.name)),Dt("vendorLink",null==c||null===(r=c._links.alternate)||void 0===r?void 0:r.href)),Dt("icon",null===(o=t._embedded)||void 0===o||null===(i=o.logo)||void 0===i?void 0:i._links.image.href)),Dt("privacyPolicy",null===(a=t.vendorLinks)||void 0===a?void 0:a.privacy)),Dt("eula",null==s||null===(u=s.vendorLinks)||void 0===u?void 0:u.eula)),{},{vendorType:(null==c?void 0:c.isAtlassian)?"internal":"thirdParty",metadata:void 0})},St=function(t){var e,n,r,o=null===(e=t._embedded)||void 0===e||null===(n=e.version)||void 0===n||null===(r=n.deployment)||void 0===r?void 0:r.permissions;return o?o.map((function(t){return t.key})):[]},Ut=function(t){var e,n,r;return vt(vt(vt(vt(vt(vt(vt({key:t.key,name:t.name,origin:"marketplace",description:t.summary,version:t.version},Dt("vendor",null===(e=t.vendor)||void 0===e?void 0:e.name)),Dt("vendorLink",null===(n=t.vendor)||void 0===n?void 0:n.marketplaceLink)),Dt("vendorType",t.vendor?t.vendor.isAtlassian?"internal":"thirdParty":void 0)),Dt("icon",null===(r=t.logo)||void 0===r?void 0:r.link)),Dt("privacyPolicy",t.links.privacy)),Dt("eula",t.links.eula)),{},{metadata:void 0})},Rt=function(t){return{details:Ut(t),preinstalled:t.preinstalled,scopes:(t.permissions||[]).map((function(t){return t.key})),metadata:void 0}};function Dt(t,e){return null!=e?I()({},t,e):{}}function Ct(t,e,n){var r,o,i,a=null===(r=e.links)||void 0===r?void 0:r.postInstall,u=null===(o=e.links)||void 0===o?void 0:o.configure,s=null===(i=e.links)||void 0===i?void 0:i.manage;return Mt(n,t).map((function(e){return function(t,e,n,r,o){return vt(vt(vt(vt({details:It(t),scopes:St(t),enabled:!0,latestVersion:!0,installationId:t.key},Dt("getStartedUrl",e)),Dt("configureUrl",n)),Dt("manageAppUrl",r)),{},{paymentModel:o,installTime:new Date,authType:{type:"2LO"},metadata:void 0})}(t,a,u,s,e)}))}var Ft={type:"free"},Tt=function(t){return{type:"paid",licenseType:t}},Mt=function(t,e){var n,r,o,i=null==e||null===(n=e._embedded)||void 0===n||null===(r=n.version)||void 0===r?void 0:r.paymentModel;return i?(o=i,function(t,e,n){switch(o){case"atlassian":return e();case"free":return t();case"vendor":return n();default:throw yt.unexpectedCase(o)}})((function(){return J.right(Ft)}),(function(){var e,n,r,o,i,a,u=null===(e=t.licenseDetails)||void 0===e?void 0:e.evaluation,s=null===(n=t.licenseDetails)||void 0===n?void 0:n.autoRenewal,c=null===(r=t.licenseDetails)||void 0===r?void 0:r.expiryDate;return null!=u&&null!=s?u?(i=c,a=s,i?J.right({type:"evaluation",expiry:i,isAutoRenewal:a}):J.left("Unable to get Expiry date for evaluation license")).map(Tt):function(t,e){return e?J.right({type:"subscription",renewalType:{isAutoRenewal:!0}}):t?J.right({type:"subscription",renewalType:{isAutoRenewal:!1,endDate:t}}):J.left("Unable to get end date for subscription license")}(null===(o=t.licenseDetails)||void 0===o?void 0:o.subscriptionEndDate,s).map(Tt):J.left("Unable to get subscription information from UPM")}),(function(){return J.left("Cannot get subscription information for a PvV app")})):J.left("Unable to get payment model from marketplace")};function Lt(t){return""===t?"same-origin":"include"}var Bt=function(t,e){return t.reduce((function(t,n){return t[e(n)]=n,t}),{})},qt=n("dunV"),Nt=n.n(qt);function Ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(n),!0).forEach((function(e){I()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zt=function(t,e){var n,r=(n=function(n){var o=this,i=e?e(n):n,a=i.code,u=i.message,s=i.meta,c=i.source,l=C()(i,["code","message","meta","source"]);this.code=a,this.message=u,this.id=Nt()(9),this.type=t,this.source=c,this.meta=Vt(Vt({},s),l),this.toJSON=function(){return Vt({id:o.id,code:o.code,type:o.type,message:o.message,meta:o.meta},o.source&&{source:o.source.toJSON?o.source.toJSON():o.source.message?o.source.message:o.source})},this.toString=JSON.stringify(this.toJSON()),Object.prototype.hasOwnProperty.call(Error,"captureStackTrace")?Error.captureStackTrace(this,r):this.stack=new Error(u).stack},new Function("return function (call) { \n         return function ".concat(t,"() { \n           return call(this, arguments) \n         }; \n      };"))()(Function.apply.bind(n)));return"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r.prototype,Error.prototype):r.prototype=Object.create(Error.prototype,{constructor:{value:r}}),r},Jt=zt("AppInstallError",(function(t){var e=t.code,n=t.message,r=t.addon;return{code:e,message:n,source:t.source,meta:{addon:r}}})),Kt=function(t){return zt(t,(function(t){var e=t.source,n=t.appKey;return{code:"FetchError",message:"Failed to fetch app details for ".concat(n),source:e,meta:{appKey:n}}}))},$t=function(t){return{credentials:Lt(t)}},Gt=function(t,e){return"".concat(t,"/rest/plugins/1.0/apps/install-subscribe/permission?addonKey=").concat(e)},Zt=function(t,e){return"".concat(t,"/rest/plugins/1.0/").concat(e,"-key")},Yt=function(t,e){return"".concat(t,"/rest/plugins/1.0/").concat(e,"/marketplace")},Qt=function(t){return"".concat(t,"/rest/plugins/1.0/")};function Wt(t,e){return Xt.apply(this,arguments)}function Xt(){return(Xt=_()(k.a.mark((function t(e,n){var r,o;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ht(Zt(e,n),$t(e));case 3:return r=t.sent,t.next=6,r.json();case 6:return o=t.sent,t.abrupt("return",{links:{postInstall:o.links["post-install"],configure:o.links.configure,manage:o.links.manage},key:o.key});case 10:throw t.prev=10,t.t0=t.catch(0),new(Kt("InstalledAppFromUPMError"))({source:t.t0,appKey:n});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function te(t,e){return ee.apply(this,arguments)}function ee(){return(ee=_()(k.a.mark((function t(e,n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pt(Gt(e,n),$t(e));case 2:if(!((r=t.sent).status>=200&&r.status<=299)){t.next=7;break}return t.abrupt("return",Promise.resolve(!0));case 7:if(401!==r.status&&403!==r.status){t.next=11;break}return t.abrupt("return",Promise.resolve(!1));case 11:return t.abrupt("return",Promise.reject("".concat(r.status,": ").concat(r.statusText)));case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ne=function(){var t=_()(k.a.mark((function t(e,n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ht(Yt(e,n),$t(e));case 3:return r=t.sent,t.abrupt("return",r.json());case 7:throw t.prev=7,t.t0=t.catch(0),new(Kt("InstalledMarketplaePluginUPMError"))({source:t.t0,appKey:n});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),re=function(t){return ht(function(t){return"".concat(t,"/rest/plugins/1.0/installed-marketplace")}(t),$t(t)).then((function(t){return t.json()}))};function oe(t){return ie.apply(this,arguments)}function ie(){return(ie=_()(k.a.mark((function t(e){var n,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht(Qt(e),$t(e));case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.next=8,r.plugins.filter((function(t){return(t.userInstalled||t.usesLicensing)&&"Embedded Marketplace"!==t.name})).map((function(t){return{links:{postInstall:t.links["post-install"],configure:t.links.configure,manage:t.links.manage},key:t.key}}));case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ae,ue=function(){var t=_()(k.a.mark((function t(e,n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ht(e+"/rest/2/addons/".concat(n,"?hosting=cloud&withVersion=true"));case 3:return r=t.sent,t.abrupt("return",r.json());case 7:throw t.prev=7,t.t0=t.catch(0),new(Kt("MarketplaceAppByKeyError"))({source:t.t0,appKey:n});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}();function se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?se(Object(n),!0).forEach((function(e){I()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var le,pe=(ae=function(){function t(e){j()(this,t),I()(this,"config",void 0),this.config=e}var e;return x()(t,[{key:"getHostInfo",value:function(){return Promise.resolve(ce(ce({supports:R,product:this.config.product},this.config.subproduct?{subproduct:this.config.subproduct}:{}),{},{baseUrl:this.config.baseUrl,globalContext:(t=this.config,{name:"jira"===t.product?"Jira":"Confluence",type:"application",id:"ari:cloud:".concat(t.product,":").concat(t.cloudId,":/")})}));var t}},{key:"getHostPricingInfo",value:(e=_()(k.a.mark((function t(){var e;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht(function(t){return"".concat(t,"/rest/plugins/1.0/host-status")}(n=this.config.baseUrl),$t(n)).then((function(t){return t.json()}));case 2:return e=t.sent,t.abrupt("return",{evaluation:e.hostLicense.evaluation,currentLicensedUsers:e.upmLicensedHostUsers,renewalType:e.hostLicense.autoRenewal?"auto":"quote",maximumLicensedUsers:e.hostLicense.maximumNumberOfUsers,billingCurrency:e.billingCurrency,subscriptionPeriod:Object.prototype.hasOwnProperty.call(e.hostLicense,"subscriptionAnnual")?e.hostLicense.subscriptionAnnual?"annual":"monthly":"annual"});case 4:case"end":return t.stop()}var n}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}(),U()(ae.prototype,"getHostInfo",[mt,bt],Object.getOwnPropertyDescriptor(ae.prototype,"getHostInfo"),ae.prototype),U()(ae.prototype,"getHostPricingInfo",[mt,bt],Object.getOwnPropertyDescriptor(ae.prototype,"getHostPricingInfo"),ae.prototype),ae),fe=n("RhWx"),he=n.n(fe),ye=n("ddV6"),de=n.n(ye),ve={mpacBaseUrl:"https://marketplace.atlassian.com"},me={mpacBaseUrl:"https://marketplace.stg.internal.atlassian.com"},ge=function(t){switch(t.environment){case"prod":return ve;case"staging":return me;default:return console.error("Unable to configure marketplace env: "+t.environment),ve}},be=function(t){return t.remoteInstallable||t.preinstalled};function we(t,e,n){return ke.apply(this,arguments)}function ke(){return(ke=_()(k.a.mark((function t(e,n,r){var o,i,a,u,s;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([ue(n,e.key),Wt(r,e.key),ne(r,e.key)]);case 2:return o=t.sent,i=de()(o,3),a=i[0],u=i[1],s=i[2],t.abrupt("return",Ct(a,u,s).fold((function(t){return Promise.reject(t)}),(function(t){return t})));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Oe(t,e){return e.map((function(e){return ue(t,e.key).catch((function(t){return t}))}))}function _e(t,e){return Pe.apply(this,arguments)}function Pe(){return(Pe=_()(k.a.mark((function t(e,n){var r,o,i,a,u,s,c,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([oe(n),re(n)]);case 2:return r=t.sent,o=de()(r,2),i=o[0],a=o[1],t.next=8,Promise.all(Oe(e,i));case 8:return u=t.sent,s=Bt(a.plugins,(function(t){return t.key})),c=Bt(u,(function(t){return t.key})),l=i.reduce((function(t,e){var n=s[e.key],r=c[e.key];return r&&n?[].concat(he()(t),he()(Ct(r,e,n).map((function(t){return[t]})).getOrElse([]))):(console.error("Marketplace API or Installed Marketplace API didn't return a response for ".concat(e.key)),t)}),[]),t.abrupt("return",l);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var je,Ee,xe,Ae=(le=function(){function t(e){j()(this,t),I()(this,"config",void 0),I()(this,"upmBaseUrl",void 0),this.config=e,this.upmBaseUrl=this.config.baseUrl}var e,n;return x()(t,[{key:"getInstalledAddons",value:(n=_()(k.a.mark((function t(e){var n,r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=ge(this.config).mpacBaseUrl,t.prev=1,t.next=4,_e(n,this.upmBaseUrl);case 4:return r=t.sent,t.abrupt("return",{values:r,totalCount:r.length,pageSize:r.length});case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",{values:[],totalCount:0,pageSize:0});case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(t){return n.apply(this,arguments)})},{key:"uninstallAddon",value:function(t){return Promise.reject()}},{key:"installAddon",value:(e=_()(k.a.mark((function t(e){var n,r,o,i,a=this;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(){return(i=_()(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new Jt({message:"Marketplace SPI function [InstallAddon with InstallByUrl] not implemented",addon:e.addon,code:"MethodNotImplementedError"});case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},o=function(t){return i.apply(this,arguments)},n={getTokenFromUPM:function(){var t=_()(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,kt(a.upmBaseUrl);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new Jt({addon:e.addon,code:"UPMTokenFetchError",message:"Fetching token from UPM failed for ".concat(e.addon.toString()),source:t.t0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),postInstallToUPM:function(){var t=_()(k.a.mark((function t(n,r){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_t(a.upmBaseUrl,n,r);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new Jt({addon:e.addon,code:t.t0.subCode||t.t0.contentType||"UnknownUPMInstallSubscribeError",message:t.t0.errorMessage,source:t.t0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),waitForPendingUPMTask:function(){var t=_()(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,xt(a.upmBaseUrl,n.links.self,n.pingAfter);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new Jt({addon:e.addon,code:"UPMInstallPostError",message:"Failed while polling for app installation status for ".concat(e.addon.toString()),source:t.t0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),getInstalledAddonInternal:function(){var t=_()(k.a.mark((function t(n,r){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,we(n,r,a.upmBaseUrl);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new Jt({addon:e.addon,code:"FetchAddonInternalError",message:"Failed while constructing a app object post installation success for ".concat(e.addon.toString()),source:t.t0});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()},r=function(){var t=_()(k.a.mark((function t(e){var r,o,i;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=ge(a.config).mpacBaseUrl,t.next=3,n.getTokenFromUPM();case 3:return o=t.sent,t.next=6,n.postInstallToUPM(o,e.key);case 6:return i=t.sent,t.next=9,n.waitForPendingUPMTask(i);case 9:return t.abrupt("return",n.getInstalledAddonInternal(e,r));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.next=6,jt(e.addon)(r,o);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"upgradeAddon",value:function(t){return Promise.reject()}},{key:"uninstallAddonFromSite",value:function(t){return Promise.reject()}},{key:"createContainerToken",value:function(t){return Promise.reject()}},{key:"getInstalledAddon",value:function(t){var e=ge(this.config).mpacBaseUrl;return we(t.addon,e,this.upmBaseUrl)}},{key:"getInstallableAddon",value:function(t){var e=this;return jt(t.addon)(function(){var t=_()(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o=e.upmBaseUrl,i=n.key,ht(function(t,e){return"".concat(t,"/rest/plugins/1.0/available/").concat(e,"-key")}(o,i),$t(o)).then((function(t){return t.json()}));case 2:return r=t.sent,t.abrupt("return",be(r)?Rt(r):Promise.reject("Requested add-on is not installable"));case 4:case"end":return t.stop()}var o,i}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){return Promise.reject("Marketplace SPI function [getInstallableAddon with InstallByUrl] not implemented")}))}},{key:"rotateContainerToken",value:function(t){return Promise.reject()}}]),t}(),U()(le.prototype,"getInstalledAddons",[mt,bt],Object.getOwnPropertyDescriptor(le.prototype,"getInstalledAddons"),le.prototype),U()(le.prototype,"uninstallAddon",[mt,bt,gt],Object.getOwnPropertyDescriptor(le.prototype,"uninstallAddon"),le.prototype),U()(le.prototype,"installAddon",[mt,bt,function(t,e,n){var r=n.value,o=function(t){return Promise.resolve(t)==t};return n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=r.apply(this,e);return o(i)?i.then((function(t){return t})).catch((function(t){throw t.toJSON?t.toJSON():t})):i},n}],Object.getOwnPropertyDescriptor(le.prototype,"installAddon"),le.prototype),U()(le.prototype,"upgradeAddon",[mt,bt,gt],Object.getOwnPropertyDescriptor(le.prototype,"upgradeAddon"),le.prototype),U()(le.prototype,"uninstallAddonFromSite",[mt,bt,gt],Object.getOwnPropertyDescriptor(le.prototype,"uninstallAddonFromSite"),le.prototype),U()(le.prototype,"createContainerToken",[mt,bt,gt],Object.getOwnPropertyDescriptor(le.prototype,"createContainerToken"),le.prototype),U()(le.prototype,"getInstalledAddon",[mt,bt],Object.getOwnPropertyDescriptor(le.prototype,"getInstalledAddon"),le.prototype),U()(le.prototype,"getInstallableAddon",[mt,bt],Object.getOwnPropertyDescriptor(le.prototype,"getInstallableAddon"),le.prototype),U()(le.prototype,"rotateContainerToken",[mt,bt,gt],Object.getOwnPropertyDescriptor(le.prototype,"rotateContainerToken"),le.prototype),le),Ie=(je=function(){function t(e){j()(this,t),I()(this,"config",void 0),this.config=e}return x()(t,[{key:"getMostRecentContext",value:function(){return Promise.reject()}},{key:"getContextInstallationForInstalledAddonContext",value:function(t){return Promise.reject()}},{key:"getContextInstallationsForInstalledAddon",value:function(t){return Promise.reject()}},{key:"getContext",value:function(t){return Promise.reject()}},{key:"getContexts",value:function(t){return Promise.reject()}}]),t}(),U()(je.prototype,"getMostRecentContext",[mt,bt,gt],Object.getOwnPropertyDescriptor(je.prototype,"getMostRecentContext"),je.prototype),U()(je.prototype,"getContextInstallationForInstalledAddonContext",[mt,bt,gt],Object.getOwnPropertyDescriptor(je.prototype,"getContextInstallationForInstalledAddonContext"),je.prototype),U()(je.prototype,"getContextInstallationsForInstalledAddon",[mt,bt,gt],Object.getOwnPropertyDescriptor(je.prototype,"getContextInstallationsForInstalledAddon"),je.prototype),U()(je.prototype,"getContext",[mt,bt,gt],Object.getOwnPropertyDescriptor(je.prototype,"getContext"),je.prototype),U()(je.prototype,"getContexts",[mt,bt,gt],Object.getOwnPropertyDescriptor(je.prototype,"getContexts"),je.prototype),je),Se=(Ee=function(){function t(e){j()(this,t),I()(this,"config",void 0),this.config=e}var e;return x()(t,[{key:"hasInstallPermission",value:(e=_()(k.a.mark((function t(e){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te(this.config.baseUrl,e.addon.details.key);case 2:if(!t.sent){t.next=6;break}t.t0={allowed:!0},t.next=7;break;case 6:t.t0={allowed:!1,message:"No addon manage permission",key:"noAddonManagePermission"};case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"hasUninstallPermission",value:function(t){return Promise.reject()}}]),t}(),U()(Ee.prototype,"hasInstallPermission",[mt,bt],Object.getOwnPropertyDescriptor(Ee.prototype,"hasInstallPermission"),Ee.prototype),U()(Ee.prototype,"hasUninstallPermission",[mt,bt,gt],Object.getOwnPropertyDescriptor(Ee.prototype,"hasUninstallPermission"),Ee.prototype),Ee),Ue=n("01Zg"),Re=n.n(Ue),De=function(t,e){return"".concat(t,"/gateway/api/marketplace").concat(e)},Ce=(xe=function(){function t(e){j()(this,t),I()(this,"config",void 0),I()(this,"siteBaseUrl",void 0),this.config=e,this.siteBaseUrl=new Re.a(this.config.baseUrl).origin}var e,n;return x()(t,[{key:"fetchOk",value:(n=_()(k.a.mark((function t(e,n){var r,o;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ht(De(this.siteBaseUrl,e),n);case 3:return r=t.sent,t.next=6,r.json();case 6:return o=t.sent,t.abrupt("return",Promise.resolve(o));case 10:if(t.prev=10,t.t0=t.catch(0),!r||!r.ok){t.next=14;break}return t.abrupt("return",Promise.resolve({status:r.status}));case 14:return t.abrupt("return",Promise.reject(t.t0));case 15:case"end":return t.stop()}}),t,this,[[0,10]])}))),function(t,e){return n.apply(this,arguments)})},{key:"fetch",value:(e=_()(k.a.mark((function t(e,n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",pt(De(this.siteBaseUrl,e),n));case 1:case"end":return t.stop()}}),t,this)}))),function(t,n){return e.apply(this,arguments)})}]),t}(),U()(xe.prototype,"fetchOk",[mt,bt],Object.getOwnPropertyDescriptor(xe.prototype,"fetchOk"),xe.prototype),U()(xe.prototype,"fetch",[mt,bt],Object.getOwnPropertyDescriptor(xe.prototype,"fetch"),xe.prototype),xe),Fe=function(t){return Object.assign({},function(t){return wt(new Ae(t))}(t),function(t){return wt(new pe(t))}(t),function(t){return wt(new Ie(t))}(t),function(t){return wt(new Se(t))}(t),function(t){return wt(new Ce(t))}(t))},Te=n("7LQG"),Me=n("BX6b");class Le extends r.Component{componentDidMount(){try{const t=Fe({product:"confluence",cloudId:this.props.cloudId,environment:-1!==p.a.location.host.indexOf(".jira-dev.com")?"staging":-1!==p.a.location.host.indexOf(".atlassian.net")?"prod":"unknown",baseUrl:`${p.a.location.protocol}//${p.a.location.host}${Te.a}`});p.a.define&&p.a.define("ac/marketplace",t)}catch(t){Object(Me.c)().submitError(t,{attribution:"ecosystem"})}}render(){return null}}Object(s.a)(Le,"displayName","MarketplaceModule");var Be=n("Czhu"),qe=n("cGYM");var Ne,He,Ve,ze=class{constructor(t){this.triggerFunction=t}trigger(t,e,n,r){"function"==typeof this.triggerFunction&&this.triggerFunction(t,Object(Be.a)({action:e,appKey:n},r))}markAsSafe(...t){return Object(qe.c)(...t)}dangerouslyCreateSafeString(t){return Object(qe.a)(t)}};let Je=Object(h.a)("confluence.spa.connect")((Ve=He=class extends r.Component{componentDidMount(){f.d.registerAnalyticsAPI(new ze(this.props.triggerAnalytics))}renderCcAnalyticsModule(t){return o.a.createElement(v.a,null,({cloudId:e})=>o.a.createElement(b,{cloudId:e,connectHost:t}))}renderMarketplaceModule(){return o.a.createElement(v.a,null,({cloudId:t})=>o.a.createElement(Le,{cloudId:t}))}render(){return o.a.createElement(m.a,{wrm:["wr!confluence.web.resources:querystring","wr!confluence.web.resources:navigator-context","wr!com.atlassian.plugins.atlassian-connect-plugin:confluence-atlassian-connect-resources-v5"]},()=>o.a.createElement(c.c,{to:[d.a]},t=>{if(!p.a.connectHost)return null;const e=new y.b(t),n=new y.c(t),r=p.a.connectHost.getFrameworkAdaptor();return o.a.createElement("span",{"data-test-id":"connect-support-component"},o.a.createElement(f.b,{flagProvider:e,adaptor:r}),o.a.createElement(f.c,{messageProvider:n,adaptor:r}),this.renderCcAnalyticsModule(p.a.connectHost),this.props.isEmceeDiscoverEnabled?this.renderMarketplaceModule():null)}))}},Object(s.a)(He,"displayName","ConnectSupport"),Ne=Ve))||Ne;e.default=Object(i.connect)((function(t){return{isEmceeDiscoverEnabled:Object(u.b)(t,a.f)}}))(Je)},YCV4:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty;function o(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}e.stringify=function(t,e){e=e||"";var n,o,i=[];for(o in"string"!=typeof e&&(e="?"),t)if(r.call(t,o)){if((n=t[o])||null!=n&&!isNaN(n)||(n=""),o=encodeURIComponent(o),n=encodeURIComponent(n),null===o||null===n)continue;i.push(o+"="+n)}return i.length?e+i.join("&"):""},e.parse=function(t){for(var e,n=/([^=?&]+)=?([^&]*)/g,r={};e=n.exec(t);){var i=o(e[1]),a=o(e[2]);null===i||null===a||i in r||(r[i]=a)}return r}},ddV6:function(t,e,n){var r=n("qPgQ"),o=n("Ua7V"),i=n("peMk"),a=n("f2kJ");t.exports=function(t,e){return r(t)||o(t,e)||i(t,e)||a()}},dunV:function(t,e,n){for(var r=self.crypto||self.msCrypto,o="-_",i=36;i--;)o+=i.toString(36);for(i=36;i---10;)o+=i.toString(36).toUpperCase();t.exports=function(t){var e="",n=r.getRandomValues(new Uint8Array(t||21));for(i=t||21;i--;)e+=o[63&n[i]];return e}},f2kJ:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},m3Bd:function(t,e,n){var r=n("LdEA");t.exports=function(t,e){if(null==t)return{};var n,o,i=r(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}},qPgQ:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},wVWY:function(t,e){!function(t){"use strict";if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,i="ArrayBuffer"in t;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=function(t){return t&&DataView.prototype.isPrototypeOf(t)},s=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};y.prototype.append=function(t,e){t=p(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},y.prototype.delete=function(t){delete this.map[p(t)]},y.prototype.get=function(t){return t=p(t),this.has(t)?this.map[t]:null},y.prototype.has=function(t){return this.map.hasOwnProperty(p(t))},y.prototype.set=function(t,e){this.map[p(t)]=f(e)},y.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},y.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),h(t)},y.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),h(t)},y.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),h(t)},n&&(y.prototype[Symbol.iterator]=y.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},O.error=function(){var t=new O(null,{status:0,statusText:""});return t.type="error",t};var l=[301,302,303,307,308];O.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new O(null,{status:e,headers:{location:t}})},t.Headers=y,t.Request=w,t.Response=O,t.fetch=function(t,e){return new Promise((function(n,o){var i=new w(t,e),a=new XMLHttpRequest;a.onload=function(){var t,e,r={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new y,t.split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}})),e)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new O(o,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&r&&(a.responseType="blob"),i.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},t.fetch.polyfill=!0}function p(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function h(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function y(t){this.map={},t instanceof y?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function v(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function m(t){var e=new FileReader,n=v(e);return e.readAsArrayBuffer(t),n}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(r&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(o&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&r&&u(t))this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!s(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,n,r=d(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=v(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(t,e){var n,r,o=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new y(t.headers)),this.method=t.method,this.mode=t.mode,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new y(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),c.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function k(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function O(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new y(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:this)}}]);
//# sourceMappingURL=confluence-connect-support~dc51bad7.M6Ga6NGyf8.js.map