(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{"+GtZ":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i}));const a={TEMPLATE:"com.atlassian.confluence.template",MACRO_CORE:"com.atlassian.confluence.macro.core",MIGRATION:"com.atlassian.confluence.migration"},r={INVALID:"__confluenceADFMigrationUnsupportedContentInternalExtension__"},o="extension",s="inlineExtension",c="bodiedExtension",i={TEMPLATE:"variable",INLINE_EXTERNAL_IMAGE:"inline-external-image",INLINE_MEDIA_IMAGE:"inline-media-image",PRIVACY_MARK:"privacy-mark",ANCHOR:"anchor",PANEL:"panel",SECTION:"section",CHEESE:"cheese",COLUMN:"column",CONTENT_BY_USER:"content-by-user",CREATE_SPACE_BUTTON:"create-space-button",FAVORITE_PAGES:"favpages",GLOBAL_REPORTS:"global-reports",IM_PRESENCE:"im",LOREMIPSUM:"loremipsum",NAVIGATION_MAP:"navmap",RECENTLY_USED_LABELS:"recently-used-labels",SEARCH:"search",SPACE_DETAILS:"space-details",INVALID:"__confluenceADFMigrationUnsupportedContentInternalExtension__"}},"2hMr":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("+6Tk"),r=n("Q//X"),o=n("MUQl");function s({attributes:e,children:t=null,contentId:n,extensionKey:s,mode:c,name:i}){const u=Object(a.a)(r.b);return Object(o.a)(()=>{u&&Object(r.f)(c,n).succeed({name:i,attributes:e})},[e,n,s,u,c,i]),t}},"2nhj":function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return b}));var a=n("HbGN"),r=n("kC4U"),o=n("94Z3"),s=n("+GtZ");function c(e){return e.hasOwnProperty("")&&l(e[""])||""}function i(e={}){return Object.keys(e).reduce((t,n)=>{const a=l(e[n]);return""!==a&&(t[n]=a),t},{})}function u(e={}){return Object.keys(e).reduce((t,n)=>{const a=l(e[n]);return""===n&&""===a||(t[n]={value:a}),t},{})}function l(e){return e.hasOwnProperty("value")?e.value:e}function d(e){const{type:t,content:n}=e,r=Object(a.a)(e,["type","content"]),{macroParams:o}=r.parameters,s={type:t,attrs:r};return s.attrs.bodyType="none","bodiedExtension"===t&&(s.content=n&&n.length>0?n:[],s.attrs.bodyType="rich"),s.attrs.parameters.macroParams=u(o),s}function m(e){const{attrs:t,content:n,type:a}=e,{macroParams:r}=t.parameters;let o=s.f;a===s.a?o=s.a:a===s.d&&(o=s.d);const c={type:o,attrs:t};return c.attrs.parameters||(c.attrs.parameters={}),n&&(c.content=n),c.attrs.parameters.macroParams=u(r),c}async function b(e){if(e.hasOwnProperty("name")&&!e.hasOwnProperty("attrs"))return Promise.resolve(e);const t=e,{attrs:n}=t,{extensionKey:a,parameters:s}=n||{extensionKey:null,parameters:{macroParams:{},macroMetadata:{schemaVersion:null}}},{macroParams:u,macroMetadata:l}=s,d=a||"",m=i(u||{}),b=c(u||{}),p=l&&l.schemaVersion||"1";if(!t.content||0===t.content.length)return{name:d,params:m,defaultParameterValue:b,schemaVersion:p,body:""};const{content:f}=t,h={representation:"atlas_doc_format",value:JSON.stringify({type:"doc",content:f,version:1})};let O;try{O=await Object(r.a)("/wiki/rest/api/contentbody/convert/storage",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json"}})}catch(y){if(!(y instanceof o.a))throw y;O=y.response}if(!O.ok||200!==O.status)throw Error(`Conversion HTTP error, status = ${O.status}, message = "${O.statusText}"`);return{name:d,params:m,defaultParameterValue:b,schemaVersion:p,body:(await O.json()).value||""}}},MUQl:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("ERkP"),r=n("nnRT"),o=n.n(r);function s(e,t){Object(a.useEffect)(e,function(e){const t=Object(a.useRef)();o()(e,t.current)||(t.current=e);return t.current}(t))}},Nk3d:function(e,t,n){"use strict";var a=n("zjfJ"),r=n("Czhu"),o=n("aWzz"),s=n.n(o),c=n("ERkP"),i=n.n(c),u=n("gwLK"),l=n("gQ5V"),d=n("nnRT"),m=n.n(d),b=n("8TdO"),p=n("daKX"),f=n("kC4U"),h=n("+mzV"),O=n("Q//X"),y=n("6z9Z"),j=n("hpu0"),E=n("+GtZ"),A=n("2nhj"),g=n("KsTJ"),I=n("S2j0"),R=n("7OEs"),C=n("NsQF"),x=n("2hMr");const _=["wr!confluence.web.resources:view-content","wr!confluence.macros.advanced:get-more"];const v="[0-9a-fA-F]",M=new RegExp(`data-macro-id="(${v}{8}-${v}{4}-${v}{4}-${v}{4}-${v}{12})"`),w=()=>i.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,right:0,cursor:"default",zIndex:2}}),L=Object(g.default)(({className:e,isInline:t,nodeProps:n,macroDataProps:a,macroRenderedOutput:o,style:s,children:c})=>{const u=t?"span":"div";return c?i.a.createElement(u,Object(r.a)(Object(r.a)({className:e,style:s},n),a),c):i.a.createElement(u,Object(r.a)(Object(r.a)({className:e,style:s,dangerouslySetInnerHTML:{__html:""+o}},n),a))})`
  /** Fabric Editor sets "white-space: pre-wrap" which breaks layout for nested content not prepared for it, like macros */
  white-space: normal;
  p {
    white-space: normal;
  }

  ${e=>"macrojiraTable"===(e=>{var t;const n=(null!=(t=e)&&null!=(t=t.attrs)&&null!=(t=t.parameters)?t.macroParams:t)||{},a=e.attrs.extensionKey;let r="macro"+a;return"jira"!==a||n.key||n.count||(r+="Table"),r})(e.adf)&&"\n        display: block;\n        max-width: 100%;\n        overflow-x: auto;\n\n        th {\n          word-break: normal;\n        }\n      "}

  ${e=>e.mode===O.a&&"\n    position: relative;\n    user-select: none;\n  "}

  ${e=>e.isInline?"\n    clear: none;\n  ":"\n    clear: both;\n  "}

  ${e=>e.mode===O.c&&e.isInline&&"\n    display: inline-block;\n    padding: 2px;\n  "}
`;class k extends c.Component{constructor(...e){super(...e),Object(a.a)(this,"state",{macroContent:null,containerWidth:0}),Object(a.a)(this,"container",i.a.createRef()),Object(a.a)(this,"macroContainer",i.a.createRef()),Object(a.a)(this,"logger",Object(p.a)("LegacyMacroRenderer")),Object(a.a)(this,"initializeCalendarIfNeeded",()=>{var e;"calendar"===(null!=(e=this.props)&&null!=(e=e.adf)&&null!=(e=e.attrs)?e.extensionKey:e)&&Object(I.a)(["wrc!com.atlassian.confluence.extra.team-calendars:amd","wrc!com.atlassian.confluence.extra.team-calendars:user-timezone-setup","wrc!com.atlassian.confluence.extra.team-calendars:calendar-init-editor","wrc!com.atlassian.confluence.extra.team-calendars:macro-browser-web-resources"],()=>{try{window.require("tc/init-resources").requireResources()}catch(e){this.logger.error(e)}},()=>{this.logger.error`Error loading team calendar WRM!`})}),Object(a.a)(this,"getContainerWidth",()=>{const e=this.props.mode===O.c?this.container.current:this.macroContainer.current,t=e&&e.children[0];return t?t.clientWidth:0})}componentDidMount(){!function(e){if(!e)return;const t=e.contexts&&e.contexts.map(e=>"wrc!"+e)||[],n=e.keys&&e.keys.map(e=>"wr!"+e)||[],a=[..._,...t,...n];Object(I.a)(a,()=>{},()=>{console.error("Cannot loadMacroWebResources: "+a)})}(this.props.webresource),Object(R.a)(this.container.current),this.initializeCalendarIfNeeded(),setTimeout(()=>{this.setState({macroContent:this.container.current,containerWidth:this.getContainerWidth()})},0)}getMacroId(){var e;const{adf:t,macroRenderedOutput:n}=this.props,a=null!=(e=t)&&null!=(e=e.attrs)&&null!=(e=e.parameters)&&null!=(e=e.macroMetadata)&&null!=(e=e.macroId)?e.value:e;if(a)return a;const r=M.exec(n||"");return r&&r[1]?r[1]:(this.logger.error`No macro ID for this macro!`,"")}render(){var e;const{adf:t,macroRenderedOutput:n,mode:a,contentId:o,attributes:s,experienceName:u}=this.props,{containerWidth:l}=this.state,d=t.type===E.d,m=null!=(e=this.props)&&null!=(e=e.adf)&&null!=(e=e.attrs)?e.extensionKey:e,b={adf:t,isInline:d,mode:a,nodeProps:{ref:this.container,title:`Macro (${t.attrs.extensionKey})`},macroDataProps:{"data-fabric-macro":this.getMacroId(),"data-macro-body":this.props.body||"","data-macro-parameters":this.props.parameters||""},macroRenderedOutput:n};return a===O.c?i.a.createElement(c.Fragment,null,i.a.createElement(L,Object(r.a)({},b)),i.a.createElement(C.a,{node:this.state.macroContent}),i.a.createElement(x.a,{name:u,contentId:o,extensionKey:m,mode:a,attributes:s})):i.a.createElement(L,Object(r.a)(Object(r.a)({},b),{},{style:{minWidth:l}}),i.a.createElement(w,null),i.a.createElement("div",{ref:this.macroContainer,dangerouslySetInnerHTML:{__html:""+n}}),i.a.createElement(x.a,{name:u,contentId:o,extensionKey:m,mode:a,attributes:s}))}}var T=n("3IV/");const $=g.default.span`
  display: inline-block;
  background-color: ${T.N20};
  border-radius: 5px;
  min-width: 50px;
  height: 25px;
  padding: 5px;
`,P=g.default.div`
  display: block;
  background-color: ${T.N20};
  border-radius: 5px;
  width: 100%;
  min-width: 60px;
  height: 25px;
  padding: 5px;
  box-sizing: border-box;
`,S=({node:e})=>e&&"inlineExtension"===e.type?i.a.createElement($,null):i.a.createElement(P,null);var N=n("L21V"),V=n("bs5R"),W=n.n(V),K=n("XOH5");const B=({error:e,mode:t,extensionKey:n,node:a,contentId:r})=>i.a.createElement(c.Fragment,null,i.a.createElement(K.a,{extensionKey:n,error:e||Error("Unable to render "+n),mode:t,attributes:Object(O.e)(a),contentId:r,name:Object(O.d)(t,a)}),i.a.createElement("div",{style:{display:"flex",backgroundColor:"#F4F5F7",borderRadius:5,minWidth:200,padding:5}},i.a.createElement(W.a,{label:"",size:"medium"}),i.a.createElement("span",{style:{paddingLeft:5}},i.a.createElement(N.b,{id:"fabric-extension-handlers.legacymacrorenderer.error",defaultMessage:"Failed to get macro details",description:"Legacy macro renderer error message"}))));var D=n("H5qd");const F=n.n(D).a`query MacroContentRendererQuery($adf:String!$containedRender:Boolean=false$contentId:ID!$mode:ContentRendererMode=RENDERER){contentRenderer(adf:$adf containedRender:$containedRender contentId:$contentId mode:$mode){html webResourceDependencies{contexts keys}}}`;n.d(t,"a",(function(){return J}));const U=e=>{var t;const n=Object(r.a)({},(null!=(t=e)&&null!=(t=t.parameters)?t.macroParams:t)||{});return n.__bodyContent&&delete n.__bodyContent,JSON.stringify(Object(A.e)(n))};class J extends c.Component{constructor(...e){super(...e),Object(a.a)(this,"state",{body:"",hasBodyBeenFetched:!1}),Object(a.a)(this,"logger",Object(p.a)("LegacyMacroRendererQuery"))}getChildContext(){const{context:e}=this.props;return{insertCss:e.insertCss||(()=>{})}}componentDidMount(){this.setMacroData()}shouldComponentUpdate(e,t){var n,a;return this.props.contentId!==e.contentId||!m()(null!=(a=this.props)&&null!=(a=a.node)?a.parameters:a,null!=(n=e)&&null!=(n=n.node)?n.parameters:n)||this.state.hasBodyBeenFetched!==t.hasBodyBeenFetched||this.state.body!==t.body}componentDidUpdate(){this.setMacroData()}componentWillUnmount(){const{node:e,mode:t,contentId:n}=this.props,a=Object(O.e)(e);Object(O.h)(t,n,name,a)}async setRichTextMacroBody(){var e;const{contentId:t,node:n}=this.props,a=(null!=(e=n)?e.content:e)||[];try{const e=await(async(e,t)=>{const n={representation:"atlas_doc_format",value:JSON.stringify({type:"doc",content:Array.isArray(t)?t:[t],version:1})},a=await Object(f.a)("/wiki/rest/api/contentbody/convert/storage?contentIdContext="+e,{method:"POST",body:JSON.stringify(n),credentials:"include",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error(`Conversion HTTP error, status = ${a.status}, message = "${a.statusText}"`);return(await a.json()).value})(t,a);this.setState({body:e,hasBodyBeenFetched:!0})}catch(r){this.logger.error`${r}`}}setPlainTextMacroBody(){var e;const{node:t}=this.props,n=(null!=(e=t)&&null!=(e=e.parameters)&&null!=(e=e.macroParams)&&null!=(e=e.__bodyContent)?e.value:e)||"";this.setState({body:n,hasBodyBeenFetched:!0})}setMacroData(){const{node:e}=this.props;e&&!this.state.hasBodyBeenFetched&&((e=>{var t;return e.type===E.f&&Boolean(null!=(t=e)&&null!=(t=t.parameters)&&null!=(t=t.macroParams)?t.__bodyContent:t)})(e)?this.setPlainTextMacroBody():(e=>e.type===E.a)(e)?this.setRichTextMacroBody():this.setState({hasBodyBeenFetched:!0}))}render(){const{node:e,mode:t,contentId:n,extensionKey:a}=this.props,{hasBodyBeenFetched:r}=this.state;if(!e)return null;if(!r)return i.a.createElement(S,{node:e});const o=Object(A.a)(e);return i.a.createElement(h.a.Consumer,null,({contentId:r})=>i.a.createElement(u.b,{client:Object(b.b)()},i.a.createElement(y.a.Provider,{value:Object(j.b)()},i.a.createElement(l.b,{query:F,variables:{adf:JSON.stringify(o),contentId:n,containedRender:n!==r,mode:t&&t.toUpperCase()},context:{single:!0,allowOnExternalPage:!0}},({data:r,loading:s,error:u})=>s?i.a.createElement(S,{node:e}):!u&&r&&r.contentRenderer?i.a.createElement(c.Fragment,null,i.a.createElement(k,{contentId:n,experienceName:Object(O.d)(t,e),adf:o,attributes:Object(O.e)(e),macroRenderedOutput:r.contentRenderer.html,webresource:r.contentRenderer.webResourceDependencies,mode:t,body:this.state.body,parameters:U(e)})):i.a.createElement(B,{error:u,node:e,mode:t,extensionKey:a,contentId:n})))))}}Object(a.a)(J,"childContextTypes",{insertCss:s.a.func.isRequired})},NsQF:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("Czhu"),r=n("zjfJ"),o=n("ERkP"),s=n.n(o),c=(n("aWzz"),n("7nmT")),i=n.n(c),u=n("KIs4"),l=n("frZf"),d=n("TVRZ"),m=n("bR0+");const b=["a.user-mention","a.confluence-userlink","a.userLogoLink","span.user-hover-trigger","img.confluence-userlink"];class p extends o.Component{constructor(...e){super(...e),Object(r.a)(this,"renderPortal",e=>{const{position:t}=this.props,n=e.props["data-account-id"];return i.a.createPortal(s.a.createElement(u.a,null,({featureFlags:r})=>(e.props.href=Object(m.a)(e.props["data-account-id"],null,r["confluence.frontend.people.directory"]?l.a:""),s.a.createElement(d.a,{isAnonymous:!n,userId:n,position:t},s.a.createElement("a",Object(a.a)({},e.props),e.props.children)))),e.placeholder)})}shouldComponentUpdate(e){return e.node!==this.props.node}getLegacyUserElements(){const{node:e}=this.props;return e?Array.from(e.querySelectorAll(b.join(","))):[]}render(){return Object(m.d)(this.getLegacyUserElements()).map(e=>this.renderPortal(e))}}},"Q//X":function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return g})),n.d(t,"g",(function(){return R})),n.d(t,"i",(function(){return C})),n.d(t,"h",(function(){return T})),n.d(t,"f",(function(){return $})),n.d(t,"d",(function(){return P}));var a=n("HbGN"),r=n("Czhu"),o=n("lSUb"),s=n("3VMZ"),c=n("A79P"),i=n("hpu0"),u=n("9btq"),l=n("bw/P"),d=n("cld1"),m=n("iB1A");const b="renderer",p="editor",f="confluence.frontend.macro.analytics.tracker",h="taskSuccess",O="taskFail",y="taskAbort",j="taskStart",E=e=>e.split(".").slice(1).join("."),A=(e=new Map)=>{const t=[];for(const n of e.values()){const{name:e}=n;if(e!==s.a.VIEW_ALL_MACRO){const a=Object(r.a)({uniqueHash:E(e)},I(n));t.push(a)}}return t},g=e=>{var t,n,a;return{type:(null!=(a=e)?a.type:a)||"",macroId:Object(m.c)(null!=(n=e)?n.parameters:n),extensionKey:Object(m.b)(e),extensionType:(null!=(t=e)?t.extensionType:t)||""}},I=e=>{var t,n,a,r,o,s,c;return{extensionKey:Object(m.b)(null!=(c=e)?c.experienceAttributes:c),extensionType:(null!=(s=e)&&null!=(s=s.experienceAttributes)?s.extensionType:s)||"",type:(null!=(o=e)&&null!=(o=o.experienceAttributes)?o.type:o)||"",macroId:(null!=(r=e)&&null!=(r=r.experienceAttributes)?r.macroId:r)||"",duration:(null!=(a=e)?a.duration:a)||"",status:(null!=(n=e)?n.status:n)||"",pageId:(null!=(t=e)?t.pageId:t)||""}},R=(e,t)=>{k(e,t).has(t)||$(e,t).start({attributes:{mode:e},name:s.a.VIEW_ALL_MACRO,timeout:c.a.MACRO_LOAD,id:t})},C=(e,t)=>{const n=k(e,t);if(n.has(t)){if(x(n)){const t={mode:e,macros:null};_(n)&&(t.macros=A(n)),Object(i.b)().succeed({name:s.a.VIEW_ALL_MACRO,attributes:Object(r.a)({},t)})}else Object(i.b)().abort({name:s.a.VIEW_ALL_MACRO,reason:`Some macro aborted before completion in ${c.a.MACRO_LOAD}ms`,attributes:{macros:A(n),mode:e}});M(n).forEach(t=>{const n=Object(m.b)(t.experienceAttributes),a=t.status;Object(d.getAnalyticsWebClient)().then(o=>{o.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:a,attributes:Object(r.a)(Object(r.a)({},t.experienceAttributes),{},{extensionKey:n,mode:e,task:""+s.a.VIEW_JIRA_MACRO})})})}),n.clear(),L.set(`${e}.${t}`,n)}},x=(e=new Map)=>{if(0===e.size)return!0;for(const t of e.values())if(t.name!==s.a.VIEW_ALL_MACRO&&t.status!==h)return!1;return!0},_=(e=new Map)=>{for(const t of e.values())if(t.name!==s.a.VIEW_ALL_MACRO)return!0;return!1},v=e=>e.includes(m.a),M=e=>{const t=[];for(const n of e.values())v(n.name)&&t.push(n);return t},w=(e,t)=>{!function n(){setTimeout(()=>{const a=k(t,e);if(!a.has(e))return;const o=a.get(e),u=Math.round(window.performance.now()-o.startTime)>c.a.MACRO_LOAD;if(x(a)&&_(a))Object(i.b)().succeed({name:s.a.VIEW_ALL_MACRO,attributes:{macros:A(a),mode:t}});else if(u){if(_(a)){Object(i.b)().abort({name:s.a.VIEW_ALL_MACRO,reason:`Some macro aborted before completion in ${c.a.MACRO_LOAD}ms`,attributes:{macros:A(a),mode:t}});(e=>{const t=[];for(const n of e.values())v(n.name)&&n.status!==h&&t.push(n);return t})(a).forEach(e=>{const n=Object(m.b)(e.experienceAttributes);Object(d.getAnalyticsWebClient)().then(a=>{a.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskAbort",attributes:Object(r.a)(Object(r.a)({},e.experienceAttributes),{},{extensionKey:n,mode:t,task:""+s.a.VIEW_JIRA_MACRO,reason:`JIRA macro aborted before completion in ${c.a.MACRO_LOAD}ms`})})})})}else Object(i.b)().succeed({name:s.a.VIEW_ALL_MACRO,attributes:{mode:t}});a.clear(),L.set(`${t}.${e}`,a)}else n()},2e3)}()},L=new Map,k=(e,t)=>(L.has(`${e}.${t}`)||L.set(`${e}.${t}`,new Map),L.get(`${e}.${t}`)),T=(e,t,n,a)=>{var o;const i=k(e,t),l=null!=(o=a)?o.macroId:o;if(i.has(l)&&v(n)){const t=Object(m.b)(a),{status:n}=i.get(l);if(n===h){const{duration:n}=i.get(l);Object(d.getAnalyticsWebClient)().then(o=>{o.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskSuccess",attributes:Object(r.a)(Object(r.a)({},a),{},{extensionKey:t,mode:e,duration:n,task:""+s.a.VIEW_JIRA_MACRO})})})}else if(n===y){const{duration:n}=i.get(l);Object(d.getAnalyticsWebClient)().then(o=>{o.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskAbort",attributes:Object(r.a)(Object(r.a)({},a),{},{extensionKey:t,mode:e,duration:n,task:""+s.a.VIEW_JIRA_MACRO,reason:`JIRA macro aborted before completion in ${c.a.MACRO_LOAD}ms`})})})}else if(n===O){const{duration:n}=i.get(l);Object(d.getAnalyticsWebClient)().then(o=>{o.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskFail",attributes:Object(r.a)(Object(r.a)({},a),{},{extensionKey:t,mode:e,duration:n,task:""+s.a.VIEW_JIRA_MACRO,error:new u.a(`JIRA macro failed to complete in ${c.a.MACRO_LOAD}ms`)})})})}}},$=Object(o.default)((e,t)=>{const n=new l.a,o=k(e,t);return n.subscribe(n=>{var u;const{action:l,name:b,attributes:p}=n,f=Object(a.a)(n,["action","name","attributes"]),E=null!=(u=p)?u.macroId:u;if(l===j){const n=o.get(E);if(n&&n.id===E)return;b===s.a.VIEW_ALL_MACRO?o.has(t)||(o.clear(),Object(i.b)().start({name:s.a.VIEW_ALL_MACRO,timeout:c.a.MACRO_LOAD,id:t,attributes:{mode:e}}),o.set(t,Object(r.a)({status:j,name:b,mode:e},f)),L.set(`${e}.${t}`,o)):(o.set(E,Object(r.a)({status:j,name:b,experienceAttributes:Object(r.a)(Object(r.a)({},p),{},{extensionKey:Object(m.b)(p)}),pageId:t,mode:e},f)),((e,t,n,a)=>{if(v(n)){const n=Object(m.b)(a);Object(d.getAnalyticsWebClient)().then(o=>{o.sendOperationalEvent({source:"ui",actionSubject:"macroTracker",action:"taskStart",attributes:Object(r.a)(Object(r.a)({},a),{},{extensionKey:n,mode:e,pageId:t,task:""+s.a.VIEW_JIRA_MACRO})})})}})(e,t,b,p))}else if(l===h){if(!o.has(E))return;const{duration:a,name:s}=n;o.set(E,Object(r.a)(Object(r.a)({},o.get(E)),{},{id:E,name:s,mode:e,status:h,duration:a,pageId:t})),L.set(`${e}.${t}`,o),T(e,t,s,p)}else if(l===y){if(!o.has(E))return;const{duration:a,reason:c,name:u}=n;o.set(E,Object(r.a)(Object(r.a)({},o.get(E)),{},{id:E,name:u,mode:e,status:y,duration:a,pageId:t,reason:c})),L.set(`${e}.${t}`,o),Object(i.b)().abort({name:s.a.VIEW_ALL_MACRO,reason:"Macro abort loading",attributes:{macros:A(o),mode:e}}),T(e,t,u,p)}else if(l==O){if(!o.has(E))return;const{duration:a,error:c,name:u}=n;o.set(E,Object(r.a)(Object(r.a)({},o.get(E)),{},{id:E,name:u,mode:e,status:O,duration:a,pageId:t,error:c})),L.set(`${e}.${t}`,o),Object(i.b)().fail({name:s.a.VIEW_ALL_MACRO,error:c,attributes:{macros:A(o),mode:e}}),T(e,t,u,p)}w(t,e)}),n}),P=(e,t)=>{const n=g(t);return`${e}.${Object(m.b)(n)}.${n.macroId}`}},TVRZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("ERkP"),r=n.n(a),o=n("Cvqa"),s=n("Ua4J"),c=n("KIs4"),i=n("Cwwk"),u=n("bR0+");const l=new o.b({url:"/gateway/api/directory/graphql",cacheSize:100,cacheMaxAge:3e5}),d=({position:e="bottom-start",userId:t,isAnonymous:n=!1,canViewProfile:d=!0,children:m,trigger:b="hover"})=>{const{push:p}=Object(a.useContext)(s.a),f=Object(i.a)();return r.a.createElement(c.a,null,({userId:a,cloudId:s})=>{return c=a,!n&&d&&t&&c&&f?r.a.createElement(o.a,{cloudId:s,userId:t,resourceClient:l,position:e,trigger:b,actions:[{label:"View profile",id:"view-profile",callback:()=>(async e=>{const t=await Object(u.b)(e);p(t)})(t),shouldRender:e=>(e=>!!e&&(e.status&&"inactive"!==e.status))(e)}]},m):m;var c})}},XOH5:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("bw/P"),r=n("+6Tk"),o=n("Q//X"),s=n("MUQl");function c({attributes:e,children:t=null,error:n,contentId:c,mode:i,name:u}){const l=Object(r.a)(o.b);return Object(s.a)(()=>{l&&(n?function(e,t,n,r,s){Object(a.b)(t)?Object(o.f)(n,r).abort({name:e,reason:`Aborted ${e} because of network error: ${t.toString()}`,checkForTimeout:!1,attributes:s}):Object(o.f)(n,r).fail({name:e,error:t,attributes:s})}(u,n,i,c,e):Object(o.f)(i,c).succeed({name:u,attributes:e}))},[e,c,n,l,i,u]),t}},iB1A:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i}));var a=n("Z9L/"),r=n("IC1n"),o=n.n(r);const s="jira",c=e=>{var t;if(!e)return o()();const n=null!=(t=e)&&null!=(t=t.macroMetadata)&&null!=(t=t.macroId)?t.value:t;return n||Object(a.a)(e)},i=e=>{var t;if(!e)return"";const{extensionKey:n}=e,a=null!=(t=e)&&null!=(t=t.parameters)?t.macroParams:t;return n===s?`${n}${u(a)}`:n},u=e=>{var t,n,a,r;return"true"===(null!=(r=e)&&null!=(r=r.count)?r.value:r)?"-issue-count":(null!=(a=e)?a.columns:a)&&(null!=(n=e)?n.maximumIssues:n)?"-table-view":(null!=(t=e)&&null!=(t=t.key)?t.value:t)?"-single-issue":""}}}]);
//# sourceMappingURL=40.SYntaNhxbM.js.map
