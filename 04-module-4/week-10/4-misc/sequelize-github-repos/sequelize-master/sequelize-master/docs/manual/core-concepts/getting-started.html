<h1 id="getting-started">Getting Started</h1>
<p>In this tutorial you will learn to make a simple setup of Sequelize.</p>
<h2 id="installing">Installing</h2>
<p>Sequelize is available via <a href="https://www.npmjs.com/package/sequelize">npm</a> (or <a href="https://yarnpkg.com/package/sequelize">yarn</a>).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">npm</span> install --save sequelize</a></code></pre></div>
<p>Youâ€™ll also have to manually install the driver for your database of choice:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># One of the following:</span></a>
<a class="sourceLine" id="cb2-2" title="2">$ <span class="ex">npm</span> install --save pg pg-hstore <span class="co"># Postgres</span></a>
<a class="sourceLine" id="cb2-3" title="3">$ <span class="ex">npm</span> install --save mysql2</a>
<a class="sourceLine" id="cb2-4" title="4">$ <span class="ex">npm</span> install --save mariadb</a>
<a class="sourceLine" id="cb2-5" title="5">$ <span class="ex">npm</span> install --save sqlite3</a>
<a class="sourceLine" id="cb2-6" title="6">$ <span class="ex">npm</span> install --save tedious <span class="co"># Microsoft SQL Server</span></a></code></pre></div>
<h2 id="connecting-to-a-database">Connecting to a database</h2>
<p>To connect to the database, you must create a Sequelize instance. This can be done by either passing the connection parameters separately to the Sequelize constructor or by passing a single connection URI:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> <span class="op">{</span> Sequelize <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;sequelize&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">// Option 1: Passing a connection URI</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="at">Sequelize</span>(<span class="st">&#39;sqlite::memory:&#39;</span>) <span class="co">// Example for sqlite</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="at">Sequelize</span>(<span class="st">&#39;postgres://user:pass@example.com:5432/dbname&#39;</span>) <span class="co">// Example for postgres</span></a>
<a class="sourceLine" id="cb3-6" title="6"></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">// Option 2: Passing parameters separately (sqlite)</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="at">Sequelize</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="dt">dialect</span><span class="op">:</span> <span class="st">&#39;sqlite&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="dt">storage</span><span class="op">:</span> <span class="st">&#39;path/to/database.sqlite&#39;</span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-12" title="12"></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">// Option 2: Passing parameters separately (other dialects)</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="at">Sequelize</span>(<span class="st">&#39;database&#39;</span><span class="op">,</span> <span class="st">&#39;username&#39;</span><span class="op">,</span> <span class="st">&#39;password&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-15" title="15">  <span class="dt">host</span><span class="op">:</span> <span class="st">&#39;localhost&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-16" title="16">  <span class="dt">dialect</span><span class="op">:</span> <span class="co">/* one of &#39;mysql&#39; | &#39;mariadb&#39; | &#39;postgres&#39; | &#39;mssql&#39; */</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>The Sequelize constructor accepts a lot of options. They are documented in the <a href="../class/lib/sequelize.js~Sequelize.html#instance-constructor-constructor">API Reference</a>.</p>
<h3 id="testing-the-connection">Testing the connection</h3>
<p>You can use the <code>.authenticate()</code> function to test if the connection is OK:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="cf">try</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="cf">await</span> <span class="va">sequelize</span>.<span class="at">authenticate</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Connection has been established successfully.&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">}</span> <span class="cf">catch</span> (error) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="va">console</span>.<span class="at">error</span>(<span class="st">&#39;Unable to connect to the database:&#39;</span><span class="op">,</span> error)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="op">}</span></a></code></pre></div>
<h3 id="closing-the-connection">Closing the connection</h3>
<p>Sequelize will keep the connection open by default, and use the same connection for all queries. If you need to close the connection, call <code>sequelize.close()</code> (which is asynchronous and returns a Promise).</p>
<h2 id="terminology-convention">Terminology convention</h2>
<p>Observe that, in the examples above, <code>Sequelize</code> refers to the library itself while <code>sequelize</code> refers to an instance of Sequelize, which represents a connection to one database. This is the recommended convention and it will be followed throughout the documentation.</p>
<h2 id="tip-for-reading-the-docs">Tip for reading the docs</h2>
<p>You are encouraged to run code examples locally while reading the Sequelize docs. This will help you learn faster. The easiest way to do this is using the SQLite dialect:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> <span class="op">{</span> Sequelize<span class="op">,</span> Op<span class="op">,</span> Model<span class="op">,</span> DataTypes <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&quot;sequelize&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="at">Sequelize</span>(<span class="st">&quot;sqlite::memory:&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">// Code here! It works!</span></a></code></pre></div>
<p>To experiment with the other dialects, which are harder to setup locally, you can use the <a href="https://github.com/papb/sequelize-sscce">Sequelize SSCCE</a> GitHub repository, which allows you to run code on all supported dialects directly from GitHub, for free, without any setup!</p>
<h2 id="new-databases-versus-existing-databases">New databases versus existing databases</h2>
<p>If you are starting a project from scratch, and your database does not exist yet, Sequelize can be used since the beginning in order to automate the creation of every table in your database.</p>
<p>Also, if you want to use Sequelize to connect to a database that is already filled with tables and data, that works as well! Sequelize has got you covered in both cases.</p>
<h2 id="logging">Logging</h2>
<p>By default, Sequelize will log to console every SQL query it performs. The <code>options.logging</code> option can be used to customize this behavior, by defining the function that gets executed every time Sequelize would log something. The default value is <code>console.log</code> and when using that only the first log parameter of log function call is displayed. For example, for query logging the first parameter is the raw query and the second (hidden by default) is the Sequelize object.</p>
<p>Common useful values for <code>options.logging</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">const</span> sequelize <span class="op">=</span> <span class="kw">new</span> <span class="at">Sequelize</span>(<span class="st">&#39;sqlite::memory:&#39;</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="co">// Choose one of the logging options</span></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="dt">logging</span><span class="op">:</span> <span class="va">console</span>.<span class="at">log</span><span class="op">,</span>                  <span class="co">// Default, displays the first parameter of the log function call</span></a>
<a class="sourceLine" id="cb6-4" title="4">  <span class="dt">logging</span><span class="op">:</span> (...<span class="at">msg</span>) <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(msg)<span class="op">,</span> <span class="co">// Displays all log function call parameters</span></a>
<a class="sourceLine" id="cb6-5" title="5">  <span class="dt">logging</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span>                        <span class="co">// Disables logging</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="dt">logging</span><span class="op">:</span> msg <span class="kw">=&gt;</span> <span class="va">logger</span>.<span class="at">debug</span>(msg)<span class="op">,</span>     <span class="co">// Use custom logger (e.g. Winston or Bunyan), displays the first parameter</span></a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="dt">logging</span><span class="op">:</span> <span class="va">logger</span>.<span class="va">debug</span>.<span class="at">bind</span>(logger)     <span class="co">// Alternative way to use custom logger, displays all messages</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<h2 id="promises-and-asyncawait">Promises and async/await</h2>
<p>Most of the methods provided by Sequelize are asynchronous and therefore return Promises. They are all <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a> , so you can use the Promise API (for example, using <code>then</code>, <code>catch</code>, <code>finally</code>) out of the box.</p>
<p>Of course, using <code>async</code> and <code>await</code> works normally as well.</p>
